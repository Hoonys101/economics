
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision ERROR [  0%]
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision ERROR [  0%]
tests/integration/scenarios/diagnosis/test_api_contract.py::test_api_contract_placeholder PASSED [  0%]
tests/integration/scenarios/diagnosis/test_dashboard_contract.py::test_dashboard_snapshot_structure 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.persistence_bridge:persistence_bridge.py:46 âœ… [Persistence] Saved local snapshot: snapshot_tick_00042_20260211_142538.json
PASSED                                                                   [  0%]
tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation ERROR [  0%]
tests/integration/scenarios/diagnosis/test_market_mechanics.py::test_order_book_matching 
------------------------------- live log setup --------------------------------
INFO     Market_basic_food:order_book_market.py:97 OrderBookMarket basic_food initialized.
-------------------------------- live log call --------------------------------
INFO     Market_basic_food:order_book_market.py:252 Starting order matching for items: ['basic_food']
PASSED                                                                   [  0%]
tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init ERROR [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation ERROR [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance ERROR [  1%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference ERROR [  1%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference ERROR [  1%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_hyperinflation_trigger 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'hyperinflation' at Tick 10!
INFO     simulation.systems.event_system:event_system.py:63   -> Injected 50% cash into all households.
PASSED                                                                   [  1%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_deflation_asset_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'deflation' at Tick 20!
INFO     simulation.systems.event_system:event_system.py:87   -> Reduced all agent assets by 20%.
PASSED                                                                   [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_consumption_pessimism PASSED [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_supply_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'supply_shock' at Tick 30!
INFO     simulation.systems.event_system:event_system.py:98   -> Applied productivity shock (0.5) to Firm 101 (Type: Farm).
PASSED                                                                   [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_panic_selling_order_generation FAILED [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_hoarding_amplification 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:consumption_manager.py:32 SURVIVAL_CHECK | Need: 50.0, Threshold: 0.8, Food: food
PASSED                                                                   [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_debt_repayment_priority 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:consumption_manager.py:32 SURVIVAL_CHECK | Need: 0, Threshold: 0.8, Food: food
INFO     simulation.decisions.ai_driven_household_engine:asset_manager.py:72 DEBT_AVERSION | Household 1 prioritizing repayment: 550.0
PASSED                                                                   [  2%]
tests/integration/test_app.py::test_app_placeholder PASSED               [  2%]
tests/integration/test_atomic_settlement.py::test_settle_atomic_success 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:453 SETTLEMENT_TYPE_ERROR | Amount must be int in atomic batch. Memo: c1
FAILED                                                                   [  3%]
tests/integration/test_atomic_settlement.py::test_settle_atomic_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:453 SETTLEMENT_TYPE_ERROR | Amount must be int in atomic batch. Memo: c1
FAILED                                                                   [  3%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_pause_resume 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: PAUSE | Payload: {}
INFO     simulation.engine:engine.py:96 Executing command: PAUSE | {}
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: RESUME | Payload: {}
INFO     simulation.engine:engine.py:96 Executing command: RESUME | {}
PASSED                                                                   [  3%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_set_base_rate 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: SET_BASE_RATE | Payload: {'rate': 0.15}
INFO     simulation.engine:engine.py:96 Executing command: SET_BASE_RATE | {'rate': 0.15}
INFO     simulation.engine:engine.py:109 MANUAL INTERVENTION: Base Rate set to 0.15
PASSED                                                                   [  3%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_set_tax_rate 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: SET_TAX_RATE | Payload: {'tax_type': 'corporate', 'rate': 0.25}
INFO     simulation.engine:engine.py:96 Executing command: SET_TAX_RATE | {'tax_type': 'corporate', 'rate': 0.25}
INFO     simulation.engine:engine.py:118 MANUAL INTERVENTION: corporate Tax Rate set to 0.25
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: SET_TAX_RATE | Payload: {'tax_type': 'income', 'rate': 0.15}
INFO     simulation.engine:engine.py:96 Executing command: SET_TAX_RATE | {'tax_type': 'income', 'rate': 0.15}
INFO     simulation.engine:engine.py:118 MANUAL INTERVENTION: income Tax Rate set to 0.15
PASSED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_places_sell_order_for_food 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
PASSED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_places_buy_order_for_food 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_sells_labor 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_buys_labor 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_goods_market_matching_integration 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
-------------------------------- live log call --------------------------------
INFO     Market_goods_market:order_book_market.py:252 Starting order matching for items: ['food']
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_labor_market_matching_integration 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     Market_labor_market:order_book_market.py:252 Starting order matching for items: ['labor']
PASSED                                                                   [  4%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type FAILED [  4%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds FAILED [  4%]
tests/integration/test_firm_decision_scenarios.py::test_growth_scenario_with_golden_firm 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:40 AIDrivenFirmDecisionEngine initialized with CorporateManager.
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 100. Used default fallback.
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:124 COST_PLUS_FALLBACK | Firm 100 repricing food from 4.75 to 12.00 (Cost: 10.00)
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:124 COST_PLUS_FALLBACK | Firm 100 repricing food from 4.75 to 12.00 (Cost: 10.00)
PASSED                                                                   [  5%]
tests/integration/test_fiscal_integrity.py::test_infrastructure_investment_generates_transactions_and_issues_bonds 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
INFO     simulation.bank:bank.py:69 Bank 2 initialized (Stateless Proxy).
INFO     modules.government.components.infrastructure_manager:infrastructure_manager.py:90 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 1 households.
FAILED                                                                   [  5%]
tests/integration/test_fiscal_integrity.py::test_education_spending_generates_transactions_only 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100})
INFO     simulation.bank:bank.py:69 Bank 2 initialized (Stateless Proxy).
PASSED                                                                   [  5%]
tests/integration/test_fiscal_policy.py::test_potential_gdp_ema_convergence ERROR [  5%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_recession ERROR [  5%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_boom ERROR [  5%]
tests/integration/test_fiscal_policy.py::test_debt_ceiling_enforcement ERROR [  6%]
tests/integration/test_fiscal_policy.py::test_calculate_income_tax_uses_current_rate ERROR [  6%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit PASSED [  6%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit_no_agents PASSED [  6%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_calculate_reward PASSED [  6%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_debt_crisis PASSED [  6%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_high_inflation_low_unemp PASSED [  6%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_ideal PASSED [  7%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_learning_flow PASSED [  7%]
tests/integration/test_government_finance.py::test_invest_infrastructure_generates_transaction 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 10000})
INFO     modules.government.components.infrastructure_manager:infrastructure_manager.py:90 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 1000.0. Distributed to 1 households.
PASSED                                                                   [  7%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_calculate_income_tax_uses_fiscal_policy_manager 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 0})
FAILED                                                                   [  7%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_make_policy_decision_updates_fiscal_policy 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 0})
INFO     simulation.utils.shadow_logger:shadow_logger.py:36 ShadowLogger initialized at logs/shadow_hand_stage1.csv
PASSED                                                                   [  7%]
tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts ERROR [  7%]
tests/integration/test_government_fiscal_policy.py::test_infrastructure_investment 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 6000})
INFO     modules.government.components.infrastructure_manager:infrastructure_manager.py:90 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 1 households.
PASSED                                                                   [  8%]
tests/integration/test_government_integration.py::test_government_execute_social_policy_tax_and_welfare 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
FAILED                                                                   [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_decision_engine_taylor_rule PASSED [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_execution_engine_state_update PASSED [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_orchestrator_integration 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
PASSED                                                                   [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_social_policy_execution 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
FAILED                                                                   [  8%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_success 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
PASSED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_failure 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
PASSED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_legacy 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
PASSED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_no_settlement_system 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
-------------------------------- live log call --------------------------------
ERROR    simulation.agents.government:government.py:232 Government has no SettlementSystem linked. Cannot collect tax.
PASSED                                                                   [  9%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_ant_high_rate PASSED [  9%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_grasshopper_high_rate PASSED [  9%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_at_neutral_rate PASSED [  9%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_with_inflation_expectation PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_consumption_aggressiveness_reduction PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_dsr_penalty_applied PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_subsistence_constraint_bypasses_reduction PASSED [ 10%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_hr_service_severance PASSED [ 10%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_hr_service_unpaid_wages PASSED [ 10%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_tax_service PASSED [ 11%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_asset_rich_cash_poor_liquidation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 800.00.
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 800.00, Total Claims: 500.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 1 fully paid. Remaining cash: 300.00
PASSED                                                                   [ 11%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_severance_priority_over_shareholders 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 5000.00, Total Claims: 5615.38
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:133 LIQUIDATION_WATERFALL | Tier 1 partially paid (Factor: 0.89). Cash exhausted.
PASSED                                                                   [ 11%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_waterfall_tiers 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 10000.00, Total Claims: 7003.85
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 1 fully paid. Remaining cash: 7996.15
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 2 fully paid. Remaining cash: 2996.15
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:164 LIQUIDATION_WATERFALL | Tier 5 (Equity) distributed 1498.08 USD and foreign assets: {} to shareholders.
PASSED                                                                   [ 11%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_credit_creation_expansion PASSED [ 11%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_credit_destruction_contraction PASSED [ 11%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_internal_transfers_are_neutral PASSED [ 11%]
tests/integration/test_multicurrency_liquidation.py::TestMultiCurrencyLiquidation::test_foreign_currency_distribution_to_shareholders 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 0.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:164 LIQUIDATION_WATERFALL | Tier 5 (Equity) distributed 1000.00 USD and foreign assets: {'KRW': 50000.0} to shareholders.
PASSED                                                                   [ 12%]
tests/integration/test_omo_system.py::test_execute_omo_purchase_order_creation PASSED [ 12%]
tests/integration/test_omo_system.py::test_execute_omo_sale_order_creation PASSED [ 12%]
tests/integration/test_omo_system.py::test_process_omo_purchase_transaction FAILED [ 12%]
tests/integration/test_omo_system.py::test_process_omo_sale_transaction FAILED [ 12%]
tests/integration/test_persistence_purity.py::test_analytics_system_purity PASSED [ 12%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_trigger 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.immigration_manager:immigration_manager.py:55 IMMIGRATION_TRIGGERED | Pop: 50, Unemp: 1.00%, Vacancies: 10. Influx: 5
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
PASSED                                                                   [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_conditions_not_met PASSED [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_renter PASSED [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_owner PASSED [ 13%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_gender_distribution FAILED [ 13%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_household_attributes_initialization FAILED [ 13%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_bankruptcy PASSED [ 13%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_positive PASSED [ 14%]
tests/integration/test_phase23_production.py::TestPhase23Production::test_production_boost_from_fertilizer_tech PASSED [ 14%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
FAILED                                                                   [ 14%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_logic PASSED [ 14%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_risk_averse PASSED [ 14%]
tests/integration/test_public_manager_integration.py::TestPublicManagerIntegration::test_full_liquidation_cycle 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:79 Processing bankruptcy for Agent 99 at tick 1. Recovering inventory.
INFO     PublicManager:public_manager.py:87 Recovered 10.0 of gold.
INFO     PublicManager:public_manager.py:159 Generated liquidation order for 10.0 of gold at 100.0.
PASSED                                                                   [ 14%]
tests/integration/test_purity_gate.py::test_decision_context_purity PASSED [ 15%]
tests/integration/test_purity_gate.py::test_standalone_firm_engine_uses_dto 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:33 StandaloneRuleBasedFirmDecisionEngine initialized.
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:101 Firm 1 RuleBased: Need more labor, adjusting wages/hiring.
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:214 Firm 1 RuleBased Price Adj: Selling 50.0 of wood at price 10.00
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:140 Firm 1 RuleBased: Adjusting price and selling.
PASSED                                                                   [ 15%]
tests/integration/test_purity_gate.py::test_household_engine_uses_dto 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:consumption_manager.py:32 SURVIVAL_CHECK | Need: 0, Threshold: 0.8, Food: <MagicMock name='mock.config.primary_survival_good_id' id='2711903727168'>
PASSED                                                                   [ 15%]
tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_1_standard_inheritance ERROR [ 15%]
tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_2_escheatment ERROR [ 15%]
tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_3_insolvency ERROR [ 15%]
tests/integration/test_shareholder_registry.py::test_registry_basic_operations PASSED [ 16%]
tests/integration/test_shareholder_registry.py::test_stock_market_integration PASSED [ 16%]
tests/integration/test_td194_integration.py::TestTD194Integration::test_household_make_decision_integrity FAILED [ 16%]
tests/integration/test_td194_integration.py::TestTD194Integration::test_firm_make_decision_integrity FAILED [ 16%]
tests/integration/test_thoughtstream_logger.py::test_logger_functionality PASSED [ 16%]
tests/integration/test_tick_normalization.py::TestTickNormalization::test_run_tick_executes_phases PASSED [ 16%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_a_pre_modern PASSED [ 16%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_b_high_income PASSED [ 17%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_c_low_income PASSED [ 17%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_d_middle_income PASSED [ 17%]
tests/integration/test_wo058_production.py::test_bootstrapper_injection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 100
FAILED                                                                   [ 17%]
tests/integration/test_wo058_production.py::test_production_kickstart 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 100
FAILED                                                                   [ 17%]
tests/integration/test_wo167_grace_protocol.py::TestGraceProtocol::test_firm_grace_protocol PASSED [ 17%]
tests/integration/test_wo167_grace_protocol.py::TestGraceProtocol::test_household_grace_protocol PASSED [ 18%]
tests/modules/finance/engines/test_monetary_engine.py::TestMonetaryEngine::test_calculate_rate_neutral PASSED [ 18%]
tests/modules/finance/engines/test_monetary_engine.py::TestMonetaryEngine::test_calculate_rate_high_inflation PASSED [ 18%]
tests/modules/finance/engines/test_monetary_engine.py::TestMonetaryEngine::test_calculate_rate_recession PASSED [ 18%]
tests/modules/finance/engines/test_monetary_engine.py::TestMonetaryEngine::test_strategy_override PASSED [ 18%]
tests/modules/finance/engines/test_monetary_engine.py::TestMonetaryEngine::test_rate_multiplier PASSED [ 18%]
tests/modules/finance/test_exchange_engine.py::TestCurrencyExchangeEngine::test_convert PASSED [ 18%]
tests/modules/finance/test_exchange_engine.py::TestCurrencyExchangeEngine::test_load_parity PASSED [ 19%]
tests/modules/finance/test_exchange_engine.py::TestCurrencyExchangeEngine::test_missing_config PASSED [ 19%]
tests/modules/governance/test_system_command_processor.py::test_set_corporate_tax_rate 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
INFO     modules.governance.processor:processor.py:66 SYSTEM_COMMAND | Corporate Tax Rate: 0.2 -> 0.25
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_set_income_tax_rate 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
INFO     modules.governance.processor:processor.py:75 SYSTEM_COMMAND | Income Tax Rate: 0.1 -> 0.15
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_set_base_interest_rate 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_INTEREST_RATE
INFO     modules.governance.processor:processor.py:98 SYSTEM_COMMAND | CB Base Rate: 0.05 -> 0.03
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_ignore_unknown_tax_type 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
WARNING  modules.governance.processor:processor.py:78 SYSTEM_COMMAND | Unknown tax type: invalid
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_missing_government 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
ERROR    modules.governance.processor:processor.py:46 SYSTEM_COMMAND | Government agent is None.
PASSED                                                                   [ 20%]
tests/modules/government/engines/test_fiscal_engine.py::TestFiscalEngine::test_decide_expansionary PASSED [ 20%]
tests/modules/government/engines/test_fiscal_engine.py::TestFiscalEngine::test_decide_contractionary PASSED [ 20%]
tests/modules/government/engines/test_fiscal_engine.py::TestFiscalEngine::test_evaluate_bailout_solvent PASSED [ 20%]
tests/modules/government/engines/test_fiscal_engine.py::TestFiscalEngine::test_evaluate_bailout_insolvent PASSED [ 20%]
tests/modules/government/test_government_integration.py::test_execute_social_policy_integration 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 10000})
PASSED                                                                   [ 20%]
tests/modules/government/test_government_integration.py::test_execute_social_policy_tax_and_welfare 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 10000})
FAILED                                                                   [ 20%]
tests/modules/government/test_government_integration.py::test_make_policy_decision_integration 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 10000})
PASSED                                                                   [ 21%]
tests/modules/government/test_tax_service.py::test_collect_wealth_tax FAILED [ 21%]
tests/modules/government/test_tax_service.py::test_collect_wealth_tax_below_threshold PASSED [ 21%]
tests/modules/government/test_welfare_manager.py::test_run_welfare_check_unemployment PASSED [ 21%]
tests/modules/government/test_welfare_manager.py::test_run_welfare_check_stimulus 
-------------------------------- live log call --------------------------------
WARNING  modules.government.welfare.manager:manager.py:111 STIMULUS_TRIGGERED | GDP Drop Detected. Requests generated.
PASSED                                                                   [ 21%]
tests/modules/government/test_welfare_manager.py::test_provide_firm_bailout PASSED [ 21%]
tests/modules/government/test_welfare_manager.py::test_run_welfare_check_with_firm PASSED [ 22%]
tests/modules/household/engines/test_budget.py::test_allocate_budget_creates_orders_for_needs FAILED [ 22%]
tests/modules/household/engines/test_consumption.py::test_generate_orders_uses_budget_orders PASSED [ 22%]
tests/modules/household/test_political_component.py::test_initialize_state_growth_oriented PASSED [ 22%]
tests/modules/household/test_political_component.py::test_initialize_state_conservative PASSED [ 22%]
tests/modules/household/test_political_component.py::test_update_opinion_match PASSED [ 22%]
tests/modules/household/test_political_component.py::test_update_opinion_mismatch_and_discontent PASSED [ 23%]
tests/modules/household/test_political_component.py::test_trust_damper PASSED [ 23%]
tests/modules/household/test_political_integration.py::test_household_update_political_opinion_integration FAILED [ 23%]
tests/orchestration/test_state_synchronization.py::TestStateSynchronization::test_transient_queue_accumulation PASSED [ 23%]
tests/orchestration/test_state_synchronization.py::TestStateSynchronization::test_reassignment_guardrail PASSED [ 23%]
tests/scenarios/test_leviathan_emergence.py::TestLeviathanEmergence::test_scapegoat_emergence 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
WARNING  simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:89 Failed to load adaptive policy bounds from config: not enough values to unpack (expected 2, got 0). Using defaults.
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 30 (Duration: 20)
INFO     simulation.agents.government:government.py:433 ADVISOR_FIRED | Fired KEYNESIAN advisor. Locked tags: ['KEYNESIAN_FISCAL'] for 20 ticks.
INFO     simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:117 POLICY_EXECUTE | Fire Advisor (Scapegoat) (U=0.1840)
PASSED                                                                   [ 23%]
tests/scenarios/test_leviathan_emergence.py::TestLeviathanEmergence::test_paradox_support_emergence PASSED [ 23%]
tests/scenarios/test_leviathan_emergence.py::TestLeviathanEmergence::test_political_business_cycle_emergence 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
WARNING  simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:89 Failed to load adaptive policy bounds from config: not enough values to unpack (expected 2, got 0). Using defaults.
INFO     simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:117 POLICY_EXECUTE | Tax Cut (Corp) (U=0.4875)
PASSED                                                                   [ 24%]
tests/simulation/components/engines/test_asset_management_engine.py::test_invest_automation_success PASSED [ 24%]
tests/simulation/components/engines/test_asset_management_engine.py::test_invest_automation_max_cap PASSED [ 24%]
tests/simulation/components/engines/test_asset_management_engine.py::test_invest_capex_success PASSED [ 24%]
tests/simulation/components/engines/test_asset_management_engine.py::test_invest_negative_amount PASSED [ 24%]
tests/simulation/components/engines/test_asset_management_engine.py::test_invest_unknown_type PASSED [ 24%]
tests/simulation/components/engines/test_production_engine.py::test_produce_success PASSED [ 25%]
tests/simulation/components/engines/test_production_engine.py::test_produce_input_constraint PASSED [ 25%]
tests/simulation/components/engines/test_production_engine.py::test_produce_no_employees PASSED [ 25%]
tests/simulation/components/engines/test_rd_engine.py::test_research_success PASSED [ 25%]
tests/simulation/components/engines/test_rd_engine.py::test_research_failure PASSED [ 25%]
tests/simulation/components/engines/test_rd_engine.py::test_research_negative_amount PASSED [ 25%]
tests/simulation/factories/test_agent_factory.py::test_create_household PASSED [ 25%]
tests/simulation/factories/test_agent_factory.py::test_create_newborn PASSED [ 26%]
tests/simulation/test_firm_refactor.py::test_firm_initialization_states PASSED [ 26%]
tests/simulation/test_firm_refactor.py::test_command_bus_internal_orders_delegation FAILED [ 26%]
tests/simulation/test_firm_refactor.py::test_produce_orchestration PASSED [ 26%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_birth_gift_rounding 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.demographic_manager:demographic_manager.py:44 DemographicManager initialized.
FAILED                                                                   [ 26%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_inheritance_dust_sweep PASSED [ 26%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_public_manager_tax_atomicity PASSED [ 27%]
tests/system/test_engine.py::TestSimulation::test_simulation_initialization ERROR [ 27%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_basic ERROR [ 27%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_no_goods_market ERROR [ 27%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_with_best_ask ERROR [ 27%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_goods_trade ERROR [ 27%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_labor_trade ERROR [ 27%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_research_labor_trade ERROR [ 28%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_invalid_agents ERROR [ 28%]
tests/system/test_engine.py::test_handle_agent_lifecycle_removes_inactive_agents ERROR [ 28%]
tests/system/test_phase29_depression.py::TestPhase29Depression::test_crisis_monitor_logging 
-------------------------------- live log call --------------------------------
INFO     TestPhase29:initializer.py:134 Acquired exclusive lock on simulation.lock
INFO     simulation.agents.central_bank:central_bank.py:53 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:269 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:69 Bank 10 initialized (Stateless Proxy).
INFO     simulation.agents.government:government.py:155 Government 11 initialized with assets: defaultdict(<class 'int'>, {'USD': 0})
INFO     Market_food:order_book_market.py:97 OrderBookMarket food initialized.
INFO     Market_electronics:order_book_market.py:97 OrderBookMarket electronics initialized.
INFO     Market_labor:order_book_market.py:97 OrderBookMarket labor initialized.
INFO     Market_security_market:order_book_market.py:97 OrderBookMarket security_market initialized.
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 10
INFO     Market_housing:order_book_market.py:97 OrderBookMarket housing initialized.
INFO     TestPhase29:initializer.py:388 GENESIS | Starting initial wealth distribution...
INFO     TestPhase29:initializer.py:399 GENESIS | Distributed wealth to 1 agents.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 40.0 units to Firm 100
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 100 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 101
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 40.0 units to Firm 102
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 103
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 103 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 40.0 units to Firm 104
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 104 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     TestPhase29:initializer.py:414 Initial baseline money supply established: 0.00
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 5 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 5
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
INFO     TestPhase29:initializer.py:583 Simulation run started with run_id: test_run
INFO     TestPhase29:initializer.py:591 Simulation fully initialized with run_id: test_run
FAILED                                                                   [ 28%]
tests/system/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers 
-------------------------------- live log call --------------------------------
INFO     TestPhase29:initializer.py:134 Acquired exclusive lock on simulation.lock
INFO     simulation.agents.central_bank:central_bank.py:53 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:269 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:69 Bank 10 initialized (Stateless Proxy).
INFO     simulation.agents.government:government.py:155 Government 11 initialized with assets: defaultdict(<class 'int'>, {'USD': 0})
INFO     Market_food:order_book_market.py:97 OrderBookMarket food initialized.
INFO     Market_electronics:order_book_market.py:97 OrderBookMarket electronics initialized.
INFO     Market_labor:order_book_market.py:97 OrderBookMarket labor initialized.
INFO     Market_security_market:order_book_market.py:97 OrderBookMarket security_market initialized.
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 10
INFO     Market_housing:order_book_market.py:97 OrderBookMarket housing initialized.
INFO     TestPhase29:initializer.py:388 GENESIS | Starting initial wealth distribution...
INFO     TestPhase29:initializer.py:399 GENESIS | Distributed wealth to 1 agents.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 40.0 units to Firm 100
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 100 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 101
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 40.0 units to Firm 102
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 103
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 103 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 40.0 units to Firm 104
CRITICAL TestPhase29:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: BOOTSTRAP_INJECTION
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 95000.00 capital to Firm 104 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     TestPhase29:initializer.py:414 Initial baseline money supply established: 0.00
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 5 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 5
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
INFO     TestPhase29:initializer.py:583 Simulation run started with run_id: test_run
INFO     TestPhase29:initializer.py:591 Simulation fully initialized with run_id: test_run
FAILED                                                                   [ 28%]
tests/test_ledger_manager.py::test_parse_ledger_standard PASSED          [ 28%]
tests/test_ledger_manager.py::test_archive_resolved_items PASSED         [ 29%]
tests/test_ledger_manager.py::test_register_new_item PASSED              [ 29%]
tests/test_ledger_manager.py::test_sync_with_codebase PASSED             [ 29%]
tests/test_ledger_manager.py::test_parser_resilience PASSED              [ 29%]
tests/test_ledger_manager.py::test_archive_atomicity_failure PASSED      [ 29%]
tests/test_ledger_manager.py::test_get_next_id PASSED                    [ 29%]
tests/test_policy_lockout.py::TestPolicyLockout::test_government_fire_advisor 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 520 (Duration: 20)
INFO     simulation.agents.government:government.py:433 ADVISOR_FIRED | Fired KEYNESIAN advisor. Locked tags: ['KEYNESIAN_FISCAL'] for 20 ticks.
PASSED                                                                   [ 30%]
tests/test_policy_lockout.py::TestPolicyLockout::test_manager_lockout 
-------------------------------- live log call --------------------------------
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 120 (Duration: 20)
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 130 (Duration: 30)
PASSED                                                                   [ 30%]
tests/test_wo_4_1_protocols.py::test_housing_handler_with_protocol_agent PASSED [ 30%]
tests/test_wo_4_1_protocols.py::test_protocol_compliance PASSED          [ 30%]
tests/test_ws.py::test_websocket_endpoint 
-------------------------------- live log call --------------------------------
INFO     server:server.py:57 Initializing simulation...
INFO     server:server.py:68 Simulation initialized and running. Server is ready.
INFO     server:server.py:37 Starting simulation loop...
INFO     simulation.orchestration.persistence_bridge:persistence_bridge.py:46 âœ… [Persistence] Saved local snapshot: snapshot_tick_00001_20260211_142539.json
INFO     server:server.py:77 Shutting down simulation...
PASSED                                                                   [ 30%]
tests/unit/agents/test_government.py::test_calculate_income_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
PASSED                                                                   [ 30%]
tests/unit/agents/test_government.py::test_calculate_corporate_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
PASSED                                                                   [ 30%]
tests/unit/agents/test_government.py::test_collect_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
PASSED                                                                   [ 31%]
tests/unit/agents/test_government.py::test_run_public_education_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 100000})
PASSED                                                                   [ 31%]
tests/unit/agents/test_government.py::test_deficit_spending_allowed_within_limit 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
FAILED                                                                   [ 31%]
tests/unit/agents/test_government.py::test_deficit_spending_blocked_beyond_limit 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:155 Government 1 initialized with assets: defaultdict(<class 'int'>, {'USD': 1000})
-------------------------------- live log call --------------------------------
WARNING  simulation.agents.government:government.py:458 WELFARE_FAILED | Insufficient funds even after bond issuance attempt. Needed: 500, Has: 100.0
PASSED                                                                   [ 31%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_execution_order PASSED [ 31%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_unemployed PASSED [ 31%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_add_child PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_age_one_tick PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_create_offspring_demographics PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_get_generational_similarity PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_above_threshold PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_under_threshold PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_initialization PASSED [ 32%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_set_spouse PASSED [ 33%]
tests/unit/components/test_engines.py::TestHREngine::test_create_fire_transaction 
-------------------------------- live log call --------------------------------
WARNING  simulation.components.engines.hr_engine:hr_engine.py:230 INTERNAL_EXEC | Firm 1 cannot afford severance to fire 101.
PASSED                                                                   [ 33%]
tests/unit/components/test_engines.py::TestHREngine::test_process_payroll PASSED [ 33%]
tests/unit/components/test_engines.py::TestSalesEngine::test_post_ask PASSED [ 33%]
tests/unit/components/test_engines.py::TestSalesEngine::test_generate_marketing_transaction FAILED [ 33%]
tests/unit/components/test_market_component.py::test_choose_best_seller_utility PASSED [ 33%]
tests/unit/components/test_market_component.py::test_choose_best_seller_no_market PASSED [ 34%]
tests/unit/corporate/test_corporate_orchestrator.py::test_orchestration PASSED [ 34%]
tests/unit/corporate/test_financial_strategy.py::test_dividend_logic PASSED [ 34%]
tests/unit/corporate/test_financial_strategy.py::test_debt_logic_borrow PASSED [ 34%]
tests/unit/corporate/test_hr_strategy.py::test_hiring_logic PASSED       [ 34%]
tests/unit/corporate/test_production_strategy.py::test_rd_logic PASSED   [ 34%]
tests/unit/corporate/test_production_strategy.py::test_automation_investment PASSED [ 34%]
tests/unit/corporate/test_sales_manager.py::test_pricing_logic PASSED    [ 35%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_triggered PASSED [ 35%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_insufficient_funds PASSED [ 35%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_cost_plus_fallback PASSED [ 35%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_fire_sale_trigger PASSED [ 35%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_rd_investment 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
PASSED                                                                   [ 35%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_capex_investment 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
PASSED                                                                   [ 36%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_dividend_setting 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 36%]
tests/unit/decisions/test_household_engine_refactor.py::test_engine_execution_parity_smoke PASSED [ 36%]
tests/unit/decisions/test_household_integration_new.py::TestHouseholdIntegrationNew::test_make_decision_integration SKIPPED [ 36%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_hires_labor 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 36%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_does_not_hire_when_full 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 36%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_fires_excess_labor 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 37%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_initialization PASSED [ 37%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_overstock_reduces_target 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 37%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_understock_increases_target 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 37%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_target_within_bounds_no_change 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 37%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_target_min_max_bounds 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 37%]
tests/unit/decisions/test_sales_rules.py::TestSalesRules::test_sales_aggressiveness_impact_on_price 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 37%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_clear_market_matching PASSED [ 38%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_settle_matured_loans PASSED [ 38%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_offer_insufficient_reserves PASSED [ 38%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_offer_success PASSED [ 38%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_request PASSED [ 38%]
tests/unit/finance/engines/test_finance_engines.py::test_loan_risk_engine_assess_approved PASSED [ 38%]
tests/unit/finance/engines/test_finance_engines.py::test_loan_risk_engine_assess_denied PASSED [ 39%]
tests/unit/finance/engines/test_finance_engines.py::test_loan_booking_engine_grant_loan PASSED [ 39%]
tests/unit/finance/engines/test_finance_engines.py::test_liquidation_engine_liquidate PASSED [ 39%]
tests/unit/finance/engines/test_finance_engines.py::test_debt_servicing_engine PASSED [ 39%]
tests/unit/finance/engines/test_finance_engines.py::test_zero_sum_verifier 
-------------------------------- live log call --------------------------------
ERROR    modules.finance.utils.zero_sum_verifier:zero_sum_verifier.py:29 INTEGRITY_FAIL | Bank BANK1 has negative reserves: -100 USD
ERROR    modules.finance.utils.zero_sum_verifier:zero_sum_verifier.py:59 INTEGRITY_FAIL | Bank BANK1 Balance Sheet Mismatch. Assets: -100, Liab: 0, Equity: 1000000. Discrepancy: -1000100
ERROR    modules.finance.utils.zero_sum_verifier:zero_sum_verifier.py:35 INTEGRITY_FAIL | Loan L1 remaining (110000) > principal (100000)
ERROR    modules.finance.utils.zero_sum_verifier:zero_sum_verifier.py:59 INTEGRITY_FAIL | Bank BANK1 Balance Sheet Mismatch. Assets: 1110000, Liab: 0, Equity: 1000000. Discrepancy: 110000
PASSED                                                                   [ 39%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_bank_methods_presence 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 39%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_grant_loan 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
-------------------------------- live log call --------------------------------
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
FAILED                                                                   [ 39%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_repay_loan 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
-------------------------------- live log call --------------------------------
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
FAILED                                                                   [ 40%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_balance 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
FAILED                                                                   [ 40%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_debt_status 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
-------------------------------- live log call --------------------------------
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
FAILED                                                                   [ 40%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_interface_compliance_mypy PASSED [ 40%]
tests/unit/finance/test_credit_scoring.py::test_assess_approved PASSED   [ 40%]
tests/unit/finance/test_credit_scoring.py::test_assess_dti_fail PASSED   [ 40%]
tests/unit/finance/test_credit_scoring.py::test_assess_ltv_fail PASSED   [ 41%]
tests/unit/finance/test_credit_scoring.py::test_assess_unsecured_cap_fail PASSED [ 41%]
tests/unit/finance/test_credit_scoring.py::test_zero_income_fail PASSED  [ 41%]
tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_success 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:303 BAILOUT_DENIED | Government insufficient funds: 0 < 5000.0
FAILED                                                                   [ 41%]
tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_insufficient_funds 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:303 BAILOUT_DENIED | Government insufficient funds: 0 < 5000.0
PASSED                                                                   [ 41%]
tests/unit/finance/test_finance_system_refactor.py::test_grant_bailout_loan_deprecated FAILED [ 41%]
tests/unit/finance/test_utils.py::test_round_to_pennies_basic PASSED     [ 41%]
tests/unit/finance/test_utils.py::test_round_to_pennies_decimal PASSED   [ 42%]
tests/unit/finance/test_utils.py::test_round_to_pennies_int PASSED       [ 42%]
tests/unit/finance/test_utils.py::test_round_to_pennies_large PASSED     [ 42%]
tests/unit/finance/test_utils.py::test_round_to_pennies_negative PASSED  [ 42%]
tests/unit/governance/test_judicial_system.py::test_judicial_system_waterfall_full_recovery 
-------------------------------- live log call --------------------------------
INFO     modules.governance.judicial.system:system.py:65 JudicialSystem: Credit frozen for Agent 1 until tick 110.
INFO     modules.governance.judicial.system:system.py:72 JudicialSystem: Applied XP penalty to Agent 1.
PASSED                                                                   [ 42%]
tests/unit/governance/test_judicial_system.py::test_judicial_system_waterfall_partial_recovery_and_restructuring 
-------------------------------- live log call --------------------------------
INFO     modules.governance.judicial.system:system.py:65 JudicialSystem: Credit frozen for Agent 1 until tick 110.
INFO     modules.governance.judicial.system:system.py:72 JudicialSystem: Applied XP penalty to Agent 1.
INFO     modules.governance.judicial.system:system.py:157 JudicialSystem: Transferred 10 shares of Firm 99 from 1 to 2.
WARNING  modules.governance.judicial.system:system.py:187 JudicialSystem: Debt Restructuring Required for Agent 1. Remaining Debt: 850.0
PASSED                                                                   [ 42%]
tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_snapshot_copies_state ERROR [ 43%]
tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_nested_structures ERROR [ 43%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sparse_history_returns_infinite_bounds PASSED [ 43%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sufficient_history_returns_finite_bounds PASSED [ 43%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_no_history_returns_infinite_bounds PASSED [ 43%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_default_config_fallback PASSED [ 43%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_success PASSED [ 44%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_insufficient_down_payment PASSED [ 44%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_loan_rejected PASSED [ 44%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_disbursement_failed PASSED [ 44%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_initialization PASSED [ 44%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_grants_loan 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
INFO     simulation.loan_market:loan_market.py:302 Loan granted to 1 for 100.00. Loan ID: loan_id_123
PASSED                                                                   [ 44%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_with_profile 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
INFO     simulation.loan_market:loan_market.py:302 Loan granted to 1 for 100.00. Loan ID: loan_id_123
PASSED                                                                   [ 44%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_denies_loan 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
WARNING  simulation.loan_market:loan_market.py:307 Loan denied for 1 for 100.00.
PASSED                                                                   [ 45%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_repayment_processes_repayment 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=REPAYMENT, Item=loan_id_456, Agent=1, Amount=50
INFO     simulation.loan_market:loan_market.py:331 Repayment of 50.00 processed for loan loan_id_456 by 1.
PASSED                                                                   [ 45%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_order_unknown_type_logs_warning 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=UNKNOWN_TYPE, Item=item, Agent=1, Amount=10
WARNING  simulation.loan_market:loan_market.py:393 Unknown order type: UNKNOWN_TYPE
PASSED                                                                   [ 45%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_success PASSED [ 45%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_ltv 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:89 LOAN_DENIED | LTV 0.90 > 0.8
PASSED                                                                   [ 45%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_dti 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:122 LOAN_DENIED | DTI 0.54 > 0.43
PASSED                                                                   [ 45%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_dti_with_existing_debt 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:122 LOAN_DENIED | DTI 0.47 > 0.43
PASSED                                                                   [ 46%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_stage_mortgage_success PASSED [ 46%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_stage_mortgage_fail_eval 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:89 LOAN_DENIED | LTV 0.90 > 0.8
PASSED                                                                   [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_initialization PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_buy_order_adds_and_sorts PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_sell_order_adds_and_sorts PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_order_unknown_type_logs_warning PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_full_fill PASSED [ 47%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_buy_order PASSED [ 47%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_sell_order PASSED [ 47%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_no_match_price PASSED [ 47%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_multiple_matches PASSED [ 47%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_different_items PASSED [ 47%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_empty_books PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_goods PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_labor PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_empty PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_non_empty PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_empty PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_non_empty PASSED [ 48%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_empty PASSED [ 49%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_non_empty PASSED [ 49%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_calculation_normal PASSED [ 49%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_calculation_zero_income PASSED [ 49%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_alarm PASSED [ 49%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_csv_logging_structure PASSED [ 49%]
tests/unit/modules/common/config/test_impl.py::test_config_manager_load_and_get PASSED [ 50%]
tests/unit/modules/common/config/test_impl.py::test_config_manager_override 
-------------------------------- live log call --------------------------------
INFO     modules.common.config.impl:impl.py:63 Registered new domain: test_domain
PASSED                                                                   [ 50%]
tests/unit/modules/common/config/test_impl.py::test_legacy_support PASSED [ 50%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_load_yaml PASSED [ 50%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_get_with_default PASSED [ 50%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_hybrid_fallback PASSED [ 50%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_set_value_for_test PASSED [ 51%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_set_policy_rate_valid PASSED [ 51%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_set_policy_rate_invalid PASSED [ 51%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_purchase_success PASSED [ 51%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_sale_success PASSED [ 51%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_failure PASSED [ 51%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_safe_zone PASSED [ 51%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_distress_zone PASSED [ 52%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_zero_assets PASSED [ 52%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_negative_values PASSED [ 52%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_bailout_loan_generates_command 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:303 BAILOUT_DENIED | Government insufficient funds: 0 < 500
FAILED                                                                   [ 52%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_market_bond_issuance_generates_transaction FAILED [ 52%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_qe_bond_issuance_generates_transaction FAILED [ 52%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_issue_treasury_bonds_calls_settlement_system FAILED [ 53%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_collect_corporate_tax_calls_settlement_system 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:295 FinanceSystem.collect_corporate_tax called. Should be using Transaction Generation.
PASSED                                                                   [ 53%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_risk_premium_calculation FAILED [ 53%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_insufficient_funds_fails_issuance FAILED [ 53%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_pass PASSED [ 53%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_fail PASSED [ 53%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_pass PASSED [ 53%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_fail PASSED [ 54%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_market PASSED [ 54%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_qe PASSED [ 54%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_fail PASSED [ 54%]
tests/unit/modules/finance/test_system.py::test_bailout_fails_with_insufficient_government_funds 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:303 BAILOUT_DENIED | Government insufficient funds: 10000 < 50000
PASSED                                                                   [ 54%]
tests/unit/modules/finance/test_system.py::test_grant_bailout_loan PASSED [ 54%]
tests/unit/modules/finance/test_system.py::test_service_debt_central_bank_repayment PASSED [ 55%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_calculates_survival_cost_correctly PASSED [ 55%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_defaults_if_no_config PASSED [ 55%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_progressive PASSED [ 55%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_zero_or_negative PASSED [ 55%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_equilibrium PASSED [ 55%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_gdp_zero_or_negative PASSED [ 55%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_high_inflation PASSED [ 56%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_missing_data_defaults PASSED [ 56%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_overheating_economy PASSED [ 56%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_recession PASSED [ 56%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_propose_actions_red_party PASSED [ 56%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_propose_actions_blue_party PASSED [ 56%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_candidates_generation PASSED [ 57%]
tests/unit/modules/government/test_politics_system.py::test_enact_new_tax_policy PASSED [ 57%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_basic ERROR [ 57%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_service ERROR [ 57%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_decide_and_consume ERROR [ 57%]
tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_orchestrate_housing_buy ERROR [ 57%]
tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_shadow_wage_update ERROR [ 58%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_basic ERROR [ 58%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_hyperinflation ERROR [ 58%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_add_and_query_record PASSED [ 58%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_query_filtering PASSED [ 58%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_persistence PASSED [ 58%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_process_bankruptcy_event 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:79 Processing bankruptcy for Agent 1 at tick 10. Recovering inventory.
INFO     PublicManager:public_manager.py:87 Recovered 10.0 of apple.
INFO     PublicManager:public_manager.py:87 Recovered 5.0 of banana.
PASSED                                                                   [ 58%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders 
-------------------------------- live log call --------------------------------
INFO     PublicManager:public_manager.py:159 Generated liquidation order for 50.0 of apple at 9.0.
PASSED                                                                   [ 59%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_confirm_sale PASSED [ 59%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_deposit_revenue PASSED [ 59%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_no_signal PASSED [ 59%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_resets_metrics PASSED [ 59%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_financial_entity PASSED [ 59%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_asset_recovery_system PASSED [ 60%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_bankruptcy_processing_id_handling 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:79 Processing bankruptcy for Agent 99 at tick 1. Recovering inventory.
INFO     PublicManager:public_manager.py:87 Recovered 10.0 of gold.
PASSED                                                                   [ 60%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_liquidation_order_generation_id 
-------------------------------- live log call --------------------------------
INFO     PublicManager:public_manager.py:159 Generated liquidation order for 1.0 of gold at 95.0.
PASSED                                                                   [ 60%]
tests/unit/orchestration/test_command_service.py::test_command_service_initialization PASSED [ 60%]
tests/unit/orchestration/test_command_service.py::test_validate_set_base_rate_valid PASSED [ 60%]
tests/unit/orchestration/test_command_service.py::test_validate_set_base_rate_invalid_type 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:29 Invalid rate type for SET_BASE_RATE: <class 'str'>
PASSED                                                                   [ 60%]
tests/unit/orchestration/test_command_service.py::test_validate_set_base_rate_out_of_bounds 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:32 Rate out of bounds for SET_BASE_RATE: 0.25 (Expected 0.0-0.2)
PASSED                                                                   [ 60%]
tests/unit/orchestration/test_command_service.py::test_validate_set_tax_rate_valid PASSED [ 61%]
tests/unit/orchestration/test_command_service.py::test_validate_set_tax_rate_invalid_type 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:41 Invalid tax_type for SET_TAX_RATE: luxury
PASSED                                                                   [ 61%]
tests/unit/orchestration/test_command_service.py::test_validate_pause_resume_step PASSED [ 61%]
tests/unit/orchestration/test_command_service.py::test_enqueue_valid_command 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: PAUSE | Payload: {}
PASSED                                                                   [ 61%]
tests/unit/orchestration/test_command_service.py::test_enqueue_invalid_command 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:32 Rate out of bounds for SET_BASE_RATE: 1.5 (Expected 0.0-0.2)
WARNING  simulation.orchestration.command_service:command_service.py:73 Command rejected due to validation failure: CockpitCommand(type='SET_BASE_RATE', payload={'rate': 1.5})
PASSED                                                                   [ 61%]
tests/unit/orchestration/test_command_service.py::test_pop_commands 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: PAUSE | Payload: {}
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: RESUME | Payload: {}
PASSED                                                                   [ 61%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_execution PASSED [ 62%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_execution_fallback PASSED [ 62%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_no_settlement_system PASSED [ 62%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_system_no_method PASSED [ 62%]
tests/unit/sagas/test_orchestrator.py::test_submit_saga 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga test-saga-uuid submitted.
PASSED                                                                   [ 62%]
tests/unit/sagas/test_orchestrator.py::test_process_sagas_liveness_check 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga test-saga-uuid submitted.
WARNING  modules.finance.sagas.orchestrator:orchestrator.py:77 SAGA_CANCELLED | Saga test-saga-uuid cancelled due to inactive participant. Buyer Active: False, Seller Active: True
PASSED                                                                   [ 62%]
tests/unit/sagas/test_orchestrator.py::test_process_sagas_active_participants 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga test-saga-uuid-2 submitted.
PASSED                                                                   [ 62%]
tests/unit/sagas/test_orchestrator.py::test_find_and_compensate_by_agent_success 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-compensation-test submitted.
WARNING  modules.finance.sagas.orchestrator:orchestrator.py:143 SAGA_AGENT_DEATH | Triggering compensation for Saga saga-compensation-test due to agent 999 death.
PASSED                                                                   [ 63%]
tests/unit/sagas/test_orchestrator.py::test_find_and_compensate_by_agent_no_handler 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-no-handler submitted.
ERROR    modules.finance.sagas.orchestrator:orchestrator.py:138 SAGA_COMPENSATE_FAIL | No handler provided for find_and_compensate_by_agent
PASSED                                                                   [ 63%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_disbursement_failure PASSED [ 63%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_government_seller PASSED [ 63%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_payment_failure PASSED [ 63%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_purchase_success PASSED [ 63%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_fallback_price 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 80.00.
PASSED                                                                   [ 64%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_no_inventory PASSED [ 64%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_no_public_manager PASSED [ 64%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_payment_fail 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.liquidation_handlers:liquidation_handlers.py:95 LIQUIDATION_ASSET_SALE_FAIL | PublicManager failed to pay 40.00 to Agent 1.
PASSED                                                                   [ 64%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_with_inventory 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 40.00.
PASSED                                                                   [ 64%]
tests/unit/systems/test_commerce_system.py::test_execute_consumption_and_leisure PASSED [ 64%]
tests/unit/systems/test_commerce_system.py::test_fast_track_consumption_if_needed PASSED [ 65%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_and_insolvent PASSED [ 65%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_but_solvent PASSED [ 65%]
tests/unit/systems/test_demographic_manager_newborn.py::test_newborn_receives_initial_needs_from_config 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.demographic_manager:demographic_manager.py:44 DemographicManager initialized.
PASSED                                                                   [ 65%]
tests/unit/systems/test_event_system.py::test_inflation_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'hyperinflation' at Tick 200!
INFO     simulation.systems.event_system:event_system.py:63   -> Injected 50% cash into all households.
PASSED                                                                   [ 65%]
tests/unit/systems/test_event_system.py::test_recession_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'deflation' at Tick 600!
INFO     simulation.systems.event_system:event_system.py:87   -> Reduced all agent assets by 50%.
PASSED                                                                   [ 65%]
tests/unit/systems/test_event_system.py::test_no_event PASSED            [ 65%]
tests/unit/systems/test_firm_management_leak.py::TestFirmManagementLeak::test_spawn_firm_leak_detection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.firm_management:firm_management.py:174 STARTUP | Household 1 founded Firm 1 (Specialization: steel, Capital: 1500.0)
PASSED                                                                   [ 66%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_missing_settlement_system PASSED [ 66%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_transfer_failure 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.firm_management:firm_management.py:151 STARTUP_FATAL | Founder household has NULL ID! Aborting.
PASSED                                                                   [ 66%]
tests/unit/systems/test_housing_service.py::test_housing_service_handle_housing_updates_mortgage 
-------------------------------- live log call --------------------------------
INFO     modules.housing.service:service.py:204 HOUSING_REGISTRY | Unit 101 transferred from 2 to 1
PASSED                                                                   [ 66%]
tests/unit/systems/test_housing_service.py::test_housing_service_handle_housing_clears_mortgage_if_missing 
-------------------------------- live log call --------------------------------
INFO     modules.housing.service:service.py:204 HOUSING_REGISTRY | Unit 101 transferred from 2 to 1
PASSED                                                                   [ 66%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_maintenance_uses_transfer PASSED [ 66%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_rent_collection_uses_transfer PASSED [ 67%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_distribution_transaction_generation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 10000.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_multiple_heirs_metadata 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 100.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_escheatment_when_no_heirs 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 1000.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_zero_assets_distribution 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 0.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_tax_transaction_generation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 1000.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_labor_market_analyzer.py::test_update_market_history PASSED [ 67%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_increase PASSED [ 68%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_decay PASSED [ 68%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_floor PASSED [ 68%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_asset_liquidation_integration 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 40.00.
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 0.00
PASSED                                                                   [ 68%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_bank_claim_handling 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 500.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 2 fully paid. Remaining cash: 500.00
PASSED                                                                   [ 68%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_initiate_liquidation_orchestration 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 150.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 1 fully paid. Remaining cash: 900.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 3 fully paid. Remaining cash: 850.00
PASSED                                                                   [ 68%]
tests/unit/systems/test_ma_manager.py::TestMAManager::test_execute_bankruptcy_records_loss_in_ledger 
-------------------------------- live log call --------------------------------
INFO     MAManager:ma_manager.py:243 BANKRUPTCY | Firm 999 liquidated. Cash Remaining: 1,000.00.
PASSED                                                                   [ 69%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_budget_constraints PASSED [ 69%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_legacy PASSED [ 69%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_settlement PASSED [ 69%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_scholarship_settlement 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.ministry_of_education:ministry_of_education.py:122 EDU_SCHOLARSHIP_PENDING | Household 101 nominated for Level 2.
PASSED                                                                   [ 69%]
tests/unit/systems/test_sensory_system.py::test_sensory_dto_generation PASSED [ 69%]
tests/unit/systems/test_sensory_system.py::test_sensory_dto_missing_tracker PASSED [ 69%]
tests/unit/systems/test_settlement_saga_integration.py::TestSettlementSagaIntegration::test_process_sagas_integration_initiated_to_credit_check 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-integration-1 submitted.
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_saga_integration.py::TestSettlementSagaIntegration::test_process_sagas_integration_cancellation 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-integration-cancel submitted.
WARNING  modules.finance.sagas.orchestrator:orchestrator.py:77 SAGA_CANCELLED | Saga saga-integration-cancel cancelled due to inactive participant. Buyer Active: False, Seller Active: True
WARNING  modules.finance.saga_handler:saga_handler.py:70 SAGA_COMPENSATE | Rolling back saga saga-integration-cancel from CANCELLED
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_transfer_success 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: Test Transfer
FAILED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_transfer_insufficient_funds 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: Test Fail
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_minting 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:588 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>.
FAILED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_government_grant 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:588 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>.
FAILED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_burning 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:628 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>.
FAILED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_tax 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:628 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>.
FAILED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:275 LIQUIDATION: Agent 1 liquidated. Inventory: 100.0, Capital: 50.0, Recovered: 20.0. Net Destruction: 130.0. Total Destroyed: 130.0. Reason: Bankruptcy
INFO     simulation.systems.settlement_system:settlement_system.py:275 LIQUIDATION: Agent 1 liquidated. Inventory: 10.0, Capital: 0.0, Recovered: 0.0. Net Destruction: 10.0. Total Destroyed: 140.0. Reason: More Loss
PASSED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation_escheatment 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:275 LIQUIDATION: Agent 1 liquidated. Inventory: 10.0, Capital: 10.0, Recovered: 0.0. Net Destruction: 20.0. Total Destroyed: 20.0. Reason: Escheatment Test
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: liquidation_escheatment
FAILED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_transfer_rollback 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: Faulty Transfer
PASSED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_atomic_settlement_success 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:86 SETTLEMENT_CREATED | Escrow account created for Agent 101. Cash: 500.0. Portfolio items: 0. Heir: NONE (Escheatment)
CRITICAL simulation.systems.settlement_system:settlement_system.py:157 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'> in distribution plan.
CRITICAL simulation.systems.settlement_system:settlement_system.py:157 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'> in distribution plan.
FAILED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_atomic_settlement_leak_prevention 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:86 SETTLEMENT_CREATED | Escrow account created for Agent 102. Cash: 100.0. Portfolio items: 0. Heir: NONE (Escheatment)
CRITICAL simulation.systems.settlement_system:settlement_system.py:157 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'> in distribution plan.
FAILED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_atomic_settlement_overdraft_protection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:86 SETTLEMENT_CREATED | Escrow account created for Agent 103. Cash: 100.0. Portfolio items: 0. Heir: NONE (Escheatment)
CRITICAL simulation.systems.settlement_system:settlement_system.py:157 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'> in distribution plan.
PASSED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_transfer_seamless_success 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: Seamless
FAILED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_transfer_seamless_fail_bank 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: Seamless Fail
PASSED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_success 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: multiparty_seq_0
WARNING  simulation.systems.settlement_system:settlement_system.py:417 MULTIPARTY_FAIL | Transfer 0 failed (A -> B). Rolling back 0 previous transfers.
FAILED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_rollback 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.settlement_system:settlement_system.py:516 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'>. Memo: multiparty_seq_0
WARNING  simulation.systems.settlement_system:settlement_system.py:417 MULTIPARTY_FAIL | Transfer 0 failed (A -> B). Rolling back 0 previous transfers.
PASSED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_success 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:453 SETTLEMENT_TYPE_ERROR | Amount must be int in atomic batch. Memo: pay b
FAILED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:453 SETTLEMENT_TYPE_ERROR | Amount must be int in atomic batch. Memo: pay b
PASSED                                                                   [ 73%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_credit_fail_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:453 SETTLEMENT_TYPE_ERROR | Amount must be int in atomic batch. Memo: pay b
PASSED                                                                   [ 73%]
tests/unit/systems/test_settlement_system.py::test_inheritance_portfolio_transfer 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:86 SETTLEMENT_CREATED | Escrow account created for Agent 100. Cash: 0.0. Portfolio items: 1. Heir: 900
INFO     simulation.systems.settlement_system:settlement_system.py:142 PORTFOLIO_TRANSFER | Transferred portfolio to 900
CRITICAL simulation.systems.settlement_system:settlement_system.py:157 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'> in distribution plan.
PASSED                                                                   [ 73%]
tests/unit/systems/test_settlement_system.py::test_escheatment_portfolio_transfer 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:86 SETTLEMENT_CREATED | Escrow account created for Agent 100. Cash: 0.0. Portfolio items: 1. Heir: NONE (Escheatment)
INFO     simulation.systems.settlement_system:settlement_system.py:142 PORTFOLIO_TRANSFER | Transferred portfolio to GOVERNMENT
CRITICAL simulation.systems.settlement_system:settlement_system.py:157 SETTLEMENT_TYPE_ERROR | Amount must be int, got <class 'float'> in distribution plan.
PASSED                                                                   [ 73%]
tests/unit/systems/test_social_system.py::test_update_social_ranks PASSED [ 73%]
tests/unit/systems/test_social_system.py::test_calculate_reference_standard PASSED [ 73%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_corporate_tax PASSED [ 74%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_flat PASSED [ 74%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_scaling PASSED [ 74%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_with_brackets PASSED [ 74%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_collect_tax 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.tax_agency:tax_agency.py:140 TAX_COLLECTION_SUCCESS | Tick 1 | Collected 100.00 of income from 101
PASSED                                                                   [ 74%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_effective_diffusion_rate PASSED [ 74%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_unlock_mechanism PASSED [ 74%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_diffusion_over_time PASSED [ 75%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_productivity_multiplier PASSED [ 75%]
tests/unit/test_ai_driven_firm_engine.py::test_adjust_price_tactic 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:40 AIDrivenFirmDecisionEngine initialized with CorporateManager.
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
PASSED                                                                   [ 75%]
tests/unit/test_ai_training_manager.py::test_get_top_performing_agents 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 75%]
tests/unit/test_ai_training_manager.py::test_get_under_performing_agents 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 75%]
tests/unit/test_ai_training_manager.py::test_clone_and_mutate_q_table 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 75%]
tests/unit/test_ai_training_manager.py::test_clone_from_fittest_agent 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:53 Cloning from fittest agent 9 to new agent 0
PASSED                                                                   [ 76%]
tests/unit/test_ai_training_manager.py::test_run_imitation_learning_cycle 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:24 Running imitation learning cycle at tick 1000.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:36 Imitation Cycle: 1 Role Models, 5 Learners.
PASSED                                                                   [ 76%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_wealth_distribution PASSED [ 76%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_needs_distribution PASSED [ 76%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_sales_by_good PASSED [ 76%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_market_order_book PASSED [ 76%]
tests/unit/test_api_history.py::TestHistoryAPI::test_gdp_history_on_refresh PASSED [ 76%]
tests/unit/test_bank.py::test_bank_assets_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::test_bank_deposit_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::test_bank_withdraw_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::test_grant_loan_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::test_withdraw_for_customer 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::test_run_tick_delegates_to_service_debt 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
PASSED                                                                   [ 77%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_default_processing 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
FAILED                                                                   [ 78%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_grant_loan_delegation 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
FAILED                                                                   [ 78%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_run_tick_interest_collection 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:69 Bank 1 initialized (Stateless Proxy).
ERROR    simulation.bank:bank.py:152 Bank: FinanceSystem not set. Cannot grant loan.
FAILED                                                                   [ 78%]
tests/unit/test_config_parity.py::test_household_config_parity PASSED    [ 78%]
tests/unit/test_config_parity.py::test_firm_config_parity PASSED         [ 78%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_emergency ERROR [ 78%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered ERROR [ 79%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered_insufficient_funds ERROR [ 79%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_signal ERROR [ 79%]
tests/unit/test_diagnostics.py::test_get_total_system_money_diagnostics PASSED [ 79%]
tests/unit/test_factories.py::TestMarketSignalFactory::test_create_market_signals PASSED [ 79%]
tests/unit/test_factories.py::TestMarketSnapshotFactory::test_create_snapshot PASSED [ 79%]
tests/unit/test_factories.py::TestDecisionInputFactory::test_create_decision_input PASSED [ 79%]
tests/unit/test_firm_profit.py::test_firm_profit_history_update ERROR    [ 80%]
tests/unit/test_firm_profit.py::test_firm_revenue_expenses_reset ERROR   [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_no_liabilities FAILED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_liabilities FAILED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_treasury_shares FAILED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_negative_net_assets FAILED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_zero_shares PASSED [ 81%]
tests/unit/test_firms.py::TestFirmProduction::test_produce PASSED        [ 81%]
tests/unit/test_firms.py::TestFirmSales::test_post_ask PASSED            [ 81%]
tests/unit/test_firms.py::TestFirmSales::test_adjust_marketing_budget_increase FAILED [ 81%]
tests/unit/test_handlers_fix.py::TestHandlerFix::test_goods_handler_uses_record_consumption 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.handlers.goods_handler:goods_handler.py:108 GOODS_HANDLER_WARN | Seller <MagicMock name='mock.id' id='2711906639152'> does not implement IInventoryHandler
PASSED                                                                   [ 81%]
tests/unit/test_handlers_fix.py::TestHandlerFix::test_labor_handler_uses_add_labor_income PASSED [ 81%]
tests/unit/test_household_ai.py::test_ai_creates_purchase_order 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     simulation.ai.model_wrapper:model_wrapper.py:150 No existing model found for wealth_and_needs.
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 81%]
tests/unit/test_household_ai.py::test_ai_evaluates_consumption_options 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     simulation.ai.model_wrapper:model_wrapper.py:150 No existing model found for needs_and_social_status.
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_make_decisions_calls_ai ERROR [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_do_nothing ERROR [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_basic_food_sufficient_assets ERROR [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_luxury_food_insufficient_assets ERROR [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_evaluate_options_chooses_best_utility ERROR [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_aggressive ERROR [ 83%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_passive_no_offer ERROR [ 83%]
tests/unit/test_household_refactor.py::TestHouseholdRefactor::test_property_management FAILED [ 83%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_dti_guardrail PASSED [ 83%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_npv_buy_calculation PASSED [ 83%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_rational_choice_buy PASSED [ 83%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_solvent PASSED [ 83%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_insolvent_severance 
-------------------------------- live log call --------------------------------
INFO     simulation.components.engines.hr_engine:hr_engine.py:194 SEVERANCE | Firm 1 paying severance 10.00 to Household 101. Scheduled for firing.
PASSED                                                                   [ 84%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_zombie 
-------------------------------- live log call --------------------------------
WARNING  simulation.components.engines.hr_engine:hr_engine.py:156 ZOMBIE | Firm 1 cannot afford wage for Household 101. Recorded as unpaid wage.
PASSED                                                                   [ 84%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_context_immutability PASSED [ 84%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_multiple_agents PASSED [ 84%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_no_data PASSED [ 84%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_single_agent PASSED [ 84%]
tests/unit/test_ledger_manager.py::test_archive_resolved_items PASSED    [ 85%]
tests/unit/test_ledger_manager.py::test_register_new_item PASSED         [ 85%]
tests/unit/test_ledger_manager.py::test_sync_with_codebase PASSED        [ 85%]
tests/unit/test_ledger_manager.py::test_pipe_escaping_in_ledger PASSED   [ 85%]
tests/unit/test_logger.py::TestLogger::test_clear_logs PASSED            [ 85%]
tests/unit/test_logger.py::TestLogger::test_log_writing PASSED           [ 85%]
tests/unit/test_logger.py::TestLogger::test_singleton_instance PASSED    [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_pass_through PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_stock_order PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_dict_legacy_format PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_dict_canonical_format PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_invalid_input PASSED [ 86%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_decrease_on_low_efficiency SKIPPED [ 86%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_increase_on_high_efficiency SKIPPED [ 87%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation FAILED [ 87%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_first_tick_skip SKIPPED [ 87%]
tests/unit/test_markets_v2.py::TestOrderBookMarketInitialization::test_market_initialization PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_single_buy_order PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_buy_orders_sorted PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_sell_orders_sorted PASSED [ 88%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_orders_with_same_price PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_unfilled_order_no_match PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_full_match_one_to_one PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_partial_match_then_book PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_match_with_multiple_orders PASSED [ 88%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_empty PASSED [ 88%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_non_empty PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_empty PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_non_empty PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_last_traded_price PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread PASSED     [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread_no_bid_or_ask PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_market_depth PASSED [ 90%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_bond_repayment_split PASSED [ 90%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_bond_repayment_legacy_fallback PASSED [ 90%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_interest_is_not_destroyed PASSED [ 90%]
tests/unit/test_phase1_refactor.py::TestPhase1DecisionRefactor::test_execute_flow PASSED [ 90%]
tests/unit/test_phase1_refactor.py::TestPhase1DecisionRefactor::test_dispatch_logic PASSED [ 90%]
tests/unit/test_portfolio_macro.py::test_portfolio_optimization_under_stagflation PASSED [ 90%]
tests/unit/test_real_estate_lien.py::test_real_estate_unit_initialization PASSED [ 91%]
tests/unit/test_real_estate_lien.py::test_liens_management PASSED        [ 91%]
tests/unit/test_real_estate_lien.py::test_mortgage_id_backward_compatibility PASSED [ 91%]
tests/unit/test_repository.py::test_save_and_get_simulation_run PASSED   [ 91%]
tests/unit/test_repository.py::test_save_and_get_agent_state PASSED      [ 91%]
tests/unit/test_repository.py::test_save_and_get_transaction PASSED      [ 91%]
tests/unit/test_repository.py::test_save_and_get_economic_indicators PASSED [ 92%]
tests/unit/test_repository.py::test_indexes_created PASSED               [ 92%]
tests/unit/test_sales_engine_refactor.py::test_adjust_marketing_budget FAILED [ 92%]
tests/unit/test_sales_engine_refactor.py::test_adjust_marketing_budget_zero_revenue FAILED [ 92%]
tests/unit/test_sensory_purity.py::TestSensoryPurity::test_generate_government_sensory_dto_purity PASSED [ 92%]
tests/unit/test_sensory_purity.py::TestSensoryPurity::test_logic_with_more_agents PASSED [ 92%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect FAILED [ 93%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages FAILED [ 93%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism FAILED [ 93%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_initialization PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_update_reference_prices PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_buy_order PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_sell_order PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_price_clamping PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_order_sorting PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_full_match PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_partial_match PASSED [ 94%]
tests/unit/test_stock_market.py::TestOrderExpiry::test_clear_expired_orders PASSED [ 94%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_success FAILED [ 94%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_insufficient_funds PASSED [ 95%]
tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success FAILED [ 95%]
tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_failure PASSED [ 95%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario FAILED [ 95%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario FAILED [ 95%]
tests/unit/test_taxation_system.py::test_generate_corporate_tax_intents PASSED [ 95%]
tests/unit/test_taxation_system.py::test_generate_corporate_tax_intents_missing_config PASSED [ 95%]
tests/unit/test_taxation_system.py::test_record_revenue_success PASSED   [ 96%]
tests/unit/test_taxation_system.py::test_record_revenue_failure PASSED   [ 96%]
tests/unit/test_transaction_engine.py::test_validator_success PASSED     [ 96%]
tests/unit/test_transaction_engine.py::test_validator_negative_amount PASSED [ 96%]
tests/unit/test_transaction_engine.py::test_validator_insufficient_funds PASSED [ 96%]
tests/unit/test_transaction_engine.py::test_validator_invalid_account PASSED [ 96%]
tests/unit/test_transaction_engine.py::test_executor_success PASSED      [ 97%]
tests/unit/test_transaction_engine.py::test_executor_failure PASSED      [ 97%]
tests/unit/test_transaction_engine.py::test_engine_process_transaction_success PASSED [ 97%]
tests/unit/test_transaction_engine.py::test_engine_process_transaction_validation_fail PASSED [ 97%]
tests/unit/test_transaction_engine.py::test_engine_process_transaction_execution_fail PASSED [ 97%]
tests/unit/test_transaction_engine.py::test_adapter_registry_accessor PASSED [ 97%]
tests/unit/test_transaction_processor.py::test_transaction_processor_dispatch_to_handler PASSED [ 97%]
tests/unit/test_transaction_processor.py::test_transaction_processor_ignores_credit_creation PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_goods_handler_uses_atomic_settlement PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_public_manager_routing PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_transaction_processor_dispatches_housing PASSED [ 98%]
tests/unit/test_watchtower_hardening.py::TestWatchtowerHardening::test_repo_birth_counts PASSED [ 98%]
tests/unit/test_watchtower_hardening.py::TestWatchtowerHardening::test_tracker_sma_logic PASSED [ 98%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_record_sale_updates_tick PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_reduction PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_floor PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_not_stale PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_transaction_processor_calls_record_sale PASSED [ 99%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_success PASSED [ 99%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_missing_field PASSED [100%]

=================================== ERRORS ====================================
_______________ ERROR at setup of test_household_makes_decision _______________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_________________ ERROR at setup of test_firm_makes_decision __________________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
________________ ERROR at setup of test_indicator_aggregation _________________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_________________ ERROR at setup of test_firm_automation_init _________________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_________ ERROR at setup of test_production_function_with_automation __________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_______________ ERROR at setup of test_system2_planner_guidance _______________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
____ ERROR at setup of test_system2_planner_guidance_automation_preference ____
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
________ ERROR at setup of test_system2_planner_guidance_ma_preference ________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
____________ ERROR at setup of test_potential_gdp_ema_convergence _____________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
______ ERROR at setup of test_counter_cyclical_tax_adjustment_recession _______
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
_________ ERROR at setup of test_counter_cyclical_tax_adjustment_boom _________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
_______________ ERROR at setup of test_debt_ceiling_enforcement _______________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
________ ERROR at setup of test_calculate_income_tax_uses_current_rate ________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
_____________ ERROR at setup of test_tax_collection_and_bailouts ______________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
______ ERROR at setup of test_settlement_scenario_1_standard_inheritance ______
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
__________ ERROR at setup of test_settlement_scenario_2_escheatment ___________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
___________ ERROR at setup of test_settlement_scenario_3_insolvency ___________
E   AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
_______ ERROR at setup of TestSimulation.test_simulation_initialization _______
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_______ ERROR at setup of TestSimulation.test_prepare_market_data_basic _______
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
__ ERROR at setup of TestSimulation.test_prepare_market_data_no_goods_market __
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
___ ERROR at setup of TestSimulation.test_prepare_market_data_with_best_ask ___
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
___ ERROR at setup of TestSimulation.test_process_transactions_goods_trade ____
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
___ ERROR at setup of TestSimulation.test_process_transactions_labor_trade ____
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_ ERROR at setup of TestSimulation.test_process_transactions_research_labor_trade _
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
__ ERROR at setup of TestSimulation.test_process_transactions_invalid_agents __
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
____ ERROR at setup of test_handle_agent_lifecycle_removes_inactive_agents ____
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_ ERROR at setup of TestHouseholdSnapshotAssembler.test_assemble_snapshot_copies_state _
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_ ERROR at setup of TestHouseholdSnapshotAssembler.test_assemble_nested_structures _
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_________ ERROR at setup of TestConsumptionManager.test_consume_basic _________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
________ ERROR at setup of TestConsumptionManager.test_consume_service ________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
______ ERROR at setup of TestConsumptionManager.test_decide_and_consume _______
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_______ ERROR at setup of TestDecisionUnit.test_orchestrate_housing_buy _______
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_________ ERROR at setup of TestDecisionUnit.test_shadow_wage_update __________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
___ ERROR at setup of TestEconComponent.test_update_perceived_prices_basic ____
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_ ERROR at setup of TestEconComponent.test_update_perceived_prices_hyperinflation _
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_ ERROR at setup of TestConsumptionManagerSurvival.test_check_survival_override_no_emergency _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestConsumptionManagerSurvival.test_check_survival_override_emergency_triggered _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestConsumptionManagerSurvival.test_check_survival_override_emergency_triggered_insufficient_funds _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestConsumptionManagerSurvival.test_check_survival_override_no_signal _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
______________ ERROR at setup of test_firm_profit_history_update ______________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_____________ ERROR at setup of test_firm_revenue_expenses_reset ______________
E   TypeError: Wallet add: Amount must be int, got <class 'float'>
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_make_decisions_calls_ai _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_consumption_do_nothing _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_consumption_buy_basic_food_sufficient_assets _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_consumption_buy_luxury_food_insufficient_assets _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_consumption_evaluate_options_chooses_best_utility _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_labor_market_participation_aggressive _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
_ ERROR at setup of TestAIDrivenHouseholdDecisionEngine.test_labor_market_participation_passive_no_offer _
E   TypeError: HouseholdStateDTO.__init__() got an unexpected keyword argument 'current_wage'
================================== FAILURES ===================================
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\integration\test_atomic_settlement.py:41: assert False is True
C:\coding\economics\tests\integration\test_atomic_settlement.py:67: AssertionError: Expected 'mock' to have been called once. Called 0 times.
C:\coding\economics\modules\finance\system.py:302: TypeError: '<' not supported between instances of 'Mock' and 'float'
C:\coding\economics\modules\finance\system.py:302: TypeError: '<' not supported between instances of 'Mock' and 'float'
C:\coding\economics\tests\integration\test_fiscal_integrity.py:83: assert 1000 == 5000.0
C:\coding\economics\tests\integration\test_government_fiscal_integration.py:37: assert 123 == 123.45
C:\coding\economics\tests\integration\test_government_integration.py:68: AssertionError: assert 1 == 2
C:\coding\economics\tests\integration\test_government_refactor_behavior.py:134: assert 0 == 1
C:\coding\economics\tests\integration\test_omo_system.py:127: AssertionError: assert 500.0 == (500.0 + 100.0)
C:\coding\economics\tests\integration\test_omo_system.py:156: AssertionError: assert 500.0 == (500.0 - 100.0)
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\integration\test_portfolio_integration.py:66: AttributeError: 'Bank' object has no attribute 'get_deposit_balance'. Did you mean: 'get_customer_balance'?
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\modules\government\test_government_integration.py:120: assert False
C:\coding\economics\tests\modules\government\test_tax_service.py:42: AssertionError: assert 0 == 1
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:690: AttributeError: Mock object has no attribute 'shadow_reservation_wage_pennies'. Did you mean: 'shadow_reservation_wage'?
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\simulation\firms.py:990: KeyError: 'amount_pennies'
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:732: AssertionError: No transfer call detected
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\unit\components\test_engines.py:118: assert None is not None
C:\coding\economics\tests\unit\finance\test_bank_service_interface.py:43: assert None is not None
C:\coding\economics\tests\unit\finance\test_bank_service_interface.py:63: assert None is not None
C:\coding\economics\tests\unit\finance\test_bank_service_interface.py:85: assert 0 == 500.0
C:\coding\economics\tests\unit\finance\test_bank_service_interface.py:97: assert 0 == 1500.0
C:\coding\economics\tests\unit\finance\test_finance_system_refactor.py:58: assert False
C:\coding\economics\tests\unit\finance\test_finance_system_refactor.py:103: AttributeError: 'FinanceSystem' object has no attribute 'grant_bailout_loan'. Did you mean: 'request_bailout_loan'?
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:732: AssertionError: unexpectedly None
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:900: AssertionError: 0 != 1
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:900: AssertionError: 0 != 1
C:\coding\economics\modules\finance\system.py:242: TypeError: '<' not supported between instances of 'MagicMock' and 'float'
C:\coding\economics\modules\finance\system.py:242: TypeError: '<' not supported between instances of 'MagicMock' and 'float'
C:\coding\economics\modules\finance\system.py:242: TypeError: '<' not supported between instances of 'MagicMock' and 'float'
C:\coding\economics\tests\unit\systems\test_settlement_system.py:133: assert None is not None
C:\coding\economics\tests\unit\systems\test_settlement_system.py:155: assert None is not None
C:\coding\economics\tests\unit\systems\test_settlement_system.py:165: assert None is not None
C:\coding\economics\tests\unit\systems\test_settlement_system.py:175: assert None is not None
C:\coding\economics\tests\unit\systems\test_settlement_system.py:185: assert None is not None
C:\coding\economics\tests\unit\systems\test_settlement_system.py:212: assert 50.0 == 0.0
C:\coding\economics\tests\unit\systems\test_settlement_system.py:247: assert 0 == 2
C:\coding\economics\tests\unit\systems\test_settlement_system.py:267: assert 0.0 == 90.0
C:\coding\economics\tests\unit\systems\test_settlement_system.py:301: assert None is not None
C:\coding\economics\tests\unit\systems\test_settlement_system.py:332: assert False is True
C:\coding\economics\tests\unit\systems\test_settlement_system.py:368: assert False is True
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:732: AssertionError: unexpectedly None
C:\coding\economics\tests\unit\test_bank_decomposition.py:37: TypeError: cannot unpack non-iterable NoneType object
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:744: AssertionError: False is not true
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\unit\test_firms.py:224: assert 100.0 == 84.0
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\unit\test_sales_engine_refactor.py:37: assert 40 == 120.0
C:\coding\economics\tests\unit\test_sales_engine_refactor.py:51: assert 0 == 80.0
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\tests\unit\test_tax_collection.py:77: assert 2000.0 == (2000.0 - 0.2)
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
C:\coding\economics\modules\finance\wallet\wallet.py:49: TypeError: Wallet add: Amount must be int, got <class 'float'>
============================== warnings summary ===============================
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_decision_engine_taylor_rule
  C:\coding\economics\tests\integration\test_government_refactor_behavior.py:38: DeprecationWarning: GovernmentDecisionEngine is deprecated. Use FiscalEngine instead.
    engine = GovernmentDecisionEngine(mock_config)

tests/unit/agents/test_government.py::test_collect_tax_delegation
  C:\coding\economics\tests\unit\agents\test_government.py:96: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    env["government"].collect_tax(amount, tax_type, source_id, current_tick)

tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_stock_order
  <string>:10: DeprecationWarning: StockOrder is deprecated. Use CanonicalOrderDTO instead.

tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success
  C:\coding\economics\tests\unit\test_tax_collection.py:123: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    collected = gov.collect_tax(amount, "test_tax", payer, current_tick=1)

tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_failure
  C:\coding\economics\tests\unit\test_tax_collection.py:141: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    collected = gov.collect_tax(amount, "test_tax", payer, current_tick=1)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_panic_selling_order_generation
FAILED tests/integration/test_atomic_settlement.py::test_settle_atomic_success
FAILED tests/integration/test_atomic_settlement.py::test_settle_atomic_rollback
FAILED tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type
FAILED tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds
FAILED tests/integration/test_fiscal_integrity.py::test_infrastructure_investment_generates_transactions_and_issues_bonds
FAILED tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_calculate_income_tax_uses_fiscal_policy_manager
FAILED tests/integration/test_government_integration.py::test_government_execute_social_policy_tax_and_welfare
FAILED tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_social_policy_execution
FAILED tests/integration/test_omo_system.py::test_process_omo_purchase_transaction
FAILED tests/integration/test_omo_system.py::test_process_omo_sale_transaction
FAILED tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_gender_distribution
FAILED tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_household_attributes_initialization
FAILED tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance
FAILED tests/integration/test_td194_integration.py::TestTD194Integration::test_household_make_decision_integrity
FAILED tests/integration/test_td194_integration.py::TestTD194Integration::test_firm_make_decision_integrity
FAILED tests/integration/test_wo058_production.py::test_bootstrapper_injection
FAILED tests/integration/test_wo058_production.py::test_production_kickstart
FAILED tests/modules/government/test_government_integration.py::test_execute_social_policy_tax_and_welfare
FAILED tests/modules/government/test_tax_service.py::test_collect_wealth_tax
FAILED tests/modules/household/engines/test_budget.py::test_allocate_budget_creates_orders_for_needs
FAILED tests/modules/household/test_political_integration.py::test_household_update_political_opinion_integration
FAILED tests/simulation/test_firm_refactor.py::test_command_bus_internal_orders_delegation
FAILED tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_birth_gift_rounding
FAILED tests/system/test_phase29_depression.py::TestPhase29Depression::test_crisis_monitor_logging
FAILED tests/system/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers
FAILED tests/unit/agents/test_government.py::test_deficit_spending_allowed_within_limit
FAILED tests/unit/components/test_engines.py::TestSalesEngine::test_generate_marketing_transaction
FAILED tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_grant_loan
FAILED tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_repay_loan
FAILED tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_balance
FAILED tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_debt_status
FAILED tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_success
FAILED tests/unit/finance/test_finance_system_refactor.py::test_grant_bailout_loan_deprecated
FAILED tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_bailout_loan_generates_command
FAILED tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_market_bond_issuance_generates_transaction
FAILED tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_qe_bond_issuance_generates_transaction
FAILED tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_issue_treasury_bonds_calls_settlement_system
FAILED tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_risk_premium_calculation
FAILED tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_insufficient_funds_fails_issuance
FAILED tests/unit/systems/test_settlement_system.py::test_transfer_success - ...
FAILED tests/unit/systems/test_settlement_system.py::test_create_and_transfer_minting
FAILED tests/unit/systems/test_settlement_system.py::test_create_and_transfer_government_grant
FAILED tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_burning
FAILED tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_tax
FAILED tests/unit/systems/test_settlement_system.py::test_record_liquidation_escheatment
FAILED tests/unit/systems/test_settlement_system.py::test_atomic_settlement_success
FAILED tests/unit/systems/test_settlement_system.py::test_atomic_settlement_leak_prevention
FAILED tests/unit/systems/test_settlement_system.py::test_transfer_seamless_success
FAILED tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_success
FAILED tests/unit/systems/test_settlement_system.py::test_settle_atomic_success
FAILED tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_default_processing
FAILED tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_grant_loan_delegation
FAILED tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_run_tick_interest_collection
FAILED tests/unit/test_firms.py::TestFirmBookValue::test_book_value_no_liabilities
FAILED tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_liabilities
FAILED tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_treasury_shares
FAILED tests/unit/test_firms.py::TestFirmBookValue::test_book_value_negative_net_assets
FAILED tests/unit/test_firms.py::TestFirmSales::test_adjust_marketing_budget_increase
FAILED tests/unit/test_household_ai.py::test_ai_creates_purchase_order - Type...
FAILED tests/unit/test_household_ai.py::test_ai_evaluates_consumption_options
FAILED tests/unit/test_household_refactor.py::TestHouseholdRefactor::test_property_management
FAILED tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation
FAILED tests/unit/test_sales_engine_refactor.py::test_adjust_marketing_budget
FAILED tests/unit/test_sales_engine_refactor.py::test_adjust_marketing_budget_zero_revenue
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism
FAILED tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_success
FAILED tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success
FAILED tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario
FAILED tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario
ERROR tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision
ERROR tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision
ERROR tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation
ERROR tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init
ERROR tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation
ERROR tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance
ERROR tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference
ERROR tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference
ERROR tests/integration/test_fiscal_policy.py::test_potential_gdp_ema_convergence
ERROR tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_recession
ERROR tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_boom
ERROR tests/integration/test_fiscal_policy.py::test_debt_ceiling_enforcement
ERROR tests/integration/test_fiscal_policy.py::test_calculate_income_tax_uses_current_rate
ERROR tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts
ERROR tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_1_standard_inheritance
ERROR tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_2_escheatment
ERROR tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_3_insolvency
ERROR tests/system/test_engine.py::TestSimulation::test_simulation_initialization
ERROR tests/system/test_engine.py::TestSimulation::test_prepare_market_data_basic
ERROR tests/system/test_engine.py::TestSimulation::test_prepare_market_data_no_goods_market
ERROR tests/system/test_engine.py::TestSimulation::test_prepare_market_data_with_best_ask
ERROR tests/system/test_engine.py::TestSimulation::test_process_transactions_goods_trade
ERROR tests/system/test_engine.py::TestSimulation::test_process_transactions_labor_trade
ERROR tests/system/test_engine.py::TestSimulation::test_process_transactions_research_labor_trade
ERROR tests/system/test_engine.py::TestSimulation::test_process_transactions_invalid_agents
ERROR tests/system/test_engine.py::test_handle_agent_lifecycle_removes_inactive_agents
ERROR tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_snapshot_copies_state
ERROR tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_nested_structures
ERROR tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_basic
ERROR tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_service
ERROR tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_decide_and_consume
ERROR tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_orchestrate_housing_buy
ERROR tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_shadow_wage_update
ERROR tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_basic
ERROR tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_hyperinflation
ERROR tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_emergency
ERROR tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered
ERROR tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered_insufficient_funds
ERROR tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_signal
ERROR tests/unit/test_firm_profit.py::test_firm_profit_history_update - TypeE...
ERROR tests/unit/test_firm_profit.py::test_firm_revenue_expenses_reset - Type...
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_make_decisions_calls_ai
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_do_nothing
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_basic_food_sufficient_assets
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_luxury_food_insufficient_assets
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_evaluate_options_chooses_best_utility
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_aggressive
ERROR tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_passive_no_offer
====== 72 failed, 519 passed, 4 skipped, 5 warnings, 48 errors in 3.43s =======
