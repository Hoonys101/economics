
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision ERROR [  0%]
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision ERROR [  0%]
tests/integration/scenarios/diagnosis/test_api_contract.py::test_api_contract_placeholder PASSED [  0%]
tests/integration/scenarios/diagnosis/test_dashboard_contract.py::test_dashboard_snapshot_endpoint_structure PASSED [  0%]
tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation ERROR [  1%]
tests/integration/scenarios/diagnosis/test_market_mechanics.py::test_order_book_matching 
------------------------------- live log setup --------------------------------
INFO     Market_basic_food:order_book_market.py:47 OrderBookMarket basic_food initialized.
-------------------------------- live log call --------------------------------
INFO     Market_basic_food:order_book_market.py:175 Starting order matching for items: ['basic_food']
INFO     Market_basic_food:order_book_market.py:365 MATCHED_GENERAL | 1.00 of basic_food at 9.50. Buyer 1 -> Seller 101
PASSED                                                                   [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init ERROR [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation ERROR [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance ERROR [  2%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference ERROR [  2%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference ERROR [  2%]
tests/integration/test_app.py::test_app_placeholder PASSED               [  2%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_places_sell_order_for_food 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:47 OrderBookMarket goods_market initialized.
FAILED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_places_buy_order_for_food 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:47 OrderBookMarket goods_market initialized.
FAILED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_sells_labor 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:47 OrderBookMarket labor_market initialized.
FAILED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_buys_labor 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:47 OrderBookMarket labor_market initialized.
FAILED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_goods_market_matching_integration 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:47 OrderBookMarket goods_market initialized.
-------------------------------- live log call --------------------------------
INFO     Market_goods_market:order_book_market.py:175 Starting order matching for items: ['food']
INFO     Market_goods_market:order_book_market.py:365 MATCHED_GENERAL | 5.00 of food at 10.00. Buyer 1 -> Seller 1
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_labor_market_matching_integration 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:47 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     Market_labor_market:order_book_market.py:175 Starting order matching for items: ['labor']
INFO     Market_labor_market:order_book_market.py:365 MATCHED_GENERAL | 1.00 of labor at 10.00. Buyer 1 -> Seller 1
PASSED                                                                   [  4%]
tests/integration/test_engine.py::TestSimulation::test_simulation_initialization ERROR [  4%]
tests/integration/test_engine.py::TestSimulation::test_prepare_market_data_basic ERROR [  4%]
tests/integration/test_engine.py::TestSimulation::test_prepare_market_data_no_goods_market ERROR [  5%]
tests/integration/test_engine.py::TestSimulation::test_prepare_market_data_with_best_ask ERROR [  5%]
tests/integration/test_engine.py::TestSimulation::test_process_transactions_goods_trade ERROR [  5%]
tests/integration/test_engine.py::TestSimulation::test_process_transactions_labor_trade ERROR [  5%]
tests/integration/test_engine.py::TestSimulation::test_process_transactions_research_labor_trade ERROR [  6%]
tests/integration/test_engine.py::TestSimulation::test_process_transactions_invalid_agents ERROR [  6%]
tests/integration/test_engine.py::test_handle_agent_lifecycle_removes_inactive_agents ERROR [  6%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type FAILED [  6%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds FAILED [  7%]
tests/integration/test_fiscal_integrity.py::test_infrastructure_investment_generates_transactions_and_issues_bonds 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 1000.0
INFO     simulation.bank:bank.py:82 Bank 2 initialized. Assets: 10000.00
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4000.00 from 2
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 1 households.
PASSED                                                                   [  7%]
tests/integration/test_fiscal_integrity.py::test_education_spending_generates_transactions_only 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 100.0
INFO     simulation.bank:bank.py:82 Bank 2 initialized. Assets: 10000.00
PASSED                                                                   [  7%]
tests/integration/test_fiscal_policy.py::test_potential_gdp_ema_convergence ERROR [  7%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_recession ERROR [  7%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_boom ERROR [  8%]
tests/integration/test_fiscal_policy.py::test_debt_ceiling_enforcement ERROR [  8%]
tests/integration/test_fiscal_policy.py::test_calculate_income_tax_uses_current_rate ERROR [  8%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit FAILED [  8%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit_no_agents PASSED [  9%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_calculate_reward FAILED [  9%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_debt_crisis FAILED [  9%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_high_inflation_low_unemp FAILED [  9%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_ideal FAILED [ 10%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_learning_flow FAILED [ 10%]
tests/integration/test_government_finance.py::test_invest_infrastructure_generates_transaction 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 10000.0
FAILED                                                                   [ 10%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_calculate_income_tax_uses_fiscal_policy_manager 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 0.0
PASSED                                                                   [ 10%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_make_policy_decision_updates_fiscal_policy 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 0.0
INFO     simulation.utils.shadow_logger:shadow_logger.py:36 ShadowLogger initialized at logs/shadow_hand_stage1.csv
ERROR    simulation.utils.shadow_logger:shadow_logger.py:59 ShadowLogger write failed: unsupported format string passed to MagicMock.__format__
FAILED                                                                   [ 11%]
tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts ERROR [ 11%]
tests/integration/test_government_fiscal_policy.py::test_infrastructure_investment FAILED [ 11%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_success ERROR [ 11%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_failure ERROR [ 12%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_legacy ERROR [ 12%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_no_settlement_system ERROR [ 12%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_ant_high_rate PASSED [ 12%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_grasshopper_high_rate PASSED [ 13%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_at_neutral_rate PASSED [ 13%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_with_inflation_expectation PASSED [ 13%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_consumption_aggressiveness_reduction PASSED [ 13%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_dsr_penalty_applied PASSED [ 14%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_subsistence_constraint_bypasses_reduction PASSED [ 14%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_trigger FAILED [ 14%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_conditions_not_met FAILED [ 14%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_renter FAILED [ 15%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_owner FAILED [ 15%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_gender_distribution FAILED [ 15%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_household_attributes_initialization FAILED [ 15%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_bankruptcy FAILED [ 15%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_positive FAILED [ 16%]
tests/integration/test_phase23_production.py::TestPhase23Production::test_production_boost_from_fertilizer_tech 
-------------------------------- live log call --------------------------------
ERROR    simulation.components.production_department:production_department.py:158 FIRM_CRASH_PREVENTED | Firm 1: '>' not supported between instances of 'MagicMock' and 'MagicMock'
ERROR    simulation.components.production_department:production_department.py:158 FIRM_CRASH_PREVENTED | Firm 2: '>' not supported between instances of 'MagicMock' and 'MagicMock'
FAILED                                                                   [ 16%]
tests/integration/test_phase29_depression.py::TestPhase29Depression::test_crisis_monitor_logging 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:44 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:200 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:82 Bank 10 initialized. Assets: 0.00
INFO     simulation.agents.government:government.py:144 Government 11 initialized with assets: 0.0
INFO     Market_food:order_book_market.py:47 OrderBookMarket food initialized.
INFO     Market_electronics:order_book_market.py:47 OrderBookMarket electronics initialized.
INFO     Market_labor:order_book_market.py:47 OrderBookMarket labor initialized.
INFO     simulation.loan_market:loan_market.py:28 LoanMarket loan_market initialized with bank service: 10
INFO     Market_housing:order_book_market.py:47 OrderBookMarket housing initialized.
INFO     TestPhase29:initializer.py:311 GENESIS | Starting initial wealth distribution...
INFO     TestPhase29:initializer.py:322 GENESIS | Distributed wealth to 1 agents.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 100 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 103 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 104 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:105 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     TestPhase29:initializer.py:337 Initial baseline money supply established: 555,000.00
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 5 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Total force-assigned workers: 5
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
INFO     simulation.systems.demographic_manager:demographic_manager.py:37 DemographicManager initialized.
INFO     TestPhase29:initializer.py:440 Simulation run started with run_id: test_run
INFO     TestPhase29:initializer.py:445 Simulation fully initialized with run_id: test_run
INFO     TestPhase29:tick_orchestrator.py:45 MONEY_SUPPLY_BASELINE | Baseline Money Supply set to: 555000.00
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 1 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 1
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 1
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 1
INFO     Market_housing:order_book_market.py:175 Starting order matching for items: ['unit_4', 'unit_3', 'unit_7', 'unit_6', 'unit_1', 'unit_8', 'unit_5', 'unit_9', 'unit_2']
INFO     Market_housing:order_book_market.py:175 Starting order matching for items: ['unit_4', 'unit_3', 'unit_7', 'unit_6', 'unit_1', 'unit_8', 'unit_5', 'unit_9', 'unit_2']
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 5000.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 1 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 549970.00, Expected: 555000.00, Delta: -5030.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 1 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 2 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 2
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 2
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 2
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 2
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4990.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 2 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 545940.00, Expected: 555000.00, Delta: -9060.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 2 ---
PASSED                                                                   [ 16%]
tests/integration/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:44 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:200 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:82 Bank 10 initialized. Assets: 0.00
INFO     simulation.agents.government:government.py:144 Government 11 initialized with assets: 0.0
INFO     Market_food:order_book_market.py:47 OrderBookMarket food initialized.
INFO     Market_electronics:order_book_market.py:47 OrderBookMarket electronics initialized.
INFO     Market_labor:order_book_market.py:47 OrderBookMarket labor initialized.
INFO     simulation.loan_market:loan_market.py:28 LoanMarket loan_market initialized with bank service: 10
INFO     Market_housing:order_book_market.py:47 OrderBookMarket housing initialized.
INFO     TestPhase29:initializer.py:311 GENESIS | Starting initial wealth distribution...
INFO     TestPhase29:initializer.py:322 GENESIS | Distributed wealth to 1 agents.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 100 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 103 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 104 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:105 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     TestPhase29:initializer.py:337 Initial baseline money supply established: 555,000.00
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 5 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Total force-assigned workers: 5
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
INFO     TestPhase29:initializer.py:440 Simulation run started with run_id: test_run
INFO     TestPhase29:initializer.py:445 Simulation fully initialized with run_id: test_run
INFO     TestPhase29:tick_orchestrator.py:45 MONEY_SUPPLY_BASELINE | Baseline Money Supply set to: 555000.00
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 1 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 1
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 1
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 1
INFO     Market_housing:order_book_market.py:175 Starting order matching for items: ['unit_4', 'unit_3', 'unit_7', 'unit_6', 'unit_1', 'unit_8', 'unit_5', 'unit_9', 'unit_2']
INFO     Market_housing:order_book_market.py:175 Starting order matching for items: ['unit_4', 'unit_3', 'unit_7', 'unit_6', 'unit_1', 'unit_8', 'unit_5', 'unit_9', 'unit_2']
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 5000.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 1 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 549970.00, Expected: 555000.00, Delta: -5030.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 1 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 2 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 2
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 2
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 2
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 2
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4990.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 2 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 545940.00, Expected: 555000.00, Delta: -9060.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 2 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 3 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 3
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 3
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 3
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 3
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 3 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 541910.00, Expected: 555000.00, Delta: -13090.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 3 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 4 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 4
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 4
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 4
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 4
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 4
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 4 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 537880.00, Expected: 555000.00, Delta: -17120.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 4 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 5 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 5
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 5
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 5
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 5
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 5
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 5 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 533850.00, Expected: 555000.00, Delta: -21150.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 5 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 6 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 6
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 6
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 6
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 6
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 6
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 6 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 529820.00, Expected: 555000.00, Delta: -25180.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 6 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 7 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 7
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 7
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 7
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 7
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 7
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 7 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 525790.00, Expected: 555000.00, Delta: -29210.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 7 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 8 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 8
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 8
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 8
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 8
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 8
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 8 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 521760.00, Expected: 555000.00, Delta: -33240.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 8 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 9 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 9
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 9
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 9
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 9
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 9
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 9 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 517730.00, Expected: 555000.00, Delta: -37270.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 9 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 10 ---
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:22 Running imitation learning cycle at tick 10.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:34 Imitation Cycle: 1 Role Models, 1 Learners.
INFO     simulation.agents.central_bank:central_bank.py:173 CB_RATE_UPDATE | Rate: 5.00% -> 5.25% (Infl: 0.00%, Gap: 0.00%, PotGDP: 0.00)
FAILED                                                                   [ 16%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance FAILED [ 17%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_logic PASSED [ 17%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_risk_averse PASSED [ 17%]
tests/integration/test_public_manager_integration.py::TestPublicManagerIntegration::test_full_liquidation_cycle 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:40 Processing bankruptcy for Agent 99 at tick 1. Recovering inventory.
INFO     PublicManager:public_manager.py:48 Recovered 10.0 of gold.
INFO     PublicManager:public_manager.py:138 Generated liquidation order for 10.0 of gold at 100.0.
PASSED                                                                   [ 17%]
tests/integration/test_purity_gate.py::test_decision_context_purity PASSED [ 18%]
tests/integration/test_purity_gate.py::test_standalone_firm_engine_uses_dto 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:33 StandaloneRuleBasedFirmDecisionEngine initialized.
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:100 Firm 1 RuleBased: Need more labor, adjusting wages/hiring.
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:213 Firm 1 RuleBased Price Adj: Selling 50.0 of wood at price 10.00
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:139 Firm 1 RuleBased: Adjusting price and selling.
PASSED                                                                   [ 18%]
tests/integration/test_purity_gate.py::test_household_engine_uses_dto 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 18%]
tests/integration/test_thoughtstream_logger.py::test_logger_functionality PASSED [ 18%]
tests/integration/test_tick_normalization.py::TestTickNormalization::test_run_tick_executes_phases ERROR [ 19%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_a_pre_modern PASSED [ 19%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_b_high_income FAILED [ 19%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_c_low_income PASSED [ 19%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_d_middle_income PASSED [ 20%]
tests/integration/test_wo058_production.py::test_bootstrapper_injection FAILED [ 20%]
tests/integration/test_wo058_production.py::test_production_kickstart FAILED [ 20%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_hyperinflation_trigger 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:32 ðŸ”¥ STRESS_TEST: Activating 'hyperinflation' at Tick 10!
INFO     simulation.systems.event_system:event_system.py:53   -> Injected 50% cash into all households.
PASSED                                                                   [ 20%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_deflation_asset_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:32 ðŸ”¥ STRESS_TEST: Activating 'deflation' at Tick 20!
INFO     simulation.systems.event_system:event_system.py:69   -> Reduced all agent assets by 20%.
PASSED                                                                   [ 21%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_consumption_pessimism PASSED [ 21%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_supply_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:32 ðŸ”¥ STRESS_TEST: Activating 'supply_shock' at Tick 30!
INFO     simulation.systems.event_system:event_system.py:80   -> Applied productivity shock (0.5) to Firm 101 (Type: Farm).
PASSED                                                                   [ 21%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_panic_selling_order_generation PASSED [ 21%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_hoarding_amplification 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
PASSED                                                                   [ 22%]
tests/stress/test_stress_scenarios.py::TestPhase28StressScenarios::test_debt_repayment_priority 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:asset_manager.py:55 DEBT_AVERSION | Household 1 prioritizing repayment: 550.0
PASSED                                                                   [ 22%]
tests/unit/agents/test_government.py::test_calculate_income_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 100000
PASSED                                                                   [ 22%]
tests/unit/agents/test_government.py::test_calculate_corporate_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 100000
PASSED                                                                   [ 22%]
tests/unit/agents/test_government.py::test_collect_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 100000
PASSED                                                                   [ 23%]
tests/unit/agents/test_government.py::test_run_public_education_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 100000
PASSED                                                                   [ 23%]
tests/unit/agents/test_government.py::test_deficit_spending_allowed_within_limit 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 1000
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 500.00 to <Mock name='mock.id' id='2329998748240'>
PASSED                                                                   [ 23%]
tests/unit/agents/test_government.py::test_deficit_spending_blocked_beyond_limit 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 1000
-------------------------------- live log call --------------------------------
WARNING  simulation.agents.government:government.py:403 BOND_ISSUANCE_FAILED | Failed to raise 3100.00 for household support.
PASSED                                                                   [ 23%]
tests/unit/api/test_dashboard_api.py::TestDashboardAPI::test_get_dashboard_snapshot_structure PASSED [ 23%]
tests/unit/api/test_dashboard_api.py::TestDashboardAPI::test_dashboard_api_endpoint_mock PASSED [ 24%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_execution_order PASSED [ 24%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_unemployed PASSED [ 24%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_add_child PASSED [ 24%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_age_one_tick PASSED [ 25%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_create_offspring_demographics PASSED [ 25%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_get_generational_similarity PASSED [ 25%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_above_threshold PASSED [ 25%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_under_threshold PASSED [ 26%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_initialization PASSED [ 26%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_set_spouse PASSED [ 26%]
tests/unit/components/test_market_component.py::test_choose_best_seller_utility PASSED [ 26%]
tests/unit/components/test_market_component.py::test_choose_best_seller_no_market PASSED [ 27%]
tests/unit/corporate/test_corporate_orchestrator.py::test_orchestration ERROR [ 27%]
tests/unit/corporate/test_finance_manager.py::test_dividend_logic ERROR  [ 27%]
tests/unit/corporate/test_finance_manager.py::test_debt_logic_borrow ERROR [ 27%]
tests/unit/corporate/test_hr_manager.py::test_hiring_logic ERROR         [ 28%]
tests/unit/corporate/test_operations_manager.py::test_rd_logic ERROR     [ 28%]
tests/unit/corporate/test_operations_manager.py::test_automation_investment ERROR [ 28%]
tests/unit/corporate/test_sales_manager.py::test_pricing_logic ERROR     [ 28%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_triggered PASSED [ 29%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_insufficient_funds PASSED [ 29%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_cost_plus_fallback PASSED [ 29%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_fire_sale_trigger PASSED [ 29%]
tests/unit/decisions/test_household_engine_refactor.py::test_behavioral_equivalence 
-------------------------------- live log call --------------------------------
INFO     tests.unit.decisions.legacy_household_engine_fixture:legacy_household_engine_fixture.py:32 LegacyAIDrivenHouseholdDecisionEngine initialized.
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
PASSED                                                                   [ 30%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_bank_methods_presence 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 30%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_grant_loan 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 30%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_repay_loan 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 30%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_balance 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 30%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_debt_status 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 31%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_interface_compliance_mypy PASSED [ 31%]
tests/unit/finance/test_credit_scoring.py::test_assess_approved PASSED   [ 31%]
tests/unit/finance/test_credit_scoring.py::test_assess_dti_fail PASSED   [ 31%]
tests/unit/finance/test_credit_scoring.py::test_assess_ltv_fail PASSED   [ 32%]
tests/unit/finance/test_credit_scoring.py::test_assess_unsecured_cap_fail PASSED [ 32%]
tests/unit/finance/test_credit_scoring.py::test_zero_income_fail PASSED  [ 32%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sparse_history_returns_infinite_bounds PASSED [ 32%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sufficient_history_returns_finite_bounds PASSED [ 33%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_no_history_returns_infinite_bounds PASSED [ 33%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_default_config_fallback PASSED [ 33%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_load_yaml PASSED [ 33%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_get_with_default PASSED [ 34%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_hybrid_fallback PASSED [ 34%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_set_value_for_test PASSED [ 34%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_safe_zone PASSED [ 34%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_distress_zone PASSED [ 35%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_zero_assets PASSED [ 35%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_negative_values PASSED [ 35%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_bailout_loan_generates_transaction FAILED [ 35%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_market_bond_issuance_generates_transaction PASSED [ 36%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_qe_bond_issuance_generates_transaction PASSED [ 36%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_issue_treasury_bonds_calls_settlement_system PASSED [ 36%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_collect_corporate_tax_calls_settlement_system 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:256 FinanceSystem.collect_corporate_tax called. Should be using Transaction Generation.
PASSED                                                                   [ 36%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_risk_premium_calculation PASSED [ 37%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_insufficient_funds_fails_issuance 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:124 BOND_ISSUANCE_FAILED | No buyer found (Bank insufficient funds).
PASSED                                                                   [ 37%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_pass PASSED [ 37%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_fail PASSED [ 37%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_pass PASSED [ 38%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_fail PASSED [ 38%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_market PASSED [ 38%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_qe PASSED [ 38%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_fail 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:124 BOND_ISSUANCE_FAILED | No buyer found (Bank insufficient funds).
PASSED                                                                   [ 38%]
tests/unit/modules/finance/test_system.py::test_bailout_fails_with_insufficient_government_funds 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:266 BAILOUT_DENIED | Government insufficient funds: 100.00 < 500.00
PASSED                                                                   [ 39%]
tests/unit/modules/finance/test_system.py::test_grant_bailout_loan PASSED [ 39%]
tests/unit/modules/finance/test_system.py::test_service_debt_central_bank_repayment PASSED [ 39%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_calculates_survival_cost_correctly FAILED [ 39%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_defaults_if_no_config PASSED [ 40%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_progressive PASSED [ 40%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_zero_or_negative PASSED [ 40%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_equilibrium PASSED [ 40%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_gdp_zero_or_negative PASSED [ 41%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_high_inflation PASSED [ 41%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_missing_data_defaults PASSED [ 41%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_overheating_economy PASSED [ 41%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_recession PASSED [ 42%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_basic FAILED [ 42%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_hyperinflation FAILED [ 42%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_add_and_query_record PASSED [ 42%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_query_filtering PASSED [ 43%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_persistence PASSED [ 43%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_process_bankruptcy_event 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:40 Processing bankruptcy for Agent 1 at tick 10. Recovering inventory.
INFO     PublicManager:public_manager.py:48 Recovered 10.0 of apple.
INFO     PublicManager:public_manager.py:48 Recovered 5.0 of banana.
PASSED                                                                   [ 43%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders 
-------------------------------- live log call --------------------------------
INFO     PublicManager:public_manager.py:138 Generated liquidation order for 50.0 of apple at 9.0.
PASSED                                                                   [ 43%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_confirm_sale PASSED [ 44%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_deposit_revenue PASSED [ 44%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_no_signal PASSED [ 44%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_resets_metrics PASSED [ 44%]
tests/unit/systems/test_commerce_system.py::test_execute_consumption_and_leisure ERROR [ 45%]
tests/unit/systems/test_commerce_system.py::test_fast_track_consumption_if_needed ERROR [ 45%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_and_insolvent PASSED [ 45%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_but_solvent PASSED [ 45%]
tests/unit/systems/test_demographic_manager_newborn.py::test_newborn_receives_initial_needs_from_config FAILED [ 46%]
tests/unit/systems/test_event_system.py::test_inflation_shock ERROR      [ 46%]
tests/unit/systems/test_event_system.py::test_recession_shock ERROR      [ 46%]
tests/unit/systems/test_event_system.py::test_no_event ERROR             [ 46%]
tests/unit/systems/test_firm_management_leak.py::TestFirmManagementLeak::test_spawn_firm_leak_detection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.firm_management:firm_management.py:160 STARTUP | Household 1 founded Firm 1 (Specialization: steel, Capital: 1500.0)
PASSED                                                                   [ 46%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_missing_settlement_system PASSED [ 47%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_transfer_failure 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.firm_management:firm_management.py:149 STARTUP_FAILED | Failed to transfer capital from <MagicMock name='mock.id' id='2329993781536'> to new firm 1. Aborting.
PASSED                                                                   [ 47%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_maintenance_uses_transfer PASSED [ 47%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_rent_collection_uses_transfer PASSED [ 47%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_transaction_government_seller_pass_object 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.housing_system:housing_system.py:280 REAL_ESTATE | Sold Unit 101 to 3. Price: 10000.00
PASSED                                                                   [ 48%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_transaction_rollback_on_disbursement_failure 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.housing_system:housing_system.py:210 LOAN_DISBURSEMENT_FAIL | Bank could not transfer 8000.0 to 3. Voiding loan.
PASSED                                                                   [ 48%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_transaction_rollback_on_payment_failure 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.housing_system:housing_system.py:248 HOUSING_PAYMENT_FAIL | Buyer 3 could not pay 10000.0 to Seller 4. Rolling back.
PASSED                                                                   [ 48%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_transaction_uses_transfer_and_withdraw 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.housing_system:housing_system.py:280 REAL_ESTATE | Sold Unit 101 to 3. Price: 10000.00
PASSED                                                                   [ 48%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_even_split 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 10000.00
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=10000, RE=0, Stock=1000 -> Total=11000. Tax=0
FAILED                                                                   [ 49%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_uneven_split 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 10000.01
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=10000, RE=0, Stock=1010 -> Total=11010. Tax=0
FAILED                                                                   [ 49%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_multiple_heirs 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 100.00
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=100, RE=0, Stock=100 -> Total=200. Tax=0
FAILED                                                                   [ 49%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_zero_assets 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 0.00
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=0, RE=0, Stock=0 -> Total=0. Tax=0
PASSED                                                                   [ 49%]
tests/unit/systems/test_labor_market_analyzer.py::test_update_market_history PASSED [ 50%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_increase PASSED [ 50%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_decay PASSED [ 50%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_floor PASSED [ 50%]
tests/unit/systems/test_ma_manager.py::TestMAManager::test_execute_bankruptcy_records_loss_in_ledger 
-------------------------------- live log call --------------------------------
INFO     MAManager:ma_manager.py:229 BANKRUPTCY | Firm 999 liquidated. Cash Remaining: 1,000.00.
FAILED                                                                   [ 51%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_budget_constraints FAILED [ 51%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_legacy FAILED [ 51%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_settlement FAILED [ 51%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_scholarship_settlement FAILED [ 52%]
tests/unit/systems/test_sensory_system.py::test_generate_government_sensory_dto PASSED [ 52%]
tests/unit/systems/test_sensory_system.py::test_buffer_smoothing PASSED  [ 52%]
tests/unit/systems/test_settlement_system.py::test_transfer_success PASSED [ 52%]
tests/unit/systems/test_settlement_system.py::test_transfer_insufficient_funds 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 1 to transfer 20.00 to 2. Assets: 10.00. Memo: Test Fail
PASSED                                                                   [ 53%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_minting 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:158 MINT_AND_TRANSFER | Created 100.00 from CENTRAL_BANK to 1. Reason: Minting
PASSED                                                                   [ 53%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_government_grant PASSED [ 53%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_burning 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:194 TRANSFER_AND_DESTROY | Destroyed 50.00 from 1 to CENTRAL_BANK. Reason: Burning
PASSED                                                                   [ 53%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_tax PASSED [ 53%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:45 LIQUIDATION: Agent 1 liquidated. Inventory: 100.00, Capital: 50.00, Recovered: 20.00. Net Destruction: 130.00. Total Destroyed: 130.00. Reason: Bankruptcy
INFO     simulation.systems.settlement_system:settlement_system.py:45 LIQUIDATION: Agent 1 liquidated. Inventory: 10.00, Capital: 0.00, Recovered: 0.00. Net Destruction: 10.00. Total Destroyed: 140.00. Reason: More Loss
PASSED                                                                   [ 54%]
tests/unit/systems/test_social_system.py::test_update_social_ranks PASSED [ 54%]
tests/unit/systems/test_social_system.py::test_calculate_reference_standard PASSED [ 54%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_corporate_tax PASSED [ 54%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_flat PASSED [ 55%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_scaling PASSED [ 55%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_with_brackets PASSED [ 55%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_collect_tax 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.tax_agency:tax_agency.py:140 TAX_COLLECTION_SUCCESS | Tick 1 | Collected 100.00 of income from 101
PASSED                                                                   [ 55%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_effective_diffusion_rate PASSED [ 56%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_unlock_and_visionary_adoption FAILED [ 56%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_diffusion_over_time FAILED [ 56%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_productivity_multiplier PASSED [ 56%]
tests/unit/test_ai_driven_firm_engine.py::test_adjust_price_tactic 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
FAILED                                                                   [ 57%]
tests/unit/test_ai_training_manager.py::TestAITrainingManager::test_get_top_performing_agents 
------------------------------- live log setup --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
FAILED                                                                   [ 57%]
tests/unit/test_ai_training_manager.py::TestAITrainingManager::test_clone_and_mutate_q_table 
------------------------------- live log setup --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
PASSED                                                                   [ 57%]
tests/unit/test_ai_training_manager.py::TestAITrainingManager::test_run_imitation_learning_cycle 
------------------------------- live log setup --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:22 Running imitation learning cycle at tick 100.
FAILED                                                                   [ 57%]
tests/unit/test_ai_training_manager_new.py::test_get_top_performing_agents 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
FAILED                                                                   [ 58%]
tests/unit/test_ai_training_manager_new.py::test_get_under_performing_agents 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
FAILED                                                                   [ 58%]
tests/unit/test_ai_training_manager_new.py::test_clone_and_mutate_q_table 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
FAILED                                                                   [ 58%]
tests/unit/test_ai_training_manager_new.py::test_clone_from_fittest_agent 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
FAILED                                                                   [ 58%]
tests/unit/test_ai_training_manager_new.py::test_run_imitation_learning_cycle 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:22 Running imitation learning cycle at tick 1000.
FAILED                                                                   [ 59%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_wealth_distribution PASSED [ 59%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_needs_distribution PASSED [ 59%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_sales_by_good PASSED [ 59%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_market_order_book 
-------------------------------- live log call --------------------------------
INFO     Market_test_market:order_book_market.py:47 OrderBookMarket test_market initialized.
PASSED                                                                   [ 60%]
tests/unit/test_api_history.py::TestHistoryAPI::test_gdp_history_on_refresh PASSED [ 60%]
tests/unit/test_bank.py::TestBank::test_initialization 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 60%]
tests/unit/test_bank.py::TestBank::test_grant_loan_successful 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 60%]
tests/unit/test_bank.py::TestBank::test_grant_loan_denied_credit 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:134 LOAN_DENIED | Borrower 101 denied. Reason: Risk too high
PASSED                                                                   [ 61%]
tests/unit/test_bank.py::TestBank::test_grant_loan_insufficient_reserves 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
-------------------------------- live log call --------------------------------
WARNING  simulation.bank:bank.py:149 LOAN_DENIED | Bank 1 insufficient reserves. Assets: 10000.00 < Req: 20000.00
PASSED                                                                   [ 61%]
tests/unit/test_bank.py::TestBank::test_grant_loan_multiple_loans 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 61%]
tests/unit/test_bank.py::TestBank::test_deposit_from_customer 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 61%]
tests/unit/test_bank.py::TestBank::test_withdraw_for_customer_success 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 61%]
tests/unit/test_bank.py::TestBank::test_withdraw_for_customer_insufficient 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 62%]
tests/unit/test_bank.py::TestBank::test_financial_entity_deposit 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 62%]
tests/unit/test_bank.py::TestBank::test_financial_entity_withdraw 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 62%]
tests/unit/test_bank.py::TestBank::test_financial_entity_withdraw_insufficient 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 62%]
tests/unit/test_bank.py::TestBank::test_run_tick_returns_transactions 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
PASSED                                                                   [ 63%]
tests/unit/test_bank.py::TestBank::test_void_loan_failure_raises_exception 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:82 Bank 1 initialized. Assets: 10000.00
-------------------------------- live log call --------------------------------
CRITICAL simulation.bank:bank.py:505 VOID_LOAN_FAIL | Could not find deposit for loan loan_broken_link. Cannot safely rollback.
PASSED                                                                   [ 63%]
tests/unit/test_base_agent.py::test_base_agent_abstract_methods PASSED   [ 63%]
tests/unit/test_base_agent.py::test_household_clone PASSED               [ 63%]
tests/unit/test_base_agent.py::test_firm_inheritance_and_init PASSED     [ 64%]
tests/unit/test_config_parity.py::test_household_config_parity PASSED    [ 64%]
tests/unit/test_config_parity.py::test_firm_config_parity PASSED         [ 64%]
tests/unit/test_firm_decision_engine.py::test_firm_production_decision_with_employees 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
ERROR                                                                    [ 64%]
tests/unit/test_firm_decision_engine.py::test_firm_no_production_if_target_met 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
ERROR                                                                    [ 65%]
tests/unit/test_firm_decision_engine.py::test_firm_hiring_decision_no_inventory 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
ERROR                                                                    [ 65%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_initialization PASSED [ 65%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_overstock_reduces_target FAILED [ 65%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_understock_increases_target FAILED [ 66%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_target_within_bounds_no_change FAILED [ 66%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_target_min_max_bounds FAILED [ 66%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_price_adjusts_overstock FAILED [ 66%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_price_adjusts_understock FAILED [ 67%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_sell_order_details FAILED [ 67%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_hires_labor FAILED [ 67%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_does_not_hire_when_full FAILED [ 67%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_fires_excess_labor FAILED [ 68%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_sales_aggressiveness_impact_on_price FAILED [ 68%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_rd_investment FAILED [ 68%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_capex_investment FAILED [ 68%]
tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_dividend_setting FAILED [ 69%]
tests/unit/test_firm_profit.py::test_firm_profit_history_update ERROR    [ 69%]
tests/unit/test_firm_profit.py::test_firm_revenue_expenses_reset ERROR   [ 69%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_no_liabilities PASSED [ 69%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_liabilities PASSED [ 69%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_treasury_shares PASSED [ 70%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_negative_net_assets PASSED [ 70%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_zero_shares PASSED [ 70%]
tests/unit/test_firms.py::TestProductionDepartment::test_produce PASSED  [ 70%]
tests/unit/test_firms.py::TestSalesDepartment::test_post_ask PASSED      [ 71%]
tests/unit/test_firms.py::TestSalesDepartment::test_adjust_marketing_budget_increase PASSED [ 71%]
tests/unit/test_firms.py::TestSalesDepartment::test_adjust_marketing_budget_decrease PASSED [ 71%]
tests/unit/test_household_ai.py::test_ai_creates_purchase_order ERROR    [ 71%]
tests/unit/test_household_ai.py::test_ai_evaluates_consumption_options ERROR [ 72%]
tests/unit/test_household_ai_consumption.py::TestHouseholdAIConsumption::test_ai_chooses_consumption_tactic FAILED [ 72%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_get_consumption_candidates SKIPPED [ 72%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_calculate_utility_gain_basic_food SKIPPED [ 72%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_calculate_utility_gain_luxury_food SKIPPED [ 73%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_find_optimal_consumption_bundle_prioritize_cheaper SKIPPED [ 73%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_find_optimal_consumption_bundle_insufficient_funds SKIPPED [ 73%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_find_optimal_consumption_bundle_no_candidates SKIPPED [ 73%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_make_decisions_with_evaluate_consumption_options 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 74%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_make_decisions_with_participate_labor_market 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 74%]
tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_find_optimal_consumption_bundle_mix_goods_sufficient_budget SKIPPED [ 74%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_make_decisions_calls_ai PASSED [ 74%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_do_nothing PASSED [ 75%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_basic_food_sufficient_assets PASSED [ 75%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_luxury_food_insufficient_assets PASSED [ 75%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_evaluate_options_chooses_best_utility PASSED [ 75%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_aggressive PASSED [ 76%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_passive_no_offer PASSED [ 76%]
tests/unit/test_household_marginal_utility.py::TestHouseholdMarginalUtility::test_high_price_prevents_buying 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 76%]
tests/unit/test_household_marginal_utility.py::TestHouseholdMarginalUtility::test_marginal_utility_stops_buying 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 76%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_dti_guardrail PASSED [ 76%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_household_integration FAILED [ 77%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_npv_buy_calculation PASSED [ 77%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_rational_choice_buy PASSED [ 77%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_multiple_agents PASSED [ 77%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_no_data PASSED [ 78%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_single_agent PASSED [ 78%]
tests/unit/test_loan_market.py::TestLoanMarket::test_initialization PASSED [ 78%]
tests/unit/test_loan_market.py::TestLoanMarket::test_place_loan_request_grants_loan 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:50 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
INFO     simulation.loan_market:loan_market.py:93 Loan granted to 1 for 100.00. Loan ID: loan_id_123
PASSED                                                                   [ 78%]
tests/unit/test_loan_market.py::TestLoanMarket::test_place_loan_request_with_profile 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:50 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
INFO     simulation.loan_market:loan_market.py:93 Loan granted to 1 for 100.00. Loan ID: loan_id_123
PASSED                                                                   [ 79%]
tests/unit/test_loan_market.py::TestLoanMarket::test_place_loan_request_denies_loan 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:50 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
WARNING  simulation.loan_market:loan_market.py:98 Loan denied for 1 for 100.00.
PASSED                                                                   [ 79%]
tests/unit/test_loan_market.py::TestLoanMarket::test_place_repayment_processes_repayment 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:50 Order placed: Type=REPAYMENT, Item=loan_id_456, Agent=1, Amount=50
INFO     simulation.loan_market:loan_market.py:122 Repayment of 50.00 processed for loan loan_id_456 by 1.
PASSED                                                                   [ 79%]
tests/unit/test_loan_market.py::TestLoanMarket::test_place_order_unknown_type_logs_warning 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:50 Order placed: Type=UNKNOWN_TYPE, Item=item, Agent=1, Amount=10
WARNING  simulation.loan_market:loan_market.py:187 Unknown order type: UNKNOWN_TYPE
PASSED                                                                   [ 79%]
tests/unit/test_logger.py::TestLogger::test_clear_logs PASSED            [ 80%]
tests/unit/test_logger.py::TestLogger::test_log_writing PASSED           [ 80%]
tests/unit/test_logger.py::TestLogger::test_singleton_instance PASSED    [ 80%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_decrease_on_low_efficiency FAILED [ 80%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_increase_on_high_efficiency FAILED [ 81%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation FAILED [ 81%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_first_tick_skip FAILED [ 81%]
tests/unit/test_markets_v2.py::TestOrderBookMarketInitialization::test_market_initialization PASSED [ 81%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_single_buy_order PASSED [ 82%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_buy_orders_sorted PASSED [ 82%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_sell_orders_sorted PASSED [ 82%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_orders_with_same_price PASSED [ 82%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_unfilled_order_no_match PASSED [ 83%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_full_match_one_to_one PASSED [ 83%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_partial_match_then_book PASSED [ 83%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_match_with_multiple_orders PASSED [ 83%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_empty PASSED [ 84%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_non_empty PASSED [ 84%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_empty PASSED [ 84%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_non_empty PASSED [ 84%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_last_traded_price PASSED [ 84%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread PASSED     [ 85%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread_no_bid_or_ask PASSED [ 85%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_market_depth PASSED [ 85%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_initialization PASSED [ 85%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_place_buy_order_adds_and_sorts PASSED [ 86%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_place_sell_order_adds_and_sorts PASSED [ 86%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_place_order_unknown_type_logs_warning PASSED [ 86%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_full_fill PASSED [ 86%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_buy_order PASSED [ 87%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_sell_order PASSED [ 87%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_no_match_price PASSED [ 87%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_multiple_matches PASSED [ 87%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_different_items PASSED [ 88%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_empty_books PASSED [ 88%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_goods PASSED [ 88%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_labor PASSED [ 88%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_empty PASSED [ 89%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_non_empty PASSED [ 89%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_empty PASSED [ 89%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_non_empty PASSED [ 89%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_empty PASSED [ 90%]
tests/unit/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_non_empty PASSED [ 90%]
tests/unit/test_portfolio_macro.py::test_portfolio_optimization_under_stagflation PASSED [ 90%]
tests/unit/test_repository.py::test_save_and_get_simulation_run PASSED   [ 90%]
tests/unit/test_repository.py::test_save_and_get_agent_state PASSED      [ 91%]
tests/unit/test_repository.py::test_save_and_get_transaction PASSED      [ 91%]
tests/unit/test_repository.py::test_save_and_get_economic_indicators PASSED [ 91%]
tests/unit/test_repository.py::test_indexes_created PASSED               [ 91%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect FAILED [ 92%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages FAILED [ 92%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism FAILED [ 92%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_initialization PASSED [ 92%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_update_reference_prices FAILED [ 92%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_buy_order PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_sell_order PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_buy_orders_sorted_by_price_descending PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_sell_orders_sorted_by_price_ascending PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_full_match PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_partial_match_buy_order_larger PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_no_match_price_gap PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockPriceQueries::test_get_stock_price_with_last_price PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockPriceQueries::test_get_stock_price_fallback_to_reference PASSED [ 95%]
tests/unit/test_stock_market.py::TestStockPriceQueries::test_get_best_bid PASSED [ 95%]
tests/unit/test_stock_market.py::TestStockPriceQueries::test_get_best_ask PASSED [ 95%]
tests/unit/test_stock_market.py::TestOrderExpiry::test_clear_expired_orders PASSED [ 95%]
tests/unit/test_stock_market.py::TestMarketSummary::test_get_market_summary PASSED [ 96%]
tests/unit/test_stock_market.py::test_ipo_share_count FAILED             [ 96%]
tests/unit/test_stock_market.py::test_seo_triggers FAILED                [ 96%]
tests/unit/test_stock_market.py::test_household_investment FAILED        [ 96%]
tests/unit/test_stock_market.py::test_price_limit PASSED                 [ 97%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_success PASSED [ 97%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_insufficient_funds PASSED [ 97%]
tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success PASSED [ 97%]
tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_failure PASSED [ 98%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario FAILED [ 98%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario FAILED [ 98%]
tests/unit/test_transaction_processor.py::test_transaction_manager_uses_settlement_for_goods PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_transaction_manager_skips_state_update_on_failure PASSED [ 99%]
tests/unit/test_transaction_processor.py::test_transaction_manager_routes_to_central_bank PASSED [ 99%]
tests/unit/test_transaction_processor.py::test_transaction_manager_uses_handler PASSED [ 99%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_success PASSED [ 99%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_missing_field PASSED [100%]

=================================== ERRORS ====================================
_______________ ERROR at setup of test_household_makes_decision _______________
tests\integration\scenarios\diagnosis\conftest.py:28: in simple_household
    household = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
_________________ ERROR at setup of test_firm_makes_decision __________________
tests\integration\scenarios\diagnosis\conftest.py:44: in simple_firm
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
________________ ERROR at setup of test_indicator_aggregation _________________
tests\integration\scenarios\diagnosis\conftest.py:28: in simple_household
    household = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
_________________ ERROR at setup of test_firm_automation_init _________________
tests\integration\scenarios\phase21\test_automation.py:15: in firm_mock
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_________ ERROR at setup of test_production_function_with_automation __________
tests\integration\scenarios\phase21\test_automation.py:15: in firm_mock
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_______________ ERROR at setup of test_system2_planner_guidance _______________
tests\integration\scenarios\phase21\test_automation.py:15: in firm_mock
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
____ ERROR at setup of test_system2_planner_guidance_automation_preference ____
tests\integration\scenarios\phase21\test_firm_system2.py:15: in firm_mock
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
________ ERROR at setup of test_system2_planner_guidance_ma_preference ________
tests\integration\scenarios\phase21\test_firm_system2.py:15: in firm_mock
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_______ ERROR at setup of TestSimulation.test_simulation_initialization _______
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_______ ERROR at setup of TestSimulation.test_prepare_market_data_basic _______
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
__ ERROR at setup of TestSimulation.test_prepare_market_data_no_goods_market __
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
___ ERROR at setup of TestSimulation.test_prepare_market_data_with_best_ask ___
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
___ ERROR at setup of TestSimulation.test_process_transactions_goods_trade ____
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
___ ERROR at setup of TestSimulation.test_process_transactions_labor_trade ____
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_ ERROR at setup of TestSimulation.test_process_transactions_research_labor_trade _
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
__ ERROR at setup of TestSimulation.test_process_transactions_invalid_agents __
tests\integration\test_engine.py:223: in mock_firms
    f1 = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
____ ERROR at setup of test_handle_agent_lifecycle_removes_inactive_agents ____
tests\integration\test_engine.py:603: in setup_simulation_for_lifecycle
    household_active = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
____________ ERROR at setup of test_potential_gdp_ema_convergence _____________
tests\conftest.py:78: in government
    gov = Government(id=1, config_module=mock_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
______ ERROR at setup of test_counter_cyclical_tax_adjustment_recession _______
tests\conftest.py:78: in government
    gov = Government(id=1, config_module=mock_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
_________ ERROR at setup of test_counter_cyclical_tax_adjustment_boom _________
tests\conftest.py:78: in government
    gov = Government(id=1, config_module=mock_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
_______________ ERROR at setup of test_debt_ceiling_enforcement _______________
tests\conftest.py:78: in government
    gov = Government(id=1, config_module=mock_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
________ ERROR at setup of test_calculate_income_tax_uses_current_rate ________
tests\conftest.py:78: in government
    gov = Government(id=1, config_module=mock_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
_____________ ERROR at setup of test_tax_collection_and_bailouts ______________
tests\conftest.py:78: in government
    gov = Government(id=1, config_module=mock_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
_______ ERROR at setup of TestGovernmentTax.test_record_revenue_success _______
tests\integration\test_government_tax.py:17: in government
    gov = Government(id=1, initial_assets=1000.0, config_module=config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:49: in determine_fiscal_stance
    if survival_cost <= 0:
       ^^^^^^^^^^^^^^^^^^
E   TypeError: '<=' not supported between instances of 'MagicMock' and 'int'
_______ ERROR at setup of TestGovernmentTax.test_record_revenue_failure _______
tests\integration\test_government_tax.py:17: in government
    gov = Government(id=1, initial_assets=1000.0, config_module=config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:49: in determine_fiscal_stance
    if survival_cost <= 0:
       ^^^^^^^^^^^^^^^^^^
E   TypeError: '<=' not supported between instances of 'MagicMock' and 'int'
_________ ERROR at setup of TestGovernmentTax.test_collect_tax_legacy _________
tests\integration\test_government_tax.py:17: in government
    gov = Government(id=1, initial_assets=1000.0, config_module=config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:49: in determine_fiscal_stance
    if survival_cost <= 0:
       ^^^^^^^^^^^^^^^^^^
E   TypeError: '<=' not supported between instances of 'MagicMock' and 'int'
__ ERROR at setup of TestGovernmentTax.test_collect_tax_no_settlement_system __
tests\integration\test_government_tax.py:17: in government
    gov = Government(id=1, initial_assets=1000.0, config_module=config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:49: in determine_fiscal_stance
    if survival_cost <= 0:
       ^^^^^^^^^^^^^^^^^^
E   TypeError: '<=' not supported between instances of 'MagicMock' and 'int'
____ ERROR at setup of TestTickNormalization.test_run_tick_executes_phases ____
tests\integration\test_tick_normalization.py:85: in orchestrator
    patch('simulation.orchestration.tick_orchestrator.Phase4_Lifecycle') as MockPhase4, \
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'simulation.orchestration.tick_orchestrator' from 'C:\\coding\\economics\\simulation\\orchestration\\tick_orchestrator.py'> does not have the attribute 'Phase4_Lifecycle'
____________________ ERROR at setup of test_orchestration _____________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
____________________ ERROR at setup of test_dividend_logic ____________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
__________________ ERROR at setup of test_debt_logic_borrow ___________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
_____________________ ERROR at setup of test_hiring_logic _____________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
_______________________ ERROR at setup of test_rd_logic _______________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
________________ ERROR at setup of test_automation_investment _________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
____________________ ERROR at setup of test_pricing_logic _____________________
tests\unit\corporate\conftest.py:56: in firm_config_dto
    return FirmConfigDTO(
E   TypeError: FirmConfigDTO.__init__() missing 7 required positional arguments: 'default_target_margin', 'max_price_staleness_ticks', 'fire_sale_asset_threshold', 'fire_sale_inventory_threshold', 'fire_sale_inventory_target', 'fire_sale_discount', and 'fire_sale_cost_discount'
___________ ERROR at setup of test_execute_consumption_and_leisure ____________
tests\unit\systems\test_commerce_system.py:12: in commerce_system
    return CommerceSystem(config, reflux_system)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CommerceSystem.__init__() takes 2 positional arguments but 3 were given
___________ ERROR at setup of test_fast_track_consumption_if_needed ___________
tests\unit\systems\test_commerce_system.py:12: in commerce_system
    return CommerceSystem(config, reflux_system)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CommerceSystem.__init__() takes 2 positional arguments but 3 were given
___________________ ERROR at setup of test_inflation_shock ____________________
tests\unit\systems\test_event_system.py:9: in event_system
    return EventSystem(config)
           ^^^^^^^^^^^^^^^^^^^
E   TypeError: EventSystem.__init__() missing 1 required positional argument: 'settlement_system'
___________________ ERROR at setup of test_recession_shock ____________________
tests\unit\systems\test_event_system.py:9: in event_system
    return EventSystem(config)
           ^^^^^^^^^^^^^^^^^^^
E   TypeError: EventSystem.__init__() missing 1 required positional argument: 'settlement_system'
_______________________ ERROR at setup of test_no_event _______________________
tests\unit\systems\test_event_system.py:9: in event_system
    return EventSystem(config)
           ^^^^^^^^^^^^^^^^^^^
E   TypeError: EventSystem.__init__() missing 1 required positional argument: 'settlement_system'
_______ ERROR at setup of test_firm_production_decision_with_employees ________
tests\unit\test_firm_decision_engine.py:27: in sample_firm
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
----------------------------- Captured log setup ------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
___________ ERROR at setup of test_firm_no_production_if_target_met ___________
tests\unit\test_firm_decision_engine.py:27: in sample_firm
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
----------------------------- Captured log setup ------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
__________ ERROR at setup of test_firm_hiring_decision_no_inventory ___________
tests\unit\test_firm_decision_engine.py:27: in sample_firm
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
----------------------------- Captured log setup ------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
______________ ERROR at setup of test_firm_profit_history_update ______________
tests\unit\test_firm_profit.py:22: in mock_firm
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_____________ ERROR at setup of test_firm_revenue_expenses_reset ______________
tests\unit\test_firm_profit.py:22: in mock_firm
    firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
______________ ERROR at setup of test_ai_creates_purchase_order _______________
tests\unit\test_household_ai.py:31: in setup_test_environment
    with open(goods_json_path, "r", encoding="utf-8") as f:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory: 'C:\\coding\\economics\\tests\\data\\goods.json'

During handling of the above exception, another exception occurred:
tests\unit\test_household_ai.py:34: in setup_test_environment
    pytest.fail(f"Error: {goods_json_path} not found.")
E   Failed: Error: C:\coding\economics\tests\data\goods.json not found.
___________ ERROR at setup of test_ai_evaluates_consumption_options ___________
tests\unit\test_household_ai.py:31: in setup_test_environment
    with open(goods_json_path, "r", encoding="utf-8") as f:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory: 'C:\\coding\\economics\\tests\\data\\goods.json'

During handling of the above exception, another exception occurred:
tests\unit\test_household_ai.py:34: in setup_test_environment
    pytest.fail(f"Error: {goods_json_path} not found.")
E   Failed: Error: C:\coding\economics\tests\data\goods.json not found.
================================== FAILURES ===================================
_____ TestDecisionEngineIntegration.test_firm_places_sell_order_for_food ______
tests\integration\test_decision_engine_integration.py:167: in test_firm_places_sell_order_for_food
    orders, _ = firm.make_decision(
    ^^^^^^^^^
E   TypeError: cannot unpack non-iterable Mock object
----------------------------- Captured log setup ------------------------------
INFO     Market_goods_market:order_book_market.py:47 OrderBookMarket goods_market initialized.
___ TestDecisionEngineIntegration.test_household_places_buy_order_for_food ____
tests\integration\test_decision_engine_integration.py:203: in test_household_places_buy_order_for_food
    orders, _ = household.make_decision(
    ^^^^^^^^^
E   TypeError: cannot unpack non-iterable Mock object
----------------------------- Captured log setup ------------------------------
INFO     Market_goods_market:order_book_market.py:47 OrderBookMarket goods_market initialized.
__________ TestDecisionEngineIntegration.test_household_sells_labor ___________
tests\integration\test_decision_engine_integration.py:240: in test_household_sells_labor
    orders, _ = household.make_decision(
    ^^^^^^^^^
E   TypeError: cannot unpack non-iterable Mock object
----------------------------- Captured log setup ------------------------------
INFO     Market_labor_market:order_book_market.py:47 OrderBookMarket labor_market initialized.
_____________ TestDecisionEngineIntegration.test_firm_buys_labor ______________
tests\integration\test_decision_engine_integration.py:273: in test_firm_buys_labor
    orders, _ = firm.make_decision(
    ^^^^^^^^^
E   TypeError: cannot unpack non-iterable Mock object
----------------------------- Captured log setup ------------------------------
INFO     Market_labor_market:order_book_market.py:47 OrderBookMarket labor_market initialized.
______________ test_grant_bailout_loan_success_and_covenant_type ______________
tests\integration\test_finance_bailout.py:81: in test_grant_bailout_loan_success_and_covenant_type
    loan_dto = finance_system.grant_bailout_loan(mock_firm, loan_amount)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FinanceSystem.grant_bailout_loan() missing 1 required positional argument: 'current_tick'
____________ test_grant_bailout_loan_insufficient_government_funds ____________
tests\integration\test_finance_bailout.py:129: in test_grant_bailout_loan_insufficient_government_funds
    loan_dto = finance_system.grant_bailout_loan(mock_firm, loan_amount)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FinanceSystem.grant_bailout_loan() missing 1 required positional argument: 'current_tick'
_________________ TestGenerationalWealthAudit.test_run_audit __________________
tests\integration\test_generational_wealth_audit.py:29: in test_run_audit
    self.audit.run_audit(agents, 100)
simulation\systems\generational_wealth_audit.py:45: in run_audit
    log_message = f"GENERATIONAL_WEALTH_AUDIT | Tick: {current_tick} | Total Wealth: {total_wealth:.2f} | Total Agents: {total_agents}\n"
                                                                                     ^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported format string passed to MagicMock.__format__
_________________ TestGovernmentAILogic.test_calculate_reward _________________
tests\integration\test_government_ai_logic.py:91: in test_calculate_reward
    reward = self.ai.calculate_reward()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\government_ai.py:126: in calculate_reward
    debt = max(0.0, -assets)
           ^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'float'
______________ TestGovernmentAILogic.test_get_state_debt_crisis _______________
tests\integration\test_government_ai_logic.py:73: in test_get_state_debt_crisis
    state = self.ai._get_state()
            ^^^^^^^^^^^^^^^^^^^^
simulation\ai\government_ai.py:76: in _get_state
    debt = max(0.0, -assets)
           ^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'float'
________ TestGovernmentAILogic.test_get_state_high_inflation_low_unemp ________
tests\integration\test_government_ai_logic.py:58: in test_get_state_high_inflation_low_unemp
    state = self.ai._get_state()
            ^^^^^^^^^^^^^^^^^^^^
simulation\ai\government_ai.py:76: in _get_state
    debt = max(0.0, -assets)
           ^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'float'
_________________ TestGovernmentAILogic.test_get_state_ideal __________________
tests\integration\test_government_ai_logic.py:39: in test_get_state_ideal
    state = self.ai._get_state()
            ^^^^^^^^^^^^^^^^^^^^
simulation\ai\government_ai.py:76: in _get_state
    debt = max(0.0, -assets)
           ^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'float'
__________________ TestGovernmentAILogic.test_learning_flow ___________________
tests\integration\test_government_ai_logic.py:103: in test_learning_flow
    action = self.ai.decide_policy(current_tick=1)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\government_ai.py:147: in decide_policy
    state = self._get_state()
            ^^^^^^^^^^^^^^^^^
simulation\ai\government_ai.py:76: in _get_state
    debt = max(0.0, -assets)
           ^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'float'
______________ test_invest_infrastructure_generates_transaction _______________
tests\integration\test_government_finance.py:61: in test_invest_infrastructure_generates_transaction
    txs = government.invest_infrastructure(current_tick=1, reflux_system=reflux)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: Government.invest_infrastructure() got an unexpected keyword argument 'reflux_system'
------------------------------ Captured log call ------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 10000.0
_ TestGovernmentFiscalIntegration.test_make_policy_decision_updates_fiscal_policy _
tests\integration\test_government_fiscal_integration.py:68: in test_make_policy_decision_updates_fiscal_policy
    assert isinstance(snapshot, MarketSnapshotDTO)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\typing.py:3235: in __subclasscheck__
    raise TypeError('TypedDict does not support instance and class checks')
E   TypeError: TypedDict does not support instance and class checks
------------------------------ Captured log call ------------------------------
INFO     simulation.agents.government:government.py:144 Government 1 initialized with assets: 0.0
INFO     simulation.utils.shadow_logger:shadow_logger.py:36 ShadowLogger initialized at logs/shadow_hand_stage1.csv
ERROR    simulation.utils.shadow_logger:shadow_logger.py:59 ShadowLogger write failed: unsupported format string passed to MagicMock.__format__
_______________________ test_infrastructure_investment ________________________
tests\integration\test_government_fiscal_policy.py:47: in test_infrastructure_investment
    gov = Government(id=1, initial_assets=6000.0, config_module=config_mock)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\agents\government.py:44: in __init__
    self.fiscal_policy: FiscalPolicyDTO = self.fiscal_policy_manager.determine_fiscal_stance(
modules\government\components\fiscal_policy_manager.py:46: in determine_fiscal_stance
    survival_cost = basic_food_price * daily_consumption
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for *: 'float' and 'Mock'
_______________ TestPhase20Integration.test_immigration_trigger _______________
tests\integration\test_phase20_integration.py:44: in test_immigration_trigger
    manager = ImmigrationManager(mock_config)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ImmigrationManager.__init__() missing 1 required positional argument: 'settlement_system'
_________ TestPhase20Integration.test_immigration_conditions_not_met __________
tests\integration\test_phase20_integration.py:77: in test_immigration_conditions_not_met
    manager = ImmigrationManager(mock_config)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ImmigrationManager.__init__() missing 1 required positional argument: 'settlement_system'
___________ TestPhase20Integration.test_system2_housing_cost_renter ___________
tests\integration\test_phase20_integration.py:117: in test_system2_housing_cost_renter
    result = planner.project_future(1, market_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\system2_planner.py:111: in project_future
    if simulated_wealth < 0 and bankruptcy_tick is None:
       ^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'MagicMock' and 'int'
___________ TestPhase20Integration.test_system2_housing_cost_owner ____________
tests\integration\test_phase20_integration.py:161: in test_system2_housing_cost_owner
    result = planner.project_future(1, market_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\system2_planner.py:111: in project_future
    if simulated_wealth < 0 and bankruptcy_tick is None:
       ^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'MagicMock' and 'int'
_______________ TestPhase20Scaffolding.test_gender_distribution _______________
tests\integration\test_phase20_scaffolding.py:57: in test_gender_distribution
    h = Household(**{**self.household_args, "id": i})
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
_______ TestPhase20Scaffolding.test_household_attributes_initialization _______
tests\integration\test_phase20_scaffolding.py:35: in test_household_attributes_initialization
    h1 = Household(**self.household_args)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
______ TestPhase20Scaffolding.test_system2_planner_projection_bankruptcy ______
tests\integration\test_phase20_scaffolding.py:131: in test_system2_planner_projection_bankruptcy
    result = planner.project_future(0, market_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\system2_planner.py:111: in project_future
    if simulated_wealth < 0 and bankruptcy_tick is None:
       ^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'MagicMock' and 'int'
_______ TestPhase20Scaffolding.test_system2_planner_projection_positive _______
tests\integration\test_phase20_scaffolding.py:94: in test_system2_planner_projection_positive
    result = planner.project_future(0, market_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\system2_planner.py:111: in project_future
    if simulated_wealth < 0 and bankruptcy_tick is None:
       ^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'MagicMock' and 'int'
______ TestPhase23Production.test_production_boost_from_fertilizer_tech _______
tests\integration\test_phase23_production.py:72: in test_production_boost_from_fertilizer_tech
    assert qty_B > 0
E   assert 0.0 > 0
------------------------------ Captured log call ------------------------------
ERROR    simulation.components.production_department:production_department.py:158 FIRM_CRASH_PREVENTED | Firm 1: '>' not supported between instances of 'MagicMock' and 'MagicMock'
ERROR    simulation.components.production_department:production_department.py:158 FIRM_CRASH_PREVENTED | Firm 2: '>' not supported between instances of 'MagicMock' and 'MagicMock'
___________ TestPhase29Depression.test_depression_scenario_triggers ___________
tests\integration\test_phase29_depression.py:250: in test_depression_scenario_triggers
    self.sim.run_tick()
simulation\engine.py:79: in run_tick
    self.tick_orchestrator.run_tick(injectable_sensory_dto)
simulation\orchestration\tick_orchestrator.py:62: in run_tick
    sim_state = phase.execute(sim_state)
                ^^^^^^^^^^^^^^^^^^^^^^^^
simulation\orchestration\phases.py:250: in execute
    mp_policy = self.mp_manager.determine_monetary_stance(macro_snapshot)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
modules\government\components\monetary_policy_manager.py:56: in determine_monetary_stance
    target_rate = max(0.0, taylor_rate)
                  ^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'float'
---------------------------- Captured stdout call -----------------------------
WARNING: Scenario not loaded from file during test setup. Manually enabling.
Initial State: Base Rate=0.05, Tax Rate=0.2
Running until tick 50...
------------------------------ Captured log call ------------------------------
INFO     simulation.agents.central_bank:central_bank.py:44 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:200 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:82 Bank 10 initialized. Assets: 0.00
INFO     simulation.agents.government:government.py:144 Government 11 initialized with assets: 0.0
INFO     Market_food:order_book_market.py:47 OrderBookMarket food initialized.
INFO     Market_electronics:order_book_market.py:47 OrderBookMarket electronics initialized.
INFO     Market_labor:order_book_market.py:47 OrderBookMarket labor initialized.
INFO     simulation.loan_market:loan_market.py:28 LoanMarket loan_market initialized with bank service: 10
INFO     Market_housing:order_book_market.py:47 OrderBookMarket housing initialized.
INFO     TestPhase29:initializer.py:311 GENESIS | Starting initial wealth distribution...
INFO     TestPhase29:initializer.py:322 GENESIS | Distributed wealth to 1 agents.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 100 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 103 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:91 BOOTSTRAPPER | Injected 50.0 units to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:99 BOOTSTRAPPER | Injected 95000.00 capital to Firm 104 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:105 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     TestPhase29:initializer.py:337 Initial baseline money supply established: 555,000.00
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 5 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 103
INFO     simulation.systems.bootstrapper:bootstrapper.py:50 BOOTSTRAPPER | Force-assigned 0 workers to Firm 104
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Total force-assigned workers: 5
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
INFO     TestPhase29:initializer.py:440 Simulation run started with run_id: test_run
INFO     TestPhase29:initializer.py:445 Simulation fully initialized with run_id: test_run
INFO     TestPhase29:tick_orchestrator.py:45 MONEY_SUPPLY_BASELINE | Baseline Money Supply set to: 555000.00
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 1 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 1
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 1
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 1
INFO     Market_housing:order_book_market.py:175 Starting order matching for items: ['unit_4', 'unit_3', 'unit_7', 'unit_6', 'unit_1', 'unit_8', 'unit_5', 'unit_9', 'unit_2']
INFO     Market_housing:order_book_market.py:175 Starting order matching for items: ['unit_4', 'unit_3', 'unit_7', 'unit_6', 'unit_1', 'unit_8', 'unit_5', 'unit_9', 'unit_2']
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 5000.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 1 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 549970.00, Expected: 555000.00, Delta: -5030.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 1 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 2 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 2
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 2
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 2
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 2
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4990.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 2 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 545940.00, Expected: 555000.00, Delta: -9060.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 2 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 3 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 3
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 3
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 3
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 3
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 3 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 541910.00, Expected: 555000.00, Delta: -13090.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 3 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 4 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 4
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 4
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 4
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 4
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 4
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 4 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 537880.00, Expected: 555000.00, Delta: -17120.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 4 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 5 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 5
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 5
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 5
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 5
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 5
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 5 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 533850.00, Expected: 555000.00, Delta: -21150.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 5 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 6 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 6
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 6
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 6
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 6
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 6
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 6 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 529820.00, Expected: 555000.00, Delta: -25180.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 6 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 7 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 7
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 7
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 7
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 7
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 7
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 7 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 525790.00, Expected: 555000.00, Delta: -29210.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 7 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 8 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 8
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 8
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 8
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 8
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 8
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 8 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 521760.00, Expected: 555000.00, Delta: -33240.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 8 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 9 ---
INFO     Market_food:order_book_market.py:165 No items to match in market food at tick 9
INFO     Market_electronics:order_book_market.py:165 No items to match in market electronics at tick 9
INFO     Market_labor:order_book_market.py:165 No items to match in market labor at tick 9
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 9
INFO     Market_housing:order_book_market.py:165 No items to match in market housing at tick 9
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 0
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 1
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 2
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 3
INFO     simulation.agents.government:government.py:424 HOUSEHOLD_SUPPORT | Generated support tx of 8.00 to 4
INFO     modules.finance.system:system.py:244 BOND_SYNC_SUCCESS | Raised 4030.00 from 10
INFO     simulation.agents.government:government.py:624 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 5 households.
ERROR    TestPhase29:settlement_system.py:97 SETTLEMENT_FAIL | Insufficient funds for 11 to transfer 1000.00 to 4. Assets: 960.00. Memo: infrastructure_spending
INFO     TestPhase29:crisis_monitor.py:84 CRISIS_MONITOR | Tick: 9 | Safe: 0, Gray: 0, Distress: 5 | Active: 5
WARNING  TestPhase29:tick_orchestrator.py:142 MONEY_SUPPLY_CHECK | Current: 517730.00, Expected: 555000.00, Delta: -37270.0000
INFO     TestPhase29:tick_orchestrator.py:70 --- Ending Tick 9 ---
INFO     TestPhase29:tick_orchestrator.py:52 --- Starting Tick 10 ---
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:22 Running imitation learning cycle at tick 10.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:34 Imitation Cycle: 1 Role Models, 1 Learners.
INFO     simulation.agents.central_bank:central_bank.py:173 CB_RATE_UPDATE | Rate: 5.00% -> 5.25% (Infl: 0.00%, Gap: 0.00%, PotGDP: 0.00)
_____________ TestPortfolioIntegration.test_bank_deposit_balance ______________
tests\integration\test_portfolio_integration.py:55: in test_bank_deposit_balance
    bank = Bank(1, 100000.0)
           ^^^^^^^^^^^^^^^^^
E   TypeError: Bank.__init__() missing 1 required positional argument: 'config_manager'
_______________________ test_household_engine_uses_dto ________________________
tests\integration\test_purity_gate.py:164: in test_household_engine_uses_dto
    orders, vector = engine._make_decisions_internal(context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\decisions\ai_driven_household_engine.py:146: in _make_decisions_internal
    orders.extend(self.labor_manager.decide_labor(labor_ctx))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\decisions\household\labor_manager.py:35: in decide_labor
    if (market_avg_wage > household.current_wage * quit_threshold or
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'MagicMock' and 'MagicMock'
------------------------------ Captured log call ------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
________________ TestWO048Breeding.test_scenario_b_high_income ________________
tests\integration\test_wo048_breeding.py:61: in test_scenario_b_high_income
    self.assertFalse(decision, "High income agent should reject reproduction due to opportunity cost.")
E   AssertionError: True is not false : High income agent should reject reproduction due to opportunity cost.
_________________________ test_bootstrapper_injection _________________________
tests\integration\test_wo058_production.py:87: in test_bootstrapper_injection
    households = [Household(id=i, talent=talent, goods_data=[], initial_assets=1000, initial_needs={'survival': 0}, decision_engine=Mock(spec=AIDrivenHouseholdDecisionEngine), value_orientation="test", personality=Personality.MISER, config_module=mock_config) for i in range(1)]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
__________________________ test_production_kickstart __________________________
tests\integration\test_wo058_production.py:117: in test_production_kickstart
    households = [Household(id=i, talent=talent, goods_data=[], initial_assets=1000, initial_needs={'survival': 0}, decision_engine=Mock(spec=AIDrivenHouseholdDecisionEngine), value_orientation="test", personality=Personality.MISER, config_module=mock_config) for i in range(1)]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
___________ TestDoubleEntry.test_bailout_loan_generates_transaction ___________
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:958: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'add_liability' to have been called once. Called 0 times.

During handling of the above exception, another exception occurred:
tests\unit\modules\finance\test_double_entry.py:129: in test_bailout_loan_generates_transaction
    self.mock_firm.finance.add_liability.assert_called_once()
E   AssertionError: Expected 'add_liability' to have been called once. Called 0 times.
_ TestFiscalPolicyManager.test_determine_fiscal_stance_calculates_survival_cost_correctly _
tests\unit\modules\government\components\test_fiscal_policy_manager.py:40: in test_determine_fiscal_stance_calculates_survival_cost_correctly
    assert b1.ceiling == 10.0
E   assert 5.0 == 10.0
E    +  where 5.0 = TaxBracketDTO(floor=0.0, rate=0.0, ceiling=5.0).ceiling
____________ TestEconComponent.test_update_perceived_prices_basic _____________
tests\unit\modules\household\test_econ_component.py:29: in test_update_perceived_prices_basic
    econ = EconComponent(mock_owner, mock_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: EconComponent() takes no arguments
________ TestEconComponent.test_update_perceived_prices_hyperinflation ________
tests\unit\modules\household\test_econ_component.py:58: in test_update_perceived_prices_hyperinflation
    econ = EconComponent(mock_owner, mock_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: EconComponent() takes no arguments
_______________ test_newborn_receives_initial_needs_from_config _______________
tests\unit\systems\test_demographic_manager_newborn.py:130: in test_newborn_receives_initial_needs_from_config
    assert len(new_children) == 1
E   assert 0 == 1
E    +  where 0 = len([])
___________________ TestInheritanceManager.test_even_split ____________________
tests\unit\systems\test_inheritance_manager.py:57: in test_even_split
    assert len(calls) == 2
E   assert 0 == 2
E    +  where 0 = len([])
------------------------------ Captured log call ------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 10000.00
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=10000, RE=0, Stock=1000 -> Total=11000. Tax=0
__________________ TestInheritanceManager.test_uneven_split ___________________
tests\unit\systems\test_inheritance_manager.py:95: in test_uneven_split
    assert len(heir_calls) == 2
E   assert 0 == 2
E    +  where 0 = len([])
------------------------------ Captured log call ------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 10000.01
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=10000, RE=0, Stock=1010 -> Total=11010. Tax=0
_________________ TestInheritanceManager.test_multiple_heirs __________________
tests\unit\systems\test_inheritance_manager.py:132: in test_multiple_heirs
    assert amounts == [33.33, 33.33, 33.34]
E   AssertionError: assert [] == [33.33, 33.33, 33.34]
E     
E     Right contains 3 more items, first extra item: 33.33
E     
E     Full diff:
E     + []
E     - [
E     -     33.33,...
E     
E     ...Full output truncated (3 lines hidden), use '-vv' to show
------------------------------ Captured log call ------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:35 INHERITANCE_START | Processing death for Household 1. Assets: 100.00
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:65 ESTATE_VALUATION | Agent 1: Cash=100, RE=0, Stock=100 -> Total=200. Tax=0
________ TestMAManager.test_execute_bankruptcy_records_loss_in_ledger _________
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:990: in assert_called_once_with
    raise AssertionError(msg)
E   AssertionError: Expected 'record_liquidation_loss' to be called once. Called 0 times.

During handling of the above exception, another exception occurred:
tests\unit\systems\test_ma_manager.py:49: in test_execute_bankruptcy_records_loss_in_ledger
    mock_settlement_system.record_liquidation_loss.assert_called_once_with(
E   AssertionError: Expected 'record_liquidation_loss' to be called once. Called 0 times.
------------------------------ Captured log call ------------------------------
INFO     MAManager:ma_manager.py:229 BANKRUPTCY | Firm 999 liquidated. Cash Remaining: 1,000.00.
_______________ TestMinistryOfEducation.test_budget_constraints _______________
tests\unit\systems\test_ministry_of_education.py:133: in test_budget_constraints
    self.assertEqual(promoted_count, 10)
E   AssertionError: 0 != 10
____ TestMinistryOfEducation.test_run_public_education_basic_grant_legacy _____
tests\unit\systems\test_ministry_of_education.py:46: in test_run_public_education_basic_grant_legacy
    self.assertEqual(households[0].education_level, 1)
E   AssertionError: 0 != 1
__ TestMinistryOfEducation.test_run_public_education_basic_grant_settlement ___
tests\unit\systems\test_ministry_of_education.py:67: in test_run_public_education_basic_grant_settlement
    self.ministry.run_public_education(households, self.mock_government, 1,
E   TypeError: MinistryOfEducation.run_public_education() got an unexpected keyword argument 'reflux_system'
__ TestMinistryOfEducation.test_run_public_education_scholarship_settlement ___
tests\unit\systems\test_ministry_of_education.py:102: in test_run_public_education_scholarship_settlement
    self.ministry.run_public_education(households, self.mock_government, 1,
E   TypeError: MinistryOfEducation.run_public_education() got an unexpected keyword argument 'reflux_system'
__________ TestTechnologyManager.test_unlock_and_visionary_adoption ___________
tests\unit\systems\test_technology_manager.py:53: in test_unlock_and_visionary_adoption
    assert tech.is_unlocked
E   AssertionError: assert False
E    +  where False = TechNode(id='TECH_AGRI_CHEM_01', name='Chemical Fertilizer (Haber-Bosch)', sector='FOOD', multiplier=<MagicMock name='mock.TECH_FERTILIZER_MULTIPLIER' id='2329996007408'>, cost_threshold=<MagicMock name='mock.TECH_UNLOCK_COST_THRESHOLD' id='2329996010768'>, diffusion_rate=0.1, is_unlocked=False).is_unlocked
_______________ TestTechnologyManager.test_diffusion_over_time ________________
tests\unit\systems\test_technology_manager.py:83: in test_diffusion_over_time
    assert manager.has_adopted(1, tech_id)
E   AssertionError: assert False
E    +  where False = has_adopted(1, 'TECH_AGRI_CHEM_01')
E    +    where has_adopted = <simulation.systems.technology_manager.TechnologyManager object at 0x0000021E7FA6E8D0>.has_adopted
__________________________ test_adjust_price_tactic ___________________________
tests\unit\test_ai_driven_firm_engine.py:66: in test_adjust_price_tactic
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
----------------------------- Captured log setup ------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:38 AIDrivenFirmDecisionEngine initialized with CorporateManager.
____________ TestAITrainingManager.test_get_top_performing_agents _____________
tests\unit\test_ai_training_manager.py:73: in test_get_top_performing_agents
    top_performers = training_manager._get_top_performing_agents(percentile=0.2)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\ai_training_manager.py:116: in _get_top_performing_agents
    sorted_agents = sorted(self.agents, key=lambda x: x.assets, reverse=True)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'Mock' and 'Mock'
----------------------------- Captured log setup ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
___________ TestAITrainingManager.test_run_imitation_learning_cycle ___________
tests\unit\test_ai_training_manager.py:114: in test_run_imitation_learning_cycle
    training_manager.run_imitation_learning_cycle(100)
simulation\ai\ai_training_manager.py:29: in run_imitation_learning_cycle
    under_performers = self._get_under_performing_agents()
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\ai_training_manager.py:127: in _get_under_performing_agents
    sorted_agents = sorted(self.agents, key=lambda x: x.assets) # Ascending
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'Mock' and 'Mock'
----------------------------- Captured log setup ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
------------------------------ Captured log call ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:22 Running imitation learning cycle at tick 100.
_______________________ test_get_top_performing_agents ________________________
tests\unit\test_ai_training_manager_new.py:41: in test_get_top_performing_agents
    top_agents = manager._get_top_performing_agents(percentile=0.2)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\ai_training_manager.py:116: in _get_top_performing_agents
    sorted_agents = sorted(self.agents, key=lambda x: x.assets, reverse=True)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'Mock' and 'Mock'
------------------------------ Captured log call ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
______________________ test_get_under_performing_agents _______________________
tests\unit\test_ai_training_manager_new.py:51: in test_get_under_performing_agents
    under_agents = manager._get_under_performing_agents(percentile=0.3)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\ai_training_manager.py:127: in _get_under_performing_agents
    sorted_agents = sorted(self.agents, key=lambda x: x.assets) # Ascending
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'Mock' and 'Mock'
------------------------------ Captured log call ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
________________________ test_clone_and_mutate_q_table ________________________
tests\unit\test_ai_training_manager_new.py:73: in test_clone_and_mutate_q_table
    manager._clone_and_mutate_q_table(source, target)
simulation\ai\ai_training_manager.py:150: in _clone_and_mutate_q_table
    for item_id, source_manager in source_ai.q_consumption.items():
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'Mock' object is not iterable
------------------------------ Captured log call ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
________________________ test_clone_from_fittest_agent ________________________
tests\unit\test_ai_training_manager_new.py:95: in test_clone_from_fittest_agent
    manager.clone_from_fittest_agent(target)
simulation\ai\ai_training_manager.py:46: in clone_from_fittest_agent
    fittest_agent = max(self.agents, key=lambda x: x.assets)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '>' not supported between instances of 'Mock' and 'Mock'
------------------------------ Captured log call ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
______________________ test_run_imitation_learning_cycle ______________________
tests\unit\test_ai_training_manager_new.py:107: in test_run_imitation_learning_cycle
    manager.run_imitation_learning_cycle(current_tick=1000)
simulation\ai\ai_training_manager.py:24: in run_imitation_learning_cycle
    top_performers = self._get_top_performing_agents()
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
simulation\ai\ai_training_manager.py:116: in _get_top_performing_agents
    sorted_agents = sorted(self.agents, key=lambda x: x.assets, reverse=True)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '<' not supported between instances of 'Mock' and 'Mock'
------------------------------ Captured log call ------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:18 AITrainingManager initialized.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:22 Running imitation learning cycle at tick 1000.
_____ TestFirmDecisionEngine.test_make_decisions_overstock_reduces_target _____
tests\unit\test_firm_decision_engine_new.py:153: in test_make_decisions_overstock_reduces_target
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
___ TestFirmDecisionEngine.test_make_decisions_understock_increases_target ____
tests\unit\test_firm_decision_engine_new.py:175: in test_make_decisions_understock_increases_target
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
__ TestFirmDecisionEngine.test_make_decisions_target_within_bounds_no_change __
tests\unit\test_firm_decision_engine_new.py:197: in test_make_decisions_target_within_bounds_no_change
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
______ TestFirmDecisionEngine.test_make_decisions_target_min_max_bounds _______
tests\unit\test_firm_decision_engine_new.py:215: in test_make_decisions_target_min_max_bounds
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
_____ TestFirmDecisionEngine.test_make_decisions_price_adjusts_overstock ______
tests\unit\test_firm_decision_engine_new.py:244: in test_make_decisions_price_adjusts_overstock
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
_____ TestFirmDecisionEngine.test_make_decisions_price_adjusts_understock _____
tests\unit\test_firm_decision_engine_new.py:275: in test_make_decisions_price_adjusts_understock
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
________ TestFirmDecisionEngine.test_make_decisions_sell_order_details ________
tests\unit\test_firm_decision_engine_new.py:296: in test_make_decisions_sell_order_details
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
___________ TestFirmDecisionEngine.test_make_decisions_hires_labor ____________
tests\unit\test_firm_decision_engine_new.py:331: in test_make_decisions_hires_labor
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
_____ TestFirmDecisionEngine.test_make_decisions_does_not_hire_when_full ______
tests\unit\test_firm_decision_engine_new.py:364: in test_make_decisions_does_not_hire_when_full
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
________ TestFirmDecisionEngine.test_make_decisions_fires_excess_labor ________
tests\unit\test_firm_decision_engine_new.py:402: in test_make_decisions_fires_excess_labor
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
______ TestFirmDecisionEngine.test_sales_aggressiveness_impact_on_price _______
tests\unit\test_firm_decision_engine_new.py:426: in test_sales_aggressiveness_impact_on_price
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
__________________ TestFirmDecisionEngine.test_rd_investment __________________
tests\unit\test_firm_decision_engine_new.py:460: in test_rd_investment
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
________________ TestFirmDecisionEngine.test_capex_investment _________________
tests\unit\test_firm_decision_engine_new.py:484: in test_capex_investment
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
________________ TestFirmDecisionEngine.test_dividend_setting _________________
tests\unit\test_firm_decision_engine_new.py:511: in test_dividend_setting
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'firm'
________ TestHouseholdAIConsumption.test_ai_chooses_consumption_tactic ________
tests\unit\test_household_ai_consumption.py:56: in test_ai_chooses_consumption_tactic
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'household'
_ TestHouseholdDecisionEngineMultiGood.test_make_decisions_with_evaluate_consumption_options _
tests\unit\test_household_decision_engine_multi_good.py:173: in test_make_decisions_with_evaluate_consumption_options
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'household'
----------------------------- Captured log setup ------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
_ TestHouseholdDecisionEngineMultiGood.test_make_decisions_with_participate_labor_market _
tests\unit\test_household_decision_engine_multi_good.py:200: in test_make_decisions_with_participate_labor_market
    context = DecisionContext(
E   TypeError: DecisionContext.__init__() got an unexpected keyword argument 'household'
----------------------------- Captured log setup ------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
________ TestHouseholdMarginalUtility.test_high_price_prevents_buying _________
tests\unit\test_household_marginal_utility.py:56: in setUp
    self.household = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
------------------------------ Captured log call ------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
_______ TestHouseholdMarginalUtility.test_marginal_utility_stops_buying _______
tests\unit\test_household_marginal_utility.py:56: in setUp
    self.household = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
------------------------------ Captured log call ------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:45 AIDrivenHouseholdDecisionEngine initialized (Modularized).
_______________ TestHouseholdSystem2.test_household_integration _______________
tests\unit\test_household_system2.py:79: in test_household_integration
    household = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
___________ TestMarketingROI.test_budget_decrease_on_low_efficiency ___________
tests\unit\test_marketing_roi.py:16: in setUp
    self.firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
__________ TestMarketingROI.test_budget_increase_on_high_efficiency ___________
tests\unit\test_marketing_roi.py:16: in setUp
    self.firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
______________ TestMarketingROI.test_budget_stable_on_saturation ______________
tests\unit\test_marketing_roi.py:16: in setUp
    self.firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
____________________ TestMarketingROI.test_first_tick_skip ____________________
tests\unit\test_marketing_roi.py:16: in setUp
    self.firm = Firm(
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
_________________ TestSocioTechDynamics.test_appliance_effect _________________
tests\unit\test_socio_tech.py:19: in setUp
    self.male = self._create_agent(1, "M")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\unit\test_socio_tech.py:32: in _create_agent
    agent = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
_______________ TestSocioTechDynamics.test_scenario_a_dark_ages _______________
tests\unit\test_socio_tech.py:19: in setUp
    self.male = self._create_agent(1, "M")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\unit\test_socio_tech.py:32: in _create_agent
    agent = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
____________ TestSocioTechDynamics.test_scenario_b_techno_optimism ____________
tests\unit\test_socio_tech.py:19: in setUp
    self.male = self._create_agent(1, "M")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\unit\test_socio_tech.py:32: in _create_agent
    agent = Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
_________ TestStockMarketInitialization.test_update_reference_prices __________
tests\unit\test_stock_market.py:87: in test_update_reference_prices
    mock_firm.get_book_value_per_share.return_value = 80.0
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'types.SimpleNamespace' object has no attribute 'get_book_value_per_share'
____________________________ test_ipo_share_count _____________________________
tests\unit\test_stock_market.py:284: in test_ipo_share_count
    firm = Firm(id=1, initial_capital=10000, initial_liquidity_need=100, specialization="food",
E   TypeError: Firm.__init__() got an unexpected keyword argument 'config_module'
______________________________ test_seo_triggers ______________________________
tests\unit\test_stock_market.py:317: in test_seo_triggers
    order = firm_decision_engine.corporate_manager._attempt_secondary_offering(firm, context)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CorporateManager' object has no attribute '_attempt_secondary_offering'
__________________________ test_household_investment __________________________
tests\unit\test_stock_market.py:358: in test_household_investment
    household.talent.max_potential = {"labor": 10}
    ^^^^^^^^^^^^^^^^
E   AttributeError: 'types.SimpleNamespace' object has no attribute 'talent'
__________________ TestTaxIncidence.test_firm_payer_scenario __________________
tests\unit\test_tax_incidence.py:93: in test_firm_payer_scenario
    h = self._create_household(1, 1000.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\unit\test_tax_incidence.py:44: in _create_household
    return Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
_______________ TestTaxIncidence.test_household_payer_scenario ________________
tests\unit\test_tax_incidence.py:74: in test_household_payer_scenario
    h = self._create_household(1, 1000.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\unit\test_tax_incidence.py:44: in _create_household
    return Household(
E   TypeError: Household.__init__() missing 1 required positional argument: 'config_dto'
============================== warnings summary ===============================
tests/unit/agents/test_government.py::test_collect_tax_delegation
  C:\coding\economics\tests\unit\agents\test_government.py:84: DeprecationWarning: Government.collect_tax is deprecated. Use tax_agency.collect_tax() and government.record_revenue() instead.
    env["government"].collect_tax(amount, tax_type, source_id, current_tick)

tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success
  C:\coding\economics\tests\unit\test_tax_collection.py:119: DeprecationWarning: Government.collect_tax is deprecated. Use tax_agency.collect_tax() and government.record_revenue() instead.
    collected = gov.collect_tax(amount, "test_tax", payer, current_tick=1)

tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_failure
  C:\coding\economics\tests\unit\test_tax_collection.py:137: DeprecationWarning: Government.collect_tax is deprecated. Use tax_agency.collect_tax() and government.record_revenue() instead.
    collected = gov.collect_tax(amount, "test_tax", payer, current_tick=1)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:127: Refactoring needed: tests private method on non-existent rule_based_engine
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:133: Refactoring needed: tests private method on non-existent rule_based_engine
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:139: Refactoring needed: tests private method on non-existent rule_based_engine
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:145: Refactoring needed: tests private method on non-existent rule_based_engine
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:151: Refactoring needed: tests private method on non-existent rule_based_engine
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:157: Refactoring needed: tests private method on non-existent rule_based_engine
SKIPPED [1] tests\unit\test_household_decision_engine_multi_good.py:217: Refactoring needed: tests private method on non-existent rule_based_engine
ERROR tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision
ERROR tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision
ERROR tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation
ERROR tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init
ERROR tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation
ERROR tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance
ERROR tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference
ERROR tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference
ERROR tests/integration/test_engine.py::TestSimulation::test_simulation_initialization
ERROR tests/integration/test_engine.py::TestSimulation::test_prepare_market_data_basic
ERROR tests/integration/test_engine.py::TestSimulation::test_prepare_market_data_no_goods_market
ERROR tests/integration/test_engine.py::TestSimulation::test_prepare_market_data_with_best_ask
ERROR tests/integration/test_engine.py::TestSimulation::test_process_transactions_goods_trade
ERROR tests/integration/test_engine.py::TestSimulation::test_process_transactions_labor_trade
ERROR tests/integration/test_engine.py::TestSimulation::test_process_transactions_research_labor_trade
ERROR tests/integration/test_engine.py::TestSimulation::test_process_transactions_invalid_agents
ERROR tests/integration/test_engine.py::test_handle_agent_lifecycle_removes_inactive_agents
ERROR tests/integration/test_fiscal_policy.py::test_potential_gdp_ema_convergence
ERROR tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_recession
ERROR tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_boom
ERROR tests/integration/test_fiscal_policy.py::test_debt_ceiling_enforcement
ERROR tests/integration/test_fiscal_policy.py::test_calculate_income_tax_uses_current_rate
ERROR tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts
ERROR tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_success
ERROR tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_failure
ERROR tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_legacy
ERROR tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_no_settlement_system
ERROR tests/integration/test_tick_normalization.py::TestTickNormalization::test_run_tick_executes_phases
ERROR tests/unit/corporate/test_corporate_orchestrator.py::test_orchestration
ERROR tests/unit/corporate/test_finance_manager.py::test_dividend_logic - Typ...
ERROR tests/unit/corporate/test_finance_manager.py::test_debt_logic_borrow - ...
ERROR tests/unit/corporate/test_hr_manager.py::test_hiring_logic - TypeError:...
ERROR tests/unit/corporate/test_operations_manager.py::test_rd_logic - TypeEr...
ERROR tests/unit/corporate/test_operations_manager.py::test_automation_investment
ERROR tests/unit/corporate/test_sales_manager.py::test_pricing_logic - TypeEr...
ERROR tests/unit/systems/test_commerce_system.py::test_execute_consumption_and_leisure
ERROR tests/unit/systems/test_commerce_system.py::test_fast_track_consumption_if_needed
ERROR tests/unit/systems/test_event_system.py::test_inflation_shock - TypeErr...
ERROR tests/unit/systems/test_event_system.py::test_recession_shock - TypeErr...
ERROR tests/unit/systems/test_event_system.py::test_no_event - TypeError: Eve...
ERROR tests/unit/test_firm_decision_engine.py::test_firm_production_decision_with_employees
ERROR tests/unit/test_firm_decision_engine.py::test_firm_no_production_if_target_met
ERROR tests/unit/test_firm_decision_engine.py::test_firm_hiring_decision_no_inventory
ERROR tests/unit/test_firm_profit.py::test_firm_profit_history_update - TypeE...
ERROR tests/unit/test_firm_profit.py::test_firm_revenue_expenses_reset - Type...
ERROR tests/unit/test_household_ai.py::test_ai_creates_purchase_order - Faile...
ERROR tests/unit/test_household_ai.py::test_ai_evaluates_consumption_options
FAILED tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_places_sell_order_for_food
FAILED tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_places_buy_order_for_food
FAILED tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_sells_labor
FAILED tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_buys_labor
FAILED tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type
FAILED tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds
FAILED tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit
FAILED tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_calculate_reward
FAILED tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_debt_crisis
FAILED tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_high_inflation_low_unemp
FAILED tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_ideal
FAILED tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_learning_flow
FAILED tests/integration/test_government_finance.py::test_invest_infrastructure_generates_transaction
FAILED tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_make_policy_decision_updates_fiscal_policy
FAILED tests/integration/test_government_fiscal_policy.py::test_infrastructure_investment
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_trigger
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_conditions_not_met
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_renter
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_owner
FAILED tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_gender_distribution
FAILED tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_household_attributes_initialization
FAILED tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_bankruptcy
FAILED tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_positive
FAILED tests/integration/test_phase23_production.py::TestPhase23Production::test_production_boost_from_fertilizer_tech
FAILED tests/integration/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers
FAILED tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance
FAILED tests/integration/test_purity_gate.py::test_household_engine_uses_dto
FAILED tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_b_high_income
FAILED tests/integration/test_wo058_production.py::test_bootstrapper_injection
FAILED tests/integration/test_wo058_production.py::test_production_kickstart
FAILED tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_bailout_loan_generates_transaction
FAILED tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_calculates_survival_cost_correctly
FAILED tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_basic
FAILED tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_hyperinflation
FAILED tests/unit/systems/test_demographic_manager_newborn.py::test_newborn_receives_initial_needs_from_config
FAILED tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_even_split
FAILED tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_uneven_split
FAILED tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_multiple_heirs
FAILED tests/unit/systems/test_ma_manager.py::TestMAManager::test_execute_bankruptcy_records_loss_in_ledger
FAILED tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_budget_constraints
FAILED tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_legacy
FAILED tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_settlement
FAILED tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_scholarship_settlement
FAILED tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_unlock_and_visionary_adoption
FAILED tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_diffusion_over_time
FAILED tests/unit/test_ai_driven_firm_engine.py::test_adjust_price_tactic - T...
FAILED tests/unit/test_ai_training_manager.py::TestAITrainingManager::test_get_top_performing_agents
FAILED tests/unit/test_ai_training_manager.py::TestAITrainingManager::test_run_imitation_learning_cycle
FAILED tests/unit/test_ai_training_manager_new.py::test_get_top_performing_agents
FAILED tests/unit/test_ai_training_manager_new.py::test_get_under_performing_agents
FAILED tests/unit/test_ai_training_manager_new.py::test_clone_and_mutate_q_table
FAILED tests/unit/test_ai_training_manager_new.py::test_clone_from_fittest_agent
FAILED tests/unit/test_ai_training_manager_new.py::test_run_imitation_learning_cycle
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_overstock_reduces_target
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_understock_increases_target
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_target_within_bounds_no_change
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_target_min_max_bounds
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_price_adjusts_overstock
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_price_adjusts_understock
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_sell_order_details
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_hires_labor
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_does_not_hire_when_full
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_make_decisions_fires_excess_labor
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_sales_aggressiveness_impact_on_price
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_rd_investment
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_capex_investment
FAILED tests/unit/test_firm_decision_engine_new.py::TestFirmDecisionEngine::test_dividend_setting
FAILED tests/unit/test_household_ai_consumption.py::TestHouseholdAIConsumption::test_ai_chooses_consumption_tactic
FAILED tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_make_decisions_with_evaluate_consumption_options
FAILED tests/unit/test_household_decision_engine_multi_good.py::TestHouseholdDecisionEngineMultiGood::test_make_decisions_with_participate_labor_market
FAILED tests/unit/test_household_marginal_utility.py::TestHouseholdMarginalUtility::test_high_price_prevents_buying
FAILED tests/unit/test_household_marginal_utility.py::TestHouseholdMarginalUtility::test_marginal_utility_stops_buying
FAILED tests/unit/test_household_system2.py::TestHouseholdSystem2::test_household_integration
FAILED tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_decrease_on_low_efficiency
FAILED tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_increase_on_high_efficiency
FAILED tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation
FAILED tests/unit/test_marketing_roi.py::TestMarketingROI::test_first_tick_skip
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism
FAILED tests/unit/test_stock_market.py::TestStockMarketInitialization::test_update_reference_prices
FAILED tests/unit/test_stock_market.py::test_ipo_share_count - TypeError: Fir...
FAILED tests/unit/test_stock_market.py::test_seo_triggers - AttributeError: '...
FAILED tests/unit/test_stock_market.py::test_household_investment - Attribute...
FAILED tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario
FAILED tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario
====== 86 failed, 273 passed, 7 skipped, 3 warnings, 47 errors in 9.62s =======
