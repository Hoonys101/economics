# Mission WO-057-A: AdaptiveGovBrain & Robust Sensing

## 1. Overview
Implemented `AdaptiveGovBrain` using a Propose-Filter-Execute architecture, replacing the legacy Q-learning logic for the "AI_ADAPTIVE" mode. Enhanced `SensorySystem` to provide Gini index and segmented approval ratings (Low vs High Asset).

## 2. Technical Implementation
- **Brain**: `AdaptiveGovBrain` (modules/government/policies/adaptive_gov_brain.py) proposes policy actions based on party-specific utility functions (RED vs BLUE).
- **Sensing**: `GovernmentStateDTO` extended with `gini_index`, `approval_low_asset`, `approval_high_asset`. `SensorySystem` updated to calculate these using `InequalityTracker`.
- **Policy**: `AdaptiveGovPolicy` wrapper implements `IGovernmentPolicy` and integrates the Brain with the Government agent, respecting the `PolicyLockoutManager`.
- **Registry**: Constants introduced in `modules/system/constants.py` to address TD-209.

## 3. Technical Debt (TD) Recorded
- **Duplicate DTOs**: `GovernmentStateDTO` exists in both `simulation/dtos/api.py` (Sensory) and `modules/government/dtos.py` (Internal). They serve different purposes but the naming collision is dangerous.
- **Phase 33 Asset Complexity**: `SensorySystem` logic for extracting household assets had to handle both `dict` (Phase 33) and `float` (Legacy) structures manually. `InequalityTracker` might need similar robustification if used elsewhere.
- **Heuristic Mental Model**: The brain uses a very simple linear heuristic model (`_predict_outcome`). Future iterations (WO-068?) should improve this with simulation-based lookahead or learned models.

## 4. Insights
- **Utility Driven**: The utility functions allow for clear differentiation between Red (Equality/Welfare) and Blue (Growth/Business) parties without complex RL training.
- **Propose-Filter-Execute**: This pattern makes the government's decision process transparent and debuggable. We can see *why* an action was proposed (utility) and *why* it was rejected (lockout).

## 5. Verification
- Verified code structure and imports.
- `SensorySystem` logic handles empty household lists and missing trackers gracefully.
