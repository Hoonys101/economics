{
  "antigravity": {
    "project": "economics",
    "active_sessions": {
      "8111922141870240162": {
        "title": "WO-083C-P1: Test Migration (LOW Risk)",
        "initial_mission": "# WO-083C-P1: Test Migration Phase 2 - LOW Risk Batch\n\n## ðŸŽ¯ Objective\nMigrate **LOW risk** MEDIUM complexity tests to Golden Fixtures as the first safe batch of WO-083C.\n\n> **Risk Level**: LOW (per `design/gemini_output/audit_wo083c_risk.md`)\n\n---\n\n## ðŸ”¨ Target Tests (2 files)\n\n### 1. `tests/simulation/test_stock_market.py`\n**Current Setup:** Mocks `Config` and `Firm`.\n**Migration:**\n- Replace `Config` mock with `golden_config`.\n- Replace `Firm` mock with `golden_firms[0]`.\n- Use **State Override Pattern** to set `firm.cash` or `firm.shares` for test preconditions.\n\n**Risk:** LOW - Isolated market logic test.\n\n### 2. `tests/api/test_api_extensions.py`\n**Current Setup:** Mocks `Repo`, `Household`, `Firm`, `Market`.\n**Migration:**\n- Replace `Household`/`Firm` mocks with `golden_households[0]` and `golden_firms[0]`.\n- Keep `Repo`/`Market` as lightweight mocks (infrastructure).\n- Make ViewModel logic **defensive** to handle potentially `None` attributes from golden fixtures.\n\n**Risk:** LOW - ViewModel logic test, minimal state dependency.\n\n---\n\n## Migration Pattern\n\n```python\n# Before\n@pytest.fixture\ndef mock_firm():\n    firm = MagicMock(spec=Firm)\n    firm.cash = 1000\n    return firm\n\n# After\ndef test_something(golden_firms):\n    firm = golden_firms[0]\n    firm.cash = 1000  # State Override if needed\n    # Test logic...\n```\n\n---\n\n## Constraints\n\n1. **NO production code changes**.\n2. **State Override Pattern**: Override attributes AFTER loading golden data.\n3. **Preserve test logic**: Do not change assertions.\n\n---\n\n## Verification\n\nRun: `pytest tests/simulation/test_stock_market.py tests/api/test_api_extensions.py -v`\n\nAll tests must pass.\n"
      },
      "11202564815416347618": {
        "title": "WO-083C-P2: Test Migration (MEDIUM Risk)",
        "initial_mission": "# WO-083C-P2: Test Migration Phase 2 - MEDIUM Risk Batch\n\n## ðŸŽ¯ Objective\nMigrate **MEDIUM risk** MEDIUM complexity tests to Golden Fixtures as the second batch of WO-083C.\n\n> **Risk Level**: MEDIUM (per `design/gemini_output/audit_wo083c_risk.md`)\n\n---\n\n## ðŸ”¨ Target Tests (2 files)\n\n### 1. `tests/verification/verify_inheritance.py`\n**Current Setup:** Manually creates `deceased` and `heir` mock households.\n**Migration:**\n- Use `golden_households[0]` (deceased) and `golden_households[1]` (heir).\n- **Pre-test validation**: Assert that selected households have **sufficient and diverse assets** (positive cash, shares, debt) to robustly test wealth transfer logic.\n\n**Risk:** MEDIUM - Tests wealth transfer logic, ensure golden data has sufficient assets.\n\n**Mitigation:**\n```python\ndef test_inheritance(golden_households):\n    deceased = golden_households[0]\n    heir = golden_households[1]\n    \n    # Pre-test validation\n    assert deceased.assets > 0, \"Deceased must have assets\"\n    assert hasattr(deceased, 'portfolio'), \"Deceased must have portfolio\"\n    \n    # Test logic...\n```\n\n### 2. `tests/api/test_dashboard_api.py`\n**Current Setup:** Mocks `Repo`, `Sim`, `Trackers`, `Govt`, `Stock`.\n**Migration:**\n- Replace `mock_households` and `mock_firms` with `golden_households` and `golden_firms`.\n- Keep infrastructure mocks (`Repo`, `Trackers`) as lightweight.\n- **Create golden JSON snapshot**: Save expected API output to `tests/goldens/dashboard_snapshot.json` and compare against it to detect structural regressions.\n\n**Risk:** MEDIUM - Dashboard snapshot test, verify JSON structure compatibility.\n\n**Mitigation:**\n```python\ndef test_dashboard_snapshot(golden_households, golden_firms):\n    # Generate API response\n    response = dashboard_api.get_snapshot(golden_households, golden_firms)\n    \n    # Load expected snapshot\n    with open(\"tests/goldens/dashboard_snapshot.json\") as f:\n        expected = json.load(f)\n    \n    assert response == expected, \"Dashboard structure changed\"\n```\n\n---\n\n## Migration Pattern\n\nSame as P1: Load golden data â†’ Override state if needed â†’ Run test.\n\n---\n\n## Constraints\n\n1. **NO production code changes**.\n2. **Pre-test validation** for `verify_inheritance.py`.\n3. **Golden snapshot** for `test_dashboard_api.py`.\n\n---\n\n## Verification\n\nRun: `pytest tests/verification/verify_inheritance.py tests/api/test_dashboard_api.py -v`\n\nAll tests must pass.\n"
      }
    },
    "completed_sessions": {
      "6338045545797855725": "WO-083A: Golden Fixture Generation - MERGED 2026-01-20",
      "11560612815746517359": "WO-083A: Golden Fixture Generation - MERGED 2026-01-20",
      "1503508227423661963": "WO-083B: Test Migration Phase 1 - MERGED 2026-01-20",
      "16754935071282510850": "WO-081: Bank Interface Segregation - MERGED 2026-01-19",
      "15965755950889487504": "WO-082: Golden Loader Infrastructure - MERGED 2026-01-19",
      "17536225839445736015": "Phase-29_The_Great_Depression - COMPLETED 2026-01-19",
      "5597989927571483094": "TD-043/044/045 God Class Refactoring - MERGED 2026-01-18",
      "14826170066369985962": "TD-008 Finance Upgrade - MERGED 2026-01-16",
      "2244231495852370011": "WO-079 Config Automation v2 - MERGED 2026-01-16",
      "12543922642187456551": "TD-045 Firm God Class - COMPLETED 2026-01-16",
      "4889257989211040620": "TD-044 Household God Class - COMPLETED 2026-01-16",
      "5283327958326335498": "TD-024 Post-Fix Test - COMPLETED 2026-01-16",
      "8465436477342866436": "WO-037 Simulation Cockpit - MERGED 2026-01-16",
      "15007179683109829611": "WO-060 - MERGED 2026-01-15",
      "7095675393629273222": "WO-064: Banking Credit Engine - MERGED 2026-01-15",
      "10296031762289509515": "WO-065: Monetary Integrity & Suture - MERGED 2026-01-15",
      "14018014647659914271": "WO-062: Macro-Linked Portfolio - MERGED 2026-01-15",
      "9343683714945509652": "WO-066: High-Fidelity Sensory Architecture - MERGED 2026-01-15",
      "9719318674264407147": "WO-067: High-Fidelity Reaction Test - MERGED 2026-01-15",
      "3778947626343557354": "WO-057-Refine Shock Therapy (Retry) - MERGED 2026-01-14",
      "11626928342509996952": "TD-014: Government SoC Refactoring - MERGED 2026-01-14",
      "10078451815509526740": "WO-058-Retry: Operation Defibrillator - MERGED 2026-01-14",
      "4444007150223365139": "WO-058 Economic CPR - MERGED 2026-01-14"
    }
  }
}