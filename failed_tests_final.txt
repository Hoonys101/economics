
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision ERROR [  0%]
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision ERROR [  0%]
tests/integration/scenarios/diagnosis/test_api_contract.py::test_api_contract_placeholder PASSED [  0%]
tests/integration/scenarios/diagnosis/test_dashboard_contract.py::test_dashboard_snapshot_structure 
-------------------------------- live log call --------------------------------
ERROR    simulation.orchestration.persistence_bridge:persistence_bridge.py:54 âŒ [Persistence] Failed to save snapshot: Object of type MagicMock is not JSON serializable
FAILED                                                                   [  0%]
tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation ERROR [  0%]
tests/integration/scenarios/diagnosis/test_market_mechanics.py::test_order_book_matching 
------------------------------- live log setup --------------------------------
INFO     Market_basic_food:order_book_market.py:97 OrderBookMarket basic_food initialized.
-------------------------------- live log call --------------------------------
INFO     Market_basic_food:order_book_market.py:252 Starting order matching for items: ['basic_food']
PASSED                                                                   [  0%]
tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init ERROR [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation ERROR [  1%]
tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance ERROR [  1%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference ERROR [  1%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference ERROR [  1%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_hyperinflation_trigger 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'hyperinflation' at Tick 10!
INFO     simulation.systems.event_system:event_system.py:63   -> Injected 50% cash into all households.
PASSED                                                                   [  1%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_deflation_asset_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'deflation' at Tick 20!
INFO     simulation.systems.event_system:event_system.py:87   -> Reduced all agent assets by 20%.
PASSED                                                                   [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_consumption_pessimism PASSED [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_supply_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'supply_shock' at Tick 30!
INFO     simulation.systems.event_system:event_system.py:98   -> Applied productivity shock (0.5) to Firm 101 (Type: Farm).
PASSED                                                                   [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_panic_selling_order_generation PASSED [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_hoarding_amplification 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:consumption_manager.py:32 SURVIVAL_CHECK | Need: 50.0, Threshold: 0.8, Food: food
PASSED                                                                   [  2%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_debt_repayment_priority 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:consumption_manager.py:32 SURVIVAL_CHECK | Need: 0, Threshold: 0.8, Food: food
INFO     simulation.decisions.ai_driven_household_engine:asset_manager.py:72 DEBT_AVERSION | Household 1 prioritizing repayment: 550.0
PASSED                                                                   [  2%]
tests/integration/test_app.py::test_app_placeholder PASSED               [  3%]
tests/integration/test_atomic_settlement.py::test_settle_atomic_success PASSED [  3%]
tests/integration/test_atomic_settlement.py::test_settle_atomic_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:468 SETTLEMENT_ROLLBACK | Deposit failed for 3. Rolling back atomic batch. Error: Bank Frozen
PASSED                                                                   [  3%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_pause_resume 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: PAUSE | Payload: {}
INFO     simulation.engine:engine.py:96 Executing command: PAUSE | {}
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: RESUME | Payload: {}
INFO     simulation.engine:engine.py:96 Executing command: RESUME | {}
PASSED                                                                   [  3%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_set_base_rate 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: SET_BASE_RATE | Payload: {'rate': 0.15}
INFO     simulation.engine:engine.py:96 Executing command: SET_BASE_RATE | {'rate': 0.15}
INFO     simulation.engine:engine.py:109 MANUAL INTERVENTION: Base Rate set to 0.15
PASSED                                                                   [  3%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_set_tax_rate 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: SET_TAX_RATE | Payload: {'tax_type': 'corporate', 'rate': 0.25}
INFO     simulation.engine:engine.py:96 Executing command: SET_TAX_RATE | {'tax_type': 'corporate', 'rate': 0.25}
INFO     simulation.engine:engine.py:118 MANUAL INTERVENTION: corporate Tax Rate set to 0.25
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: SET_TAX_RATE | Payload: {'tax_type': 'income', 'rate': 0.15}
INFO     simulation.engine:engine.py:96 Executing command: SET_TAX_RATE | {'tax_type': 'income', 'rate': 0.15}
INFO     simulation.engine:engine.py:118 MANUAL INTERVENTION: income Tax Rate set to 0.15
PASSED                                                                   [  3%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_places_sell_order_for_food 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_places_buy_order_for_food 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_sells_labor 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_buys_labor 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_goods_market_matching_integration 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
-------------------------------- live log call --------------------------------
INFO     Market_goods_market:order_book_market.py:252 Starting order matching for items: ['food']
PASSED                                                                   [  4%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_labor_market_matching_integration 
------------------------------- live log setup --------------------------------
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     Market_labor_market:order_book_market.py:252 Starting order matching for items: ['labor']
PASSED                                                                   [  4%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type FAILED [  5%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds FAILED [  5%]
tests/integration/test_firm_decision_scenarios.py::test_growth_scenario_with_golden_firm 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:40 AIDrivenFirmDecisionEngine initialized with CorporateManager.
FAILED                                                                   [  5%]
tests/integration/test_fiscal_integrity.py::test_infrastructure_investment_generates_transactions_and_issues_bonds 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
INFO     simulation.bank:bank.py:91 Bank 2 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
INFO     modules.finance.system:system.py:276 BOND_SYNC_SUCCESS | Raised 4000.00 from 2 for Gov 1
INFO     modules.government.components.infrastructure_manager:infrastructure_manager.py:90 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 1 households.
PASSED                                                                   [  5%]
tests/integration/test_fiscal_integrity.py::test_education_spending_generates_transactions_only 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100.0})
INFO     simulation.bank:bank.py:91 Bank 2 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [  5%]
tests/integration/test_fiscal_policy.py::test_potential_gdp_ema_convergence 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
-------------------------------- live log call --------------------------------
INFO     simulation.utils.shadow_logger:shadow_logger.py:36 ShadowLogger initialized at logs/shadow_hand_stage1.csv
PASSED                                                                   [  5%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_recession 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
PASSED                                                                   [  5%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_boom 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
PASSED                                                                   [  6%]
tests/integration/test_fiscal_policy.py::test_debt_ceiling_enforcement 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
-------------------------------- live log call --------------------------------
WARNING  simulation.agents.government:government.py:438 WELFARE_FAILED | Insufficient funds even after bond issuance attempt. Needed: 100.0, Has: 0.0
PASSED                                                                   [  6%]
tests/integration/test_fiscal_policy.py::test_calculate_income_tax_uses_current_rate 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
PASSED                                                                   [  6%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit FAILED [  6%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit_no_agents PASSED [  6%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_calculate_reward PASSED [  6%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_debt_crisis PASSED [  7%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_high_inflation_low_unemp PASSED [  7%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_ideal PASSED [  7%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_learning_flow PASSED [  7%]
tests/integration/test_government_finance.py::test_invest_infrastructure_generates_transaction 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 10000.0})
INFO     modules.government.components.infrastructure_manager:infrastructure_manager.py:90 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 1000.0. Distributed to 1 households.
PASSED                                                                   [  7%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_calculate_income_tax_uses_fiscal_policy_manager 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [  7%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_make_policy_decision_updates_fiscal_policy 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [  8%]
tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
PASSED                                                                   [  8%]
tests/integration/test_government_fiscal_policy.py::test_infrastructure_investment 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 6000.0})
INFO     modules.government.components.infrastructure_manager:infrastructure_manager.py:90 INFRASTRUCTURE_PENDING | Level 1 initiated. Cost: 5000.0. Distributed to 1 households.
PASSED                                                                   [  8%]
tests/integration/test_government_integration.py::test_government_execute_social_policy_tax_and_welfare 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_decision_engine_taylor_rule PASSED [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_execution_engine_state_update PASSED [  8%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_orchestrator_integration 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [  9%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_social_policy_execution 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_success 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
FAILED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_failure 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
PASSED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_legacy 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
FAILED                                                                   [  9%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_no_settlement_system 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
-------------------------------- live log call --------------------------------
ERROR    simulation.agents.government:government.py:228 Government has no SettlementSystem linked. Cannot collect tax.
PASSED                                                                   [  9%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_ant_high_rate PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_grasshopper_high_rate PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_at_neutral_rate PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_with_inflation_expectation PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_consumption_aggressiveness_reduction PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_dsr_penalty_applied PASSED [ 10%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_subsistence_constraint_bypasses_reduction PASSED [ 11%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_hr_service_severance PASSED [ 11%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_hr_service_unpaid_wages PASSED [ 11%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_tax_service PASSED [ 11%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_asset_rich_cash_poor_liquidation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 800.00.
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 800.00, Total Claims: 500.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 1 fully paid. Remaining cash: 300.00
PASSED                                                                   [ 11%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_severance_priority_over_shareholders 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 5000.00, Total Claims: 5615.38
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:133 LIQUIDATION_WATERFALL | Tier 1 partially paid (Factor: 0.89). Cash exhausted.
PASSED                                                                   [ 11%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_waterfall_tiers 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 10000.00, Total Claims: 7003.85
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 1 fully paid. Remaining cash: 7996.15
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 2 fully paid. Remaining cash: 2996.15
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:164 LIQUIDATION_WATERFALL | Tier 5 (Equity) distributed 1498.08 USD and foreign assets: {} to shareholders.
PASSED                                                                   [ 11%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_credit_creation_expansion PASSED [ 12%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_credit_destruction_contraction PASSED [ 12%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_internal_transfers_are_neutral PASSED [ 12%]
tests/integration/test_multicurrency_liquidation.py::TestMultiCurrencyLiquidation::test_foreign_currency_distribution_to_shareholders 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 0.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:164 LIQUIDATION_WATERFALL | Tier 5 (Equity) distributed 0.00 USD and foreign assets: {} to shareholders.
FAILED                                                                   [ 12%]
tests/integration/test_omo_system.py::test_execute_omo_purchase_order_creation PASSED [ 12%]
tests/integration/test_omo_system.py::test_execute_omo_sale_order_creation PASSED [ 12%]
tests/integration/test_omo_system.py::test_process_omo_purchase_transaction PASSED [ 13%]
tests/integration/test_omo_system.py::test_process_omo_sale_transaction PASSED [ 13%]
tests/integration/test_persistence_purity.py::test_analytics_system_purity PASSED [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_trigger 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.immigration_manager:immigration_manager.py:55 IMMIGRATION_TRIGGERED | Pop: 50, Unemp: 1.00%, Vacancies: 10. Influx: 5
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
FAILED                                                                   [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_conditions_not_met PASSED [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_renter FAILED [ 13%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_owner FAILED [ 14%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_gender_distribution PASSED [ 14%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_household_attributes_initialization PASSED [ 14%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_bankruptcy PASSED [ 14%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_positive PASSED [ 14%]
tests/integration/test_phase23_production.py::TestPhase23Production::test_production_boost_from_fertilizer_tech FAILED [ 14%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 100000.0})
FAILED                                                                   [ 15%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_logic PASSED [ 15%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_risk_averse PASSED [ 15%]
tests/integration/test_public_manager_integration.py::TestPublicManagerIntegration::test_full_liquidation_cycle 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:79 Processing bankruptcy for Agent 99 at tick 1. Recovering inventory.
INFO     PublicManager:public_manager.py:87 Recovered 10.0 of gold.
INFO     PublicManager:public_manager.py:159 Generated liquidation order for 10.0 of gold at 100.0.
ERROR    simulation.systems.transaction_manager:transaction_manager.py:87 PUBLIC_MANAGER transaction failed: argument of type 'float' is not iterable
FAILED                                                                   [ 15%]
tests/integration/test_purity_gate.py::test_decision_context_purity PASSED [ 15%]
tests/integration/test_purity_gate.py::test_standalone_firm_engine_uses_dto 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:33 StandaloneRuleBasedFirmDecisionEngine initialized.
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:101 Firm 1 RuleBased: Need more labor, adjusting wages/hiring.
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:214 Firm 1 RuleBased Price Adj: Selling 50.0 of wood at price 10.00
INFO     simulation.decisions.standalone_rule_based_firm_engine:standalone_rule_based_firm_engine.py:140 Firm 1 RuleBased: Adjusting price and selling.
PASSED                                                                   [ 15%]
tests/integration/test_purity_gate.py::test_household_engine_uses_dto 
-------------------------------- live log call --------------------------------
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
INFO     simulation.decisions.ai_driven_household_engine:consumption_manager.py:32 SURVIVAL_CHECK | Need: 0, Threshold: 0.8, Food: <MagicMock name='mock.config.primary_survival_good_id' id='2229355182272'>
PASSED                                                                   [ 16%]
tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_1_standard_inheritance 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [ 16%]
tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_2_escheatment 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [ 16%]
tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_3_insolvency 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [ 16%]
tests/integration/test_shareholder_registry.py::test_registry_basic_operations PASSED [ 16%]
tests/integration/test_shareholder_registry.py::test_stock_market_integration PASSED [ 16%]
tests/integration/test_td194_integration.py::TestTD194Integration::test_household_make_decision_integrity PASSED [ 16%]
tests/integration/test_td194_integration.py::TestTD194Integration::test_firm_make_decision_integrity PASSED [ 17%]
tests/integration/test_thoughtstream_logger.py::test_logger_functionality PASSED [ 17%]
tests/integration/test_tick_normalization.py::TestTickNormalization::test_run_tick_executes_phases FAILED [ 17%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_a_pre_modern PASSED [ 17%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_b_high_income PASSED [ 17%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_c_low_income PASSED [ 17%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_d_middle_income PASSED [ 18%]
tests/integration/test_wo058_production.py::test_bootstrapper_injection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 100
WARNING  simulation.systems.bootstrapper:bootstrapper.py:108 BOOTSTRAPPER | Legacy injection of 99500.00 to Firm 100 (No SettlementSystem).
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 101
WARNING  simulation.systems.bootstrapper:bootstrapper.py:108 BOOTSTRAPPER | Legacy injection of 97500.00 to Firm 101 (No SettlementSystem).
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 1 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 1 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 1
PASSED                                                                   [ 18%]
tests/integration/test_wo058_production.py::test_production_kickstart 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 100
WARNING  simulation.systems.bootstrapper:bootstrapper.py:108 BOOTSTRAPPER | Legacy injection of 97000.00 to Firm 100 (No SettlementSystem).
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 1 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 1 workers to Firm 100
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 1
PASSED                                                                   [ 18%]
tests/integration/test_wo167_grace_protocol.py::TestGraceProtocol::test_firm_grace_protocol PASSED [ 18%]
tests/integration/test_wo167_grace_protocol.py::TestGraceProtocol::test_household_grace_protocol PASSED [ 18%]
tests/modules/finance/test_exchange_engine.py::TestCurrencyExchangeEngine::test_convert PASSED [ 18%]
tests/modules/finance/test_exchange_engine.py::TestCurrencyExchangeEngine::test_load_parity PASSED [ 19%]
tests/modules/finance/test_exchange_engine.py::TestCurrencyExchangeEngine::test_missing_config PASSED [ 19%]
tests/modules/governance/test_system_command_processor.py::test_set_corporate_tax_rate 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
INFO     modules.governance.processor:processor.py:66 SYSTEM_COMMAND | Corporate Tax Rate: 0.2 -> 0.25
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_set_income_tax_rate 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
INFO     modules.governance.processor:processor.py:75 SYSTEM_COMMAND | Income Tax Rate: 0.1 -> 0.15
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_set_base_interest_rate 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_INTEREST_RATE
INFO     modules.governance.processor:processor.py:98 SYSTEM_COMMAND | CB Base Rate: 0.05 -> 0.03
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_ignore_unknown_tax_type 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
WARNING  modules.governance.processor:processor.py:78 SYSTEM_COMMAND | Unknown tax type: invalid
PASSED                                                                   [ 19%]
tests/modules/governance/test_system_command_processor.py::test_missing_government 
-------------------------------- live log call --------------------------------
INFO     modules.governance.processor:processor.py:27 SYSTEM_COMMAND | Executing SET_TAX_RATE
ERROR    modules.governance.processor:processor.py:46 SYSTEM_COMMAND | Government agent is None.
PASSED                                                                   [ 20%]
tests/modules/government/test_government_integration.py::test_execute_social_policy_integration 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 20%]
tests/modules/government/test_government_integration.py::test_execute_social_policy_tax_and_welfare 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 20%]
tests/modules/government/test_tax_service.py::test_collect_wealth_tax PASSED [ 20%]
tests/modules/government/test_tax_service.py::test_collect_wealth_tax_below_threshold PASSED [ 20%]
tests/modules/government/test_welfare_manager.py::test_run_welfare_check_unemployment PASSED [ 20%]
tests/modules/government/test_welfare_manager.py::test_run_welfare_check_stimulus 
-------------------------------- live log call --------------------------------
WARNING  modules.government.welfare.manager:manager.py:111 STIMULUS_TRIGGERED | GDP Drop Detected. Requests generated.
PASSED                                                                   [ 21%]
tests/modules/government/test_welfare_manager.py::test_provide_firm_bailout PASSED [ 21%]
tests/modules/government/test_welfare_manager.py::test_run_welfare_check_with_firm PASSED [ 21%]
tests/modules/household/test_political_component.py::test_initialize_state_growth_oriented PASSED [ 21%]
tests/modules/household/test_political_component.py::test_initialize_state_conservative PASSED [ 21%]
tests/modules/household/test_political_component.py::test_update_opinion_match PASSED [ 21%]
tests/modules/household/test_political_component.py::test_update_opinion_mismatch_and_discontent PASSED [ 22%]
tests/modules/household/test_political_component.py::test_trust_damper PASSED [ 22%]
tests/modules/household/test_political_integration.py::test_household_update_political_opinion_integration FAILED [ 22%]
tests/orchestration/test_state_synchronization.py::TestStateSynchronization::test_transient_queue_accumulation PASSED [ 22%]
tests/orchestration/test_state_synchronization.py::TestStateSynchronization::test_reassignment_guardrail PASSED [ 22%]
tests/scenarios/test_leviathan_emergence.py::TestLeviathanEmergence::test_scapegoat_emergence 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
WARNING  simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:89 Failed to load adaptive policy bounds from config: not enough values to unpack (expected 2, got 0). Using defaults.
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 30 (Duration: 20)
INFO     simulation.agents.government:government.py:413 ADVISOR_FIRED | Fired KEYNESIAN advisor. Locked tags: ['KEYNESIAN_FISCAL'] for 20 ticks.
INFO     simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:117 POLICY_EXECUTE | Fire Advisor (Scapegoat) (U=0.1840)
PASSED                                                                   [ 22%]
tests/scenarios/test_leviathan_emergence.py::TestLeviathanEmergence::test_paradox_support_emergence PASSED [ 22%]
tests/scenarios/test_leviathan_emergence.py::TestLeviathanEmergence::test_political_business_cycle_emergence 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
WARNING  simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:89 Failed to load adaptive policy bounds from config: not enough values to unpack (expected 2, got 0). Using defaults.
INFO     simulation.policies.adaptive_gov_policy:adaptive_gov_policy.py:117 POLICY_EXECUTE | Tax Cut (Corp) (U=0.4875)
PASSED                                                                   [ 23%]
tests/simulation/test_bank_decomposition.py::test_bank_initialization 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 23%]
tests/simulation/test_bank_decomposition.py::test_grant_loan_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 23%]
tests/simulation/test_bank_decomposition.py::test_run_tick_defaults 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
-------------------------------- live log call --------------------------------
WARNING  simulation.bank:bank.py:491 Bank: EventBus not injected. Loan default consequences (penalties, seizure) skipped.
FAILED                                                                   [ 23%]
tests/simulation/test_firm_refactor.py::test_firm_initialization_states PASSED [ 23%]
tests/simulation/test_firm_refactor.py::test_inventory_handler_implementation PASSED [ 23%]
tests/simulation/test_firm_refactor.py::test_command_bus_internal_orders PASSED [ 24%]
tests/simulation/test_firm_refactor.py::test_generate_transactions_delegation PASSED [ 24%]
tests/simulation/test_firm_refactor.py::test_produce_delegation PASSED   [ 24%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_birth_gift_rounding 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.demographic_manager:demographic_manager.py:39 DemographicManager initialized.
PASSED                                                                   [ 24%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_inheritance_dust_sweep PASSED [ 24%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_public_manager_tax_atomicity PASSED [ 24%]
tests/system/test_engine.py::TestSimulation::test_simulation_initialization 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 25%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_basic 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 25%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_no_goods_market 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 25%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_with_best_ask 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 25%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_goods_trade 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 25%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_labor_trade 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 25%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_research_labor_trade 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 26%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_invalid_agents 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 4 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 5 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 4
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 98800.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:52 BOOTSTRAPPER | Force-assigned 0 workers to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 26%]
tests/system/test_engine.py::test_handle_agent_lifecycle_removes_inactive_agents 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     simulation.bank:bank.py:91 Bank 5 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 6 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.loan_market:loan_market.py:35 LoanMarket loan_market initialized with bank service: 5
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 101
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99000.00 capital to Firm 101 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:94 BOOTSTRAPPER | Injected 50.0 units to Firm 102
INFO     simulation.systems.bootstrapper:bootstrapper.py:104 BOOTSTRAPPER | Injected 99500.00 capital to Firm 102 via Settlement.
INFO     simulation.systems.bootstrapper:bootstrapper.py:110 BOOTSTRAPPER | Injected resources into 0 firms.
INFO     simulation.systems.bootstrapper:bootstrapper.py:54 BOOTSTRAPPER | Total force-assigned workers: 0
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.liquidation_handlers:liquidation_handlers.py:95 LIQUIDATION_ASSET_SALE_FAIL | PublicManager failed to pay 250.00 to Agent 102.
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 102 starting liquidation. Assets: 100000.00, Total Claims: 0.00
PASSED                                                                   [ 26%]
tests/system/test_phase29_depression.py::TestPhase29Depression::test_crisis_monitor_logging 
-------------------------------- live log call --------------------------------
INFO     TestPhase29:initializer.py:134 Acquired exclusive lock on simulation.lock
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:269 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:91 Bank 10 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 11 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [ 26%]
tests/system/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers 
-------------------------------- live log call --------------------------------
INFO     TestPhase29:initializer.py:134 Acquired exclusive lock on simulation.lock
INFO     simulation.agents.central_bank:central_bank.py:49 CENTRAL_BANK_INIT | Rate: 5.00%, Target Infl: 2.00%
INFO     TestPhase29:initializer.py:269 GENESIS | Central Bank minted M0: 1,000,000.00
INFO     simulation.bank:bank.py:91 Bank 10 initialized. Assets: defaultdict(<class 'float'>, {'USD': 0.0})
INFO     simulation.agents.government:government.py:152 Government 11 initialized with assets: defaultdict(<class 'float'>, {'USD': 0.0})
FAILED                                                                   [ 26%]
tests/test_ledger_manager.py::test_parse_ledger_standard PASSED          [ 26%]
tests/test_ledger_manager.py::test_archive_resolved_items PASSED         [ 27%]
tests/test_ledger_manager.py::test_register_new_item PASSED              [ 27%]
tests/test_ledger_manager.py::test_sync_with_codebase PASSED             [ 27%]
tests/test_ledger_manager.py::test_parser_resilience PASSED              [ 27%]
tests/test_ledger_manager.py::test_archive_atomicity_failure PASSED      [ 27%]
tests/test_ledger_manager.py::test_get_next_id PASSED                    [ 27%]
tests/test_policy_lockout.py::TestPolicyLockout::test_government_fire_advisor 
-------------------------------- live log call --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 520 (Duration: 20)
INFO     simulation.agents.government:government.py:413 ADVISOR_FIRED | Fired KEYNESIAN advisor. Locked tags: ['KEYNESIAN_FISCAL'] for 20 ticks.
PASSED                                                                   [ 27%]
tests/test_policy_lockout.py::TestPolicyLockout::test_manager_lockout 
-------------------------------- live log call --------------------------------
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 120 (Duration: 20)
INFO     modules.government.components.policy_lockout_manager:policy_lockout_manager.py:33 POLICY_LOCKOUT | Locked KEYNESIAN_FISCAL until tick 130 (Duration: 30)
PASSED                                                                   [ 28%]
tests/test_wo_4_1_protocols.py::test_housing_handler_with_protocol_agent FAILED [ 28%]
tests/test_wo_4_1_protocols.py::test_protocol_compliance PASSED          [ 28%]
tests/test_ws.py::test_websocket_endpoint 
-------------------------------- live log call --------------------------------
INFO     server:server.py:57 Initializing simulation...
INFO     server:server.py:68 Simulation initialized and running. Server is ready.
INFO     server:server.py:37 Starting simulation loop...
ERROR    simulation.orchestration.persistence_bridge:persistence_bridge.py:54 âŒ [Persistence] Failed to save snapshot: Object of type MagicMock is not JSON serializable
INFO     server:server.py:77 Shutting down simulation...
FAILED                                                                   [ 28%]
tests/unit/agents/test_government.py::test_calculate_income_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [ 28%]
tests/unit/agents/test_government.py::test_calculate_corporate_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [ 28%]
tests/unit/agents/test_government.py::test_collect_tax_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [ 29%]
tests/unit/agents/test_government.py::test_run_public_education_delegation 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 100000.0})
PASSED                                                                   [ 29%]
tests/unit/agents/test_government.py::test_deficit_spending_allowed_within_limit 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
PASSED                                                                   [ 29%]
tests/unit/agents/test_government.py::test_deficit_spending_blocked_beyond_limit 
------------------------------- live log setup --------------------------------
INFO     simulation.agents.government:government.py:152 Government 1 initialized with assets: defaultdict(<class 'float'>, {'USD': 1000.0})
-------------------------------- live log call --------------------------------
WARNING  simulation.agents.government:government.py:438 WELFARE_FAILED | Insufficient funds even after bond issuance attempt. Needed: 500.0, Has: 100.0
PASSED                                                                   [ 29%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_execution_order PASSED [ 29%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_unemployed PASSED [ 29%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_add_child PASSED [ 30%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_age_one_tick PASSED [ 30%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_create_offspring_demographics PASSED [ 30%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_get_generational_similarity PASSED [ 30%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_above_threshold FAILED [ 30%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_under_threshold PASSED [ 30%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_initialization PASSED [ 31%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_set_spouse PASSED [ 31%]
tests/unit/components/test_market_component.py::test_choose_best_seller_utility PASSED [ 31%]
tests/unit/components/test_market_component.py::test_choose_best_seller_no_market PASSED [ 31%]
tests/unit/corporate/test_corporate_orchestrator.py::test_orchestration PASSED [ 31%]
tests/unit/corporate/test_financial_strategy.py::test_dividend_logic PASSED [ 31%]
tests/unit/corporate/test_financial_strategy.py::test_debt_logic_borrow PASSED [ 32%]
tests/unit/corporate/test_hr_strategy.py::test_hiring_logic PASSED       [ 32%]
tests/unit/corporate/test_production_strategy.py::test_rd_logic PASSED   [ 32%]
tests/unit/corporate/test_production_strategy.py::test_automation_investment PASSED [ 32%]
tests/unit/corporate/test_sales_manager.py::test_pricing_logic PASSED    [ 32%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_triggered PASSED [ 32%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_insufficient_funds PASSED [ 33%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_cost_plus_fallback PASSED [ 33%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_fire_sale_trigger PASSED [ 33%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_rd_investment 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
PASSED                                                                   [ 33%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_capex_investment 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
PASSED                                                                   [ 33%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_dividend_setting 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 33%]
tests/unit/decisions/test_household_engine_refactor.py::test_engine_execution_parity_smoke PASSED [ 33%]
tests/unit/decisions/test_household_integration_new.py::TestHouseholdIntegrationNew::test_make_decision_integration SKIPPED [ 34%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_hires_labor 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 34%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_does_not_hire_when_full 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 34%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_fires_excess_labor 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 34%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_initialization PASSED [ 34%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_overstock_reduces_target 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 34%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_understock_increases_target 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 35%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_target_within_bounds_no_change 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 35%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_target_min_max_bounds 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 35%]
tests/unit/decisions/test_sales_rules.py::TestSalesRules::test_sales_aggressiveness_impact_on_price 
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
INFO     simulation.decisions.firm.financial_strategy:financial_strategy.py:199 SEO | Firm 1 offering 500.0 shares at 1.00
PASSED                                                                   [ 35%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_clear_market_matching PASSED [ 35%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_settle_matured_loans PASSED [ 35%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_offer_insufficient_reserves PASSED [ 36%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_offer_success PASSED [ 36%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_request PASSED [ 36%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_bank_methods_presence 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 36%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_grant_loan 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 36%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_repay_loan 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 36%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_balance 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 37%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_debt_status 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 37%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_interface_compliance_mypy PASSED [ 37%]
tests/unit/finance/test_credit_scoring.py::test_assess_approved PASSED   [ 37%]
tests/unit/finance/test_credit_scoring.py::test_assess_dti_fail PASSED   [ 37%]
tests/unit/finance/test_credit_scoring.py::test_assess_ltv_fail PASSED   [ 37%]
tests/unit/finance/test_credit_scoring.py::test_assess_unsecured_cap_fail PASSED [ 38%]
tests/unit/finance/test_credit_scoring.py::test_zero_income_fail PASSED  [ 38%]
tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_success PASSED [ 38%]
tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_insufficient_funds 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:303 BAILOUT_DENIED | Government insufficient funds: 100.00 < 5000.00
PASSED                                                                   [ 38%]
tests/unit/finance/test_finance_system_refactor.py::test_grant_bailout_loan_deprecated 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:324 FinanceSystem.grant_bailout_loan is deprecated. Use request_bailout_loan.
PASSED                                                                   [ 38%]
tests/unit/governance/test_judicial_system.py::test_judicial_system_waterfall_full_recovery 
-------------------------------- live log call --------------------------------
INFO     modules.governance.judicial.system:system.py:65 JudicialSystem: Credit frozen for Agent 1 until tick 110.
INFO     modules.governance.judicial.system:system.py:72 JudicialSystem: Applied XP penalty to Agent 1.
PASSED                                                                   [ 38%]
tests/unit/governance/test_judicial_system.py::test_judicial_system_waterfall_partial_recovery_and_restructuring 
-------------------------------- live log call --------------------------------
INFO     modules.governance.judicial.system:system.py:65 JudicialSystem: Credit frozen for Agent 1 until tick 110.
INFO     modules.governance.judicial.system:system.py:72 JudicialSystem: Applied XP penalty to Agent 1.
INFO     modules.governance.judicial.system:system.py:157 JudicialSystem: Transferred 10 shares of Firm 99 from 1 to 2.
WARNING  modules.governance.judicial.system:system.py:187 JudicialSystem: Debt Restructuring Required for Agent 1. Remaining Debt: 850.0
PASSED                                                                   [ 38%]
tests/unit/household/engines/test_budget.py::test_budget_allocation PASSED [ 39%]
tests/unit/household/engines/test_consumption.py::test_consumption_execution PASSED [ 39%]
tests/unit/household/engines/test_lifecycle.py::test_lifecycle_aging PASSED [ 39%]
tests/unit/household/engines/test_lifecycle.py::test_lifecycle_death_check 
-------------------------------- live log call --------------------------------
INFO     modules.household.engines.lifecycle:lifecycle.py:54 BIO_DEATH | Agent 1 died of natural causes at age 100.0
PASSED                                                                   [ 39%]
tests/unit/household/engines/test_needs.py::test_needs_update PASSED     [ 39%]
tests/unit/household/engines/test_social.py::test_social_status_update PASSED [ 39%]
tests/unit/household/engines/test_survival_instinct.py::test_budget_survival_priority PASSED [ 40%]
tests/unit/household/engines/test_survival_instinct.py::test_consumption_survival_instinct PASSED [ 40%]
tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_snapshot_copies_state PASSED [ 40%]
tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_nested_structures PASSED [ 40%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sparse_history_returns_infinite_bounds PASSED [ 40%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sufficient_history_returns_finite_bounds PASSED [ 40%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_no_history_returns_infinite_bounds PASSED [ 41%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_default_config_fallback PASSED [ 41%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_success PASSED [ 41%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_insufficient_down_payment PASSED [ 41%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_loan_rejected PASSED [ 41%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_disbursement_failed PASSED [ 41%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_initialization PASSED [ 42%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_grants_loan 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
INFO     simulation.loan_market:loan_market.py:302 Loan granted to 1 for 100.00. Loan ID: loan_id_123
PASSED                                                                   [ 42%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_with_profile 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
INFO     simulation.loan_market:loan_market.py:302 Loan granted to 1 for 100.00. Loan ID: loan_id_123
PASSED                                                                   [ 42%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_denies_loan 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=LOAN_REQUEST, Item=loan_item, Agent=1, Amount=100
WARNING  simulation.loan_market:loan_market.py:307 Loan denied for 1 for 100.00.
PASSED                                                                   [ 42%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_repayment_processes_repayment 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=REPAYMENT, Item=loan_id_456, Agent=1, Amount=50
INFO     simulation.loan_market:loan_market.py:331 Repayment of 50.00 processed for loan loan_id_456 by 1.
PASSED                                                                   [ 42%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_order_unknown_type_logs_warning 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:270 Order placed: Type=UNKNOWN_TYPE, Item=item, Agent=1, Amount=10
WARNING  simulation.loan_market:loan_market.py:393 Unknown order type: UNKNOWN_TYPE
PASSED                                                                   [ 42%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_success PASSED [ 43%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_ltv 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:89 LOAN_DENIED | LTV 0.90 > 0.8
PASSED                                                                   [ 43%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_dti 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:122 LOAN_DENIED | DTI 0.54 > 0.43
PASSED                                                                   [ 43%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_dti_with_existing_debt 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:122 LOAN_DENIED | DTI 0.47 > 0.43
PASSED                                                                   [ 43%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_stage_mortgage_success PASSED [ 43%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_stage_mortgage_fail_eval 
-------------------------------- live log call --------------------------------
INFO     simulation.loan_market:loan_market.py:89 LOAN_DENIED | LTV 0.90 > 0.8
PASSED                                                                   [ 43%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_initialization PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_buy_order_adds_and_sorts PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_sell_order_adds_and_sorts PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_order_unknown_type_logs_warning PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_full_fill PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_buy_order PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_sell_order PASSED [ 44%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_no_match_price PASSED [ 45%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_multiple_matches PASSED [ 45%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_different_items PASSED [ 45%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_empty_books PASSED [ 45%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_goods PASSED [ 45%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_labor PASSED [ 45%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_empty PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_non_empty PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_empty PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_non_empty PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_empty PASSED [ 46%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_non_empty PASSED [ 46%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_calculation_normal PASSED [ 47%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_calculation_zero_income PASSED [ 47%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_alarm PASSED [ 47%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_csv_logging_structure PASSED [ 47%]
tests/unit/modules/common/config/test_impl.py::test_config_manager_load_and_get PASSED [ 47%]
tests/unit/modules/common/config/test_impl.py::test_config_manager_override 
-------------------------------- live log call --------------------------------
INFO     modules.common.config.impl:impl.py:63 Registered new domain: test_domain
PASSED                                                                   [ 47%]
tests/unit/modules/common/config/test_impl.py::test_legacy_support PASSED [ 48%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_load_yaml PASSED [ 48%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_get_with_default PASSED [ 48%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_hybrid_fallback PASSED [ 48%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_set_value_for_test PASSED [ 48%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_set_policy_rate_valid PASSED [ 48%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_set_policy_rate_invalid PASSED [ 49%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_purchase_success PASSED [ 49%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_sale_success PASSED [ 49%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_failure PASSED [ 49%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_safe_zone PASSED [ 49%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_distress_zone PASSED [ 49%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_zero_assets PASSED [ 50%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_negative_values PASSED [ 50%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_bailout_loan_generates_command PASSED [ 50%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_market_bond_issuance_generates_transaction PASSED [ 50%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_qe_bond_issuance_generates_transaction PASSED [ 50%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_issue_treasury_bonds_calls_settlement_system PASSED [ 50%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_collect_corporate_tax_calls_settlement_system 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:288 FinanceSystem.collect_corporate_tax called. Should be using Transaction Generation.
PASSED                                                                   [ 50%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_risk_premium_calculation PASSED [ 51%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_insufficient_funds_fails_issuance 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:131 BOND_ISSUANCE_FAILED | No buyer found (Bank insufficient funds).
PASSED                                                                   [ 51%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_pass PASSED [ 51%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_fail PASSED [ 51%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_pass PASSED [ 51%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_fail PASSED [ 51%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_market PASSED [ 52%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_qe PASSED [ 52%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_fail 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:131 BOND_ISSUANCE_FAILED | No buyer found (Bank insufficient funds).
PASSED                                                                   [ 52%]
tests/unit/modules/finance/test_system.py::test_bailout_fails_with_insufficient_government_funds 
-------------------------------- live log call --------------------------------
WARNING  modules.finance.system:system.py:303 BAILOUT_DENIED | Government insufficient funds: 100.00 < 500.00
PASSED                                                                   [ 52%]
tests/unit/modules/finance/test_system.py::test_grant_bailout_loan PASSED [ 52%]
tests/unit/modules/finance/test_system.py::test_service_debt_central_bank_repayment PASSED [ 52%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_calculates_survival_cost_correctly PASSED [ 53%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_defaults_if_no_config PASSED [ 53%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_progressive PASSED [ 53%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_zero_or_negative PASSED [ 53%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_equilibrium PASSED [ 53%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_gdp_zero_or_negative PASSED [ 53%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_high_inflation PASSED [ 54%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_missing_data_defaults PASSED [ 54%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_overheating_economy PASSED [ 54%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_recession PASSED [ 54%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_propose_actions_red_party PASSED [ 54%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_propose_actions_blue_party PASSED [ 54%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_candidates_generation PASSED [ 55%]
tests/unit/modules/government/test_politics_system.py::test_enact_new_tax_policy PASSED [ 55%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_basic PASSED [ 55%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_service PASSED [ 55%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_decide_and_consume PASSED [ 55%]
tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_orchestrate_housing_buy PASSED [ 55%]
tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_shadow_wage_update PASSED [ 55%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_basic PASSED [ 56%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_hyperinflation PASSED [ 56%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_add_and_query_record PASSED [ 56%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_query_filtering PASSED [ 56%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_persistence PASSED [ 56%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_process_bankruptcy_event 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:79 Processing bankruptcy for Agent 1 at tick 10. Recovering inventory.
INFO     PublicManager:public_manager.py:87 Recovered 10.0 of apple.
INFO     PublicManager:public_manager.py:87 Recovered 5.0 of banana.
PASSED                                                                   [ 56%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders 
-------------------------------- live log call --------------------------------
INFO     PublicManager:public_manager.py:159 Generated liquidation order for 50.0 of apple at 9.0.
FAILED                                                                   [ 57%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_confirm_sale PASSED [ 57%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_deposit_revenue FAILED [ 57%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_no_signal PASSED [ 57%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_resets_metrics PASSED [ 57%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_financial_entity FAILED [ 57%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_asset_recovery_system PASSED [ 58%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_bankruptcy_processing_id_handling 
-------------------------------- live log call --------------------------------
WARNING  PublicManager:public_manager.py:79 Processing bankruptcy for Agent 99 at tick 1. Recovering inventory.
INFO     PublicManager:public_manager.py:87 Recovered 10.0 of gold.
PASSED                                                                   [ 58%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_liquidation_order_generation_id 
-------------------------------- live log call --------------------------------
INFO     PublicManager:public_manager.py:159 Generated liquidation order for 1.0 of gold at 95.0.
FAILED                                                                   [ 58%]
tests/unit/orchestration/test_command_service.py::test_command_service_initialization PASSED [ 58%]
tests/unit/orchestration/test_command_service.py::test_validate_set_base_rate_valid PASSED [ 58%]
tests/unit/orchestration/test_command_service.py::test_validate_set_base_rate_invalid_type 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:29 Invalid rate type for SET_BASE_RATE: <class 'str'>
PASSED                                                                   [ 58%]
tests/unit/orchestration/test_command_service.py::test_validate_set_base_rate_out_of_bounds 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:32 Rate out of bounds for SET_BASE_RATE: 0.25 (Expected 0.0-0.2)
PASSED                                                                   [ 59%]
tests/unit/orchestration/test_command_service.py::test_validate_set_tax_rate_valid PASSED [ 59%]
tests/unit/orchestration/test_command_service.py::test_validate_set_tax_rate_invalid_type 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:41 Invalid tax_type for SET_TAX_RATE: luxury
PASSED                                                                   [ 59%]
tests/unit/orchestration/test_command_service.py::test_validate_pause_resume_step PASSED [ 59%]
tests/unit/orchestration/test_command_service.py::test_enqueue_valid_command 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: PAUSE | Payload: {}
PASSED                                                                   [ 59%]
tests/unit/orchestration/test_command_service.py::test_enqueue_invalid_command 
-------------------------------- live log call --------------------------------
WARNING  simulation.orchestration.command_service:command_service.py:32 Rate out of bounds for SET_BASE_RATE: 1.5 (Expected 0.0-0.2)
WARNING  simulation.orchestration.command_service:command_service.py:73 Command rejected due to validation failure: CockpitCommand(type='SET_BASE_RATE', payload={'rate': 1.5})
PASSED                                                                   [ 59%]
tests/unit/orchestration/test_command_service.py::test_pop_commands 
-------------------------------- live log call --------------------------------
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: PAUSE | Payload: {}
INFO     simulation.orchestration.command_service:command_service.py:71 Command enqueued: RESUME | Payload: {}
PASSED                                                                   [ 60%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_execution PASSED [ 60%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_execution_fallback PASSED [ 60%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_no_settlement_system PASSED [ 60%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_system_no_method PASSED [ 60%]
tests/unit/sagas/test_orchestrator.py::test_submit_saga 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga test-saga-uuid submitted.
PASSED                                                                   [ 60%]
tests/unit/sagas/test_orchestrator.py::test_process_sagas_liveness_check 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga test-saga-uuid submitted.
WARNING  modules.finance.sagas.orchestrator:orchestrator.py:77 SAGA_CANCELLED | Saga test-saga-uuid cancelled due to inactive participant. Buyer Active: False, Seller Active: True
PASSED                                                                   [ 61%]
tests/unit/sagas/test_orchestrator.py::test_process_sagas_active_participants 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga test-saga-uuid-2 submitted.
PASSED                                                                   [ 61%]
tests/unit/sagas/test_orchestrator.py::test_find_and_compensate_by_agent_success 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-compensation-test submitted.
WARNING  modules.finance.sagas.orchestrator:orchestrator.py:143 SAGA_AGENT_DEATH | Triggering compensation for Saga saga-compensation-test due to agent 999 death.
PASSED                                                                   [ 61%]
tests/unit/sagas/test_orchestrator.py::test_find_and_compensate_by_agent_no_handler 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-no-handler submitted.
ERROR    modules.finance.sagas.orchestrator:orchestrator.py:138 SAGA_COMPENSATE_FAIL | No handler provided for find_and_compensate_by_agent
PASSED                                                                   [ 61%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_disbursement_failure PASSED [ 61%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_government_seller PASSED [ 61%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_payment_failure PASSED [ 61%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_purchase_success PASSED [ 62%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_fallback_price 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 80.00.
PASSED                                                                   [ 62%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_no_inventory PASSED [ 62%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_no_public_manager PASSED [ 62%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_payment_fail 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.liquidation_handlers:liquidation_handlers.py:95 LIQUIDATION_ASSET_SALE_FAIL | PublicManager failed to pay 40.00 to Agent 1.
PASSED                                                                   [ 62%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_with_inventory 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 40.00.
PASSED                                                                   [ 62%]
tests/unit/systems/test_commerce_system.py::test_execute_consumption_and_leisure PASSED [ 63%]
tests/unit/systems/test_commerce_system.py::test_fast_track_consumption_if_needed PASSED [ 63%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_and_insolvent PASSED [ 63%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_but_solvent PASSED [ 63%]
tests/unit/systems/test_demographic_manager_newborn.py::test_newborn_receives_initial_needs_from_config FAILED [ 63%]
tests/unit/systems/test_event_system.py::test_inflation_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'hyperinflation' at Tick 200!
INFO     simulation.systems.event_system:event_system.py:63   -> Injected 50% cash into all households.
PASSED                                                                   [ 63%]
tests/unit/systems/test_event_system.py::test_recession_shock 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.event_system:event_system.py:33 ðŸ”¥ STRESS_TEST: Activating 'deflation' at Tick 600!
INFO     simulation.systems.event_system:event_system.py:87   -> Reduced all agent assets by 50%.
PASSED                                                                   [ 64%]
tests/unit/systems/test_event_system.py::test_no_event PASSED            [ 64%]
tests/unit/systems/test_firm_management_leak.py::TestFirmManagementLeak::test_spawn_firm_leak_detection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.firm_management:firm_management.py:174 STARTUP | Household 1 founded Firm 1 (Specialization: steel, Capital: 1500.0)
PASSED                                                                   [ 64%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_missing_settlement_system PASSED [ 64%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_transfer_failure 
-------------------------------- live log call --------------------------------
CRITICAL simulation.systems.firm_management:firm_management.py:151 STARTUP_FATAL | Founder household has NULL ID! Aborting.
PASSED                                                                   [ 64%]
tests/unit/systems/test_housing_service.py::test_housing_service_handle_housing_updates_mortgage 
-------------------------------- live log call --------------------------------
INFO     modules.housing.service:service.py:204 HOUSING_REGISTRY | Unit 101 transferred from 2 to 1
PASSED                                                                   [ 64%]
tests/unit/systems/test_housing_service.py::test_housing_service_handle_housing_clears_mortgage_if_missing 
-------------------------------- live log call --------------------------------
INFO     modules.housing.service:service.py:204 HOUSING_REGISTRY | Unit 101 transferred from 2 to 1
PASSED                                                                   [ 65%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_maintenance_uses_transfer PASSED [ 65%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_rent_collection_uses_transfer PASSED [ 65%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_distribution_transaction_generation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 10000.00
PASSED                                                                   [ 65%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_multiple_heirs_metadata 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 100.00
PASSED                                                                   [ 65%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_escheatment_when_no_heirs 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 1000.00
PASSED                                                                   [ 65%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_zero_assets_distribution 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 0.00
PASSED                                                                   [ 66%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_tax_transaction_generation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.inheritance_manager:inheritance_manager.py:49 INHERITANCE_START | Processing death for Household 1. Assets: 1000.00
PASSED                                                                   [ 66%]
tests/unit/systems/test_labor_market_analyzer.py::test_update_market_history PASSED [ 66%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_increase PASSED [ 66%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_decay PASSED [ 66%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_floor PASSED [ 66%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_asset_liquidation_integration 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_handlers:liquidation_handlers.py:87 LIQUIDATION_ASSET_SALE | Agent 1 sold inventory to PublicManager for 40.00.
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 0.00
PASSED                                                                   [ 66%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_bank_claim_handling 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 500.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 2 fully paid. Remaining cash: 500.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_initiate_liquidation_orchestration 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:80 LIQUIDATION_START | Agent 1 starting liquidation. Assets: 1000.00, Total Claims: 150.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 1 fully paid. Remaining cash: 900.00
INFO     simulation.systems.liquidation_manager:liquidation_manager.py:125 LIQUIDATION_WATERFALL | Tier 3 fully paid. Remaining cash: 850.00
PASSED                                                                   [ 67%]
tests/unit/systems/test_ma_manager.py::TestMAManager::test_execute_bankruptcy_records_loss_in_ledger 
-------------------------------- live log call --------------------------------
INFO     MAManager:ma_manager.py:243 BANKRUPTCY | Firm 999 liquidated. Cash Remaining: 1,000.00.
PASSED                                                                   [ 67%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_budget_constraints PASSED [ 67%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_legacy PASSED [ 67%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_settlement PASSED [ 67%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_scholarship_settlement 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.ministry_of_education:ministry_of_education.py:122 EDU_SCHOLARSHIP_PENDING | Household 101 nominated for Level 2.
PASSED                                                                   [ 68%]
tests/unit/systems/test_sensory_system.py::test_sensory_dto_generation PASSED [ 68%]
tests/unit/systems/test_sensory_system.py::test_sensory_dto_missing_tracker PASSED [ 68%]
tests/unit/systems/test_settlement_saga_integration.py::TestSettlementSagaIntegration::test_process_sagas_integration_initiated_to_credit_check 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-integration-1 submitted.
PASSED                                                                   [ 68%]
tests/unit/systems/test_settlement_saga_integration.py::TestSettlementSagaIntegration::test_process_sagas_integration_cancellation 
-------------------------------- live log call --------------------------------
INFO     modules.finance.sagas.orchestrator:orchestrator.py:31 SAGA_SUBMITTED | Saga saga-integration-cancel submitted.
WARNING  modules.finance.sagas.orchestrator:orchestrator.py:77 SAGA_CANCELLED | Saga saga-integration-cancel cancelled due to inactive participant. Buyer Active: False, Seller Active: True
WARNING  modules.finance.saga_handler:saga_handler.py:70 SAGA_COMPENSATE | Rolling back saga saga-integration-cancel from CANCELLED
PASSED                                                                   [ 68%]
tests/unit/systems/test_settlement_system.py::test_transfer_success PASSED [ 68%]
tests/unit/systems/test_settlement_system.py::test_transfer_insufficient_funds 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:334 SETTLEMENT_FAIL | Insufficient total funds (Cash+Deposits) for 1. Cash: 10.00, Bank: 0.00, Total: 10.00. Required: 20.00. Memo: Test Fail
PASSED                                                                   [ 69%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_minting 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:582 MINT_AND_TRANSFER | Created 100.00 USD from 0 to 1. Reason: Minting
PASSED                                                                   [ 69%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_government_grant PASSED [ 69%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_burning 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:617 TRANSFER_AND_DESTROY | Destroyed 50.00 USD from 1 to 0. Reason: Burning
PASSED                                                                   [ 69%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_tax PASSED [ 69%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:268 LIQUIDATION: Agent 1 liquidated. Inventory: 100.00, Capital: 50.00, Recovered: 20.00. Net Destruction: 130.00. Total Destroyed: 130.00. Reason: Bankruptcy
INFO     simulation.systems.settlement_system:settlement_system.py:268 LIQUIDATION: Agent 1 liquidated. Inventory: 10.00, Capital: 0.00, Recovered: 0.00. Net Destruction: 10.00. Total Destroyed: 140.00. Reason: More Loss
PASSED                                                                   [ 69%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation_escheatment 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:268 LIQUIDATION: Agent 1 liquidated. Inventory: 10.00, Capital: 10.00, Recovered: 0.00. Net Destruction: 20.00. Total Destroyed: 20.00. Reason: Escheatment Test
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_transfer_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:539 SETTLEMENT_ROLLBACK | Deposit failed for 2. Rolling back withdrawal of 20.00 from 1. Error: Deposit Failed
INFO     simulation.systems.settlement_system:settlement_system.py:544 SETTLEMENT_ROLLBACK_SUCCESS | Rolled back 20.00 to 1.
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_atomic_settlement_success 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:85 SETTLEMENT_CREATED | Escrow account created for Agent 101. Cash: 500.00. Portfolio items: 0. Heir: NONE (Escheatment)
INFO     simulation.systems.settlement_system:settlement_system.py:240 SETTLEMENT_CLOSED | Account 101 closed successfully.
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_atomic_settlement_leak_prevention 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:85 SETTLEMENT_CREATED | Escrow account created for Agent 102. Cash: 100.00. Portfolio items: 0. Heir: NONE (Escheatment)
WARNING  simulation.systems.settlement_system:settlement_system.py:219 SETTLEMENT_LEAK | Account 102 closed with remaining cash: 10.00. Burning it.
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_atomic_settlement_overdraft_protection 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:85 SETTLEMENT_CREATED | Escrow account created for Agent 103. Cash: 100.00. Portfolio items: 0. Heir: NONE (Escheatment)
CRITICAL simulation.systems.settlement_system:settlement_system.py:159 SETTLEMENT_OVERDRAFT | Attempted to distribute more than escrow! Escrow: 100.00, Distributed: 0.00, Requested: 150.00
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_transfer_seamless_success 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:372 SEAMLESS_PAYMENT | Agent 1 paid 50.00 using 10.00 cash and 40.00 from bank.
PASSED                                                                   [ 70%]
tests/unit/systems/test_settlement_system.py::test_transfer_seamless_fail_bank 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:334 SETTLEMENT_FAIL | Insufficient total funds (Cash+Deposits) for 1. Cash: 10.00, Bank: 10.00, Total: 20.00. Required: 50.00. Memo: Seamless Fail
PASSED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_success PASSED [ 71%]
tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:334 SETTLEMENT_FAIL | Insufficient total funds (Cash+Deposits) for B. Cash: 150.00, Bank: 0.00, Total: 150.00. Required: 200.00. Memo: multiparty_seq_1
WARNING  simulation.systems.settlement_system:settlement_system.py:409 MULTIPARTY_FAIL | Transfer 1 failed (B -> C). Rolling back 1 previous transfers.
PASSED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_success PASSED [ 71%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:334 SETTLEMENT_FAIL | Insufficient total funds (Cash+Deposits) for A. Cash: 90.00, Bank: 0.00, Total: 90.00. Required: 100.00. Memo: atomic_batch_2_txs
PASSED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_credit_fail_rollback 
-------------------------------- live log call --------------------------------
ERROR    simulation.systems.settlement_system:settlement_system.py:468 SETTLEMENT_ROLLBACK | Deposit failed for B. Rolling back atomic batch. Error: Deposit Fail
PASSED                                                                   [ 71%]
tests/unit/systems/test_settlement_system.py::test_inheritance_portfolio_transfer 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:85 SETTLEMENT_CREATED | Escrow account created for Agent 100. Cash: 0.00. Portfolio items: 1. Heir: 900
INFO     simulation.systems.settlement_system:settlement_system.py:141 PORTFOLIO_TRANSFER | Transferred portfolio to 900
PASSED                                                                   [ 72%]
tests/unit/systems/test_settlement_system.py::test_escheatment_portfolio_transfer 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.settlement_system:settlement_system.py:85 SETTLEMENT_CREATED | Escrow account created for Agent 100. Cash: 0.00. Portfolio items: 1. Heir: NONE (Escheatment)
INFO     simulation.systems.settlement_system:settlement_system.py:141 PORTFOLIO_TRANSFER | Transferred portfolio to GOVERNMENT
PASSED                                                                   [ 72%]
tests/unit/systems/test_social_system.py::test_update_social_ranks PASSED [ 72%]
tests/unit/systems/test_social_system.py::test_calculate_reference_standard PASSED [ 72%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_corporate_tax PASSED [ 72%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_flat PASSED [ 72%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_scaling PASSED [ 72%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_with_brackets PASSED [ 73%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_collect_tax 
-------------------------------- live log call --------------------------------
INFO     simulation.systems.tax_agency:tax_agency.py:140 TAX_COLLECTION_SUCCESS | Tick 1 | Collected 100.00 of income from 101
PASSED                                                                   [ 73%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_effective_diffusion_rate PASSED [ 73%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_unlock_mechanism PASSED [ 73%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_diffusion_over_time PASSED [ 73%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_productivity_multiplier PASSED [ 73%]
tests/unit/test_ai_driven_firm_engine.py::test_adjust_price_tactic 
------------------------------- live log setup --------------------------------
INFO     simulation.decisions.ai_driven_firm_engine:ai_driven_firm_engine.py:40 AIDrivenFirmDecisionEngine initialized with CorporateManager.
-------------------------------- live log call --------------------------------
WARNING  simulation.decisions.firm.financial_strategy:financial_strategy.py:112 FINANCE_WARNING | Missing policy/market rate for firm 1. Used default fallback.
PASSED                                                                   [ 74%]
tests/unit/test_ai_training_manager.py::test_get_top_performing_agents 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 74%]
tests/unit/test_ai_training_manager.py::test_get_under_performing_agents 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 74%]
tests/unit/test_ai_training_manager.py::test_clone_and_mutate_q_table 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
PASSED                                                                   [ 74%]
tests/unit/test_ai_training_manager.py::test_clone_from_fittest_agent 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:53 Cloning from fittest agent 9 to new agent 0
PASSED                                                                   [ 74%]
tests/unit/test_ai_training_manager.py::test_run_imitation_learning_cycle 
-------------------------------- live log call --------------------------------
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:20 AITrainingManager initialized.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:24 Running imitation learning cycle at tick 1000.
INFO     simulation.ai.ai_training_manager:ai_training_manager.py:36 Imitation Cycle: 1 Role Models, 5 Learners.
PASSED                                                                   [ 74%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_wealth_distribution PASSED [ 75%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_needs_distribution PASSED [ 75%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_sales_by_good PASSED [ 75%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_market_order_book PASSED [ 75%]
tests/unit/test_api_history.py::TestHistoryAPI::test_gdp_history_on_refresh PASSED [ 75%]
tests/unit/test_bank.py::TestBank::test_initialization 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 75%]
tests/unit/test_bank.py::TestBank::test_grant_loan_successful 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 76%]
tests/unit/test_bank.py::TestBank::test_grant_loan_denied_credit 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 76%]
tests/unit/test_bank.py::TestBank::test_grant_loan_insufficient_reserves 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 76%]
tests/unit/test_bank.py::TestBank::test_grant_loan_multiple_loans 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 76%]
tests/unit/test_bank.py::TestBank::test_deposit_from_customer 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 76%]
tests/unit/test_bank.py::TestBank::test_withdraw_for_customer_success 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 76%]
tests/unit/test_bank.py::TestBank::test_withdraw_for_customer_insufficient 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::TestBank::test_financial_entity_deposit 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::TestBank::test_financial_entity_withdraw 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::TestBank::test_financial_entity_withdraw_insufficient 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::TestBank::test_run_tick_returns_transactions 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::TestBank::test_void_loan_failure_raises_exception 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
-------------------------------- live log call --------------------------------
CRITICAL simulation.bank:bank.py:550 VOID_LOAN_FAIL | Could not find deposit for loan loan_broken_link. Cannot safely rollback.
PASSED                                                                   [ 77%]
tests/unit/test_bank.py::TestBank::test_loan_default_emits_event 
------------------------------- live log setup --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 77%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_default_processing 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
WARNING  simulation.bank:bank.py:491 Bank: EventBus not injected. Loan default consequences (penalties, seizure) skipped.
PASSED                                                                   [ 78%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_grant_loan_delegation 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 78%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_run_tick_interest_collection 
-------------------------------- live log call --------------------------------
INFO     simulation.bank:bank.py:91 Bank 1 initialized. Assets: defaultdict(<class 'float'>, {'USD': 10000.0})
PASSED                                                                   [ 78%]
tests/unit/test_config_parity.py::test_household_config_parity PASSED    [ 78%]
tests/unit/test_config_parity.py::test_firm_config_parity PASSED         [ 78%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_emergency PASSED [ 78%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered PASSED [ 79%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered_insufficient_funds PASSED [ 79%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_signal PASSED [ 79%]
tests/unit/test_diagnostics.py::test_get_total_system_money_diagnostics PASSED [ 79%]
tests/unit/test_factories.py::TestMarketSignalFactory::test_create_market_signals PASSED [ 79%]
tests/unit/test_factories.py::TestMarketSnapshotFactory::test_create_snapshot PASSED [ 79%]
tests/unit/test_factories.py::TestDecisionInputFactory::test_create_decision_input PASSED [ 80%]
tests/unit/test_firm_profit.py::test_firm_profit_history_update PASSED   [ 80%]
tests/unit/test_firm_profit.py::test_firm_revenue_expenses_reset PASSED  [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_no_liabilities PASSED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_liabilities PASSED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_treasury_shares PASSED [ 80%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_negative_net_assets PASSED [ 81%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_zero_shares PASSED [ 81%]
tests/unit/test_firms.py::TestFirmProduction::test_produce PASSED        [ 81%]
tests/unit/test_firms.py::TestFirmSales::test_post_ask PASSED            [ 81%]
tests/unit/test_firms.py::TestFirmSales::test_adjust_marketing_budget_increase PASSED [ 81%]
tests/unit/test_handlers_fix.py::TestHandlerFix::test_goods_handler_uses_record_consumption 
-------------------------------- live log call --------------------------------
WARNING  simulation.systems.handlers.goods_handler:goods_handler.py:108 GOODS_HANDLER_WARN | Seller <MagicMock name='mock.id' id='2229358639968'> does not implement IInventoryHandler
FAILED                                                                   [ 81%]
tests/unit/test_handlers_fix.py::TestHandlerFix::test_labor_handler_uses_add_labor_income FAILED [ 82%]
tests/unit/test_household_ai.py::test_ai_creates_purchase_order 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     simulation.ai.model_wrapper:model_wrapper.py:150 No existing model found for wealth_and_needs.
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
PASSED                                                                   [ 82%]
tests/unit/test_household_ai.py::test_ai_evaluates_consumption_options 
------------------------------- live log setup --------------------------------
INFO     Market_goods_market:order_book_market.py:97 OrderBookMarket goods_market initialized.
INFO     Market_labor_market:order_book_market.py:97 OrderBookMarket labor_market initialized.
-------------------------------- live log call --------------------------------
INFO     simulation.ai.model_wrapper:model_wrapper.py:150 No existing model found for needs_and_social_status.
INFO     simulation.decisions.ai_driven_household_engine:ai_driven_household_engine.py:43 AIDrivenHouseholdDecisionEngine initialized (Modularized).
PASSED                                                                   [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_make_decisions_calls_ai PASSED [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_do_nothing PASSED [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_basic_food_sufficient_assets PASSED [ 82%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_luxury_food_insufficient_assets PASSED [ 83%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_evaluate_options_chooses_best_utility PASSED [ 83%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_aggressive PASSED [ 83%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_passive_no_offer PASSED [ 83%]
tests/unit/test_household_refactor.py::TestHouseholdRefactor::test_property_management PASSED [ 83%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_dti_guardrail PASSED [ 83%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_npv_buy_calculation PASSED [ 83%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_rational_choice_buy PASSED [ 84%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_multiple_agents PASSED [ 84%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_no_data PASSED [ 84%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_single_agent PASSED [ 84%]
tests/unit/test_ledger_manager.py::test_archive_resolved_items PASSED    [ 84%]
tests/unit/test_ledger_manager.py::test_register_new_item PASSED         [ 84%]
tests/unit/test_ledger_manager.py::test_sync_with_codebase PASSED        [ 85%]
tests/unit/test_ledger_manager.py::test_pipe_escaping_in_ledger PASSED   [ 85%]
tests/unit/test_logger.py::TestLogger::test_clear_logs PASSED            [ 85%]
tests/unit/test_logger.py::TestLogger::test_log_writing PASSED           [ 85%]
tests/unit/test_logger.py::TestLogger::test_singleton_instance PASSED    [ 85%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_pass_through PASSED [ 85%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_stock_order PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_dict_legacy_format PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_dict_canonical_format PASSED [ 86%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_invalid_input PASSED [ 86%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_decrease_on_low_efficiency SKIPPED [ 86%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_increase_on_high_efficiency SKIPPED [ 86%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation FAILED [ 87%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_first_tick_skip SKIPPED [ 87%]
tests/unit/test_markets_v2.py::TestOrderBookMarketInitialization::test_market_initialization PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_single_buy_order PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_buy_orders_sorted PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_sell_orders_sorted PASSED [ 87%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_orders_with_same_price PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_unfilled_order_no_match PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_full_match_one_to_one PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_partial_match_then_book PASSED [ 88%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_match_with_multiple_orders PASSED [ 88%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_empty PASSED [ 88%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_non_empty PASSED [ 88%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_empty PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_non_empty PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_last_traded_price PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread PASSED     [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread_no_bid_or_ask PASSED [ 89%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_market_depth PASSED [ 89%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_bond_repayment_split PASSED [ 90%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_bond_repayment_legacy_fallback PASSED [ 90%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_interest_is_not_destroyed PASSED [ 90%]
tests/unit/test_phase1_refactor.py::TestPhase1DecisionRefactor::test_execute_flow PASSED [ 90%]
tests/unit/test_phase1_refactor.py::TestPhase1DecisionRefactor::test_dispatch_logic PASSED [ 90%]
tests/unit/test_portfolio_macro.py::test_portfolio_optimization_under_stagflation PASSED [ 90%]
tests/unit/test_real_estate_lien.py::test_real_estate_unit_initialization PASSED [ 91%]
tests/unit/test_real_estate_lien.py::test_liens_management PASSED        [ 91%]
tests/unit/test_real_estate_lien.py::test_mortgage_id_backward_compatibility PASSED [ 91%]
tests/unit/test_repository.py::test_save_and_get_simulation_run PASSED   [ 91%]
tests/unit/test_repository.py::test_save_and_get_agent_state PASSED      [ 91%]
tests/unit/test_repository.py::test_save_and_get_transaction PASSED      [ 91%]
tests/unit/test_repository.py::test_save_and_get_economic_indicators PASSED [ 92%]
tests/unit/test_repository.py::test_indexes_created PASSED               [ 92%]
tests/unit/test_sensory_purity.py::TestSensoryPurity::test_generate_government_sensory_dto_purity PASSED [ 92%]
tests/unit/test_sensory_purity.py::TestSensoryPurity::test_logic_with_more_agents PASSED [ 92%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect FAILED [ 92%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages FAILED [ 92%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism FAILED [ 93%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_initialization PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_update_reference_prices PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_buy_order PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_sell_order PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_price_clamping PASSED [ 93%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_order_sorting PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_full_match PASSED [ 94%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_partial_match PASSED [ 94%]
tests/unit/test_stock_market.py::TestOrderExpiry::test_clear_expired_orders PASSED [ 94%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_success PASSED [ 94%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_insufficient_funds PASSED [ 94%]
tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success PASSED [ 94%]
tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_failure PASSED [ 95%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario PASSED [ 95%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario PASSED [ 95%]
tests/unit/test_taxation_system.py::test_generate_corporate_tax_intents PASSED [ 95%]
tests/unit/test_taxation_system.py::test_generate_corporate_tax_intents_missing_config PASSED [ 95%]
tests/unit/test_taxation_system.py::test_record_revenue_success PASSED   [ 95%]
tests/unit/test_taxation_system.py::test_record_revenue_failure PASSED   [ 96%]
tests/unit/test_transaction_engine.py::test_validator_success PASSED     [ 96%]
tests/unit/test_transaction_engine.py::test_validator_negative_amount PASSED [ 96%]
tests/unit/test_transaction_engine.py::test_validator_insufficient_funds PASSED [ 96%]
tests/unit/test_transaction_engine.py::test_validator_invalid_account PASSED [ 96%]
tests/unit/test_transaction_engine.py::test_executor_success PASSED      [ 96%]
tests/unit/test_transaction_engine.py::test_executor_failure PASSED      [ 97%]
tests/unit/test_transaction_engine.py::test_engine_process_transaction_success PASSED [ 97%]
tests/unit/test_transaction_engine.py::test_engine_process_transaction_validation_fail PASSED [ 97%]
tests/unit/test_transaction_engine.py::test_engine_process_transaction_execution_fail PASSED [ 97%]
tests/unit/test_transaction_engine.py::test_adapter_registry_accessor PASSED [ 97%]
tests/unit/test_transaction_processor.py::test_transaction_processor_dispatch_to_handler PASSED [ 97%]
tests/unit/test_transaction_processor.py::test_transaction_processor_ignores_credit_creation PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_goods_handler_uses_atomic_settlement PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_public_manager_routing PASSED [ 98%]
tests/unit/test_transaction_processor.py::test_transaction_processor_dispatches_housing PASSED [ 98%]
tests/unit/test_watchtower_hardening.py::TestWatchtowerHardening::test_repo_birth_counts PASSED [ 98%]
tests/unit/test_watchtower_hardening.py::TestWatchtowerHardening::test_tracker_sma_logic PASSED [ 98%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_record_sale_updates_tick PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_reduction PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_floor PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_not_stale PASSED [ 99%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_transaction_processor_calls_record_sale PASSED [ 99%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_success PASSED [ 99%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_missing_field PASSED [100%]

=================================== ERRORS ====================================
_______________ ERROR at setup of test_household_makes_decision _______________
E   TypeError: Household.__init__() missing 2 required positional arguments: 'core_config' and 'engine'
_________________ ERROR at setup of test_firm_makes_decision __________________
E   TypeError: Firm.__init__() got an unexpected keyword argument 'id'
________________ ERROR at setup of test_indicator_aggregation _________________
E   TypeError: Household.__init__() missing 2 required positional arguments: 'core_config' and 'engine'
_________________ ERROR at setup of test_firm_automation_init _________________
E   TypeError: Firm.__init__() got an unexpected keyword argument 'id'
_________ ERROR at setup of test_production_function_with_automation __________
E   TypeError: Firm.__init__() got an unexpected keyword argument 'id'
_______________ ERROR at setup of test_system2_planner_guidance _______________
E   TypeError: Firm.__init__() got an unexpected keyword argument 'id'
____ ERROR at setup of test_system2_planner_guidance_automation_preference ____
E   TypeError: Firm.__init__() got an unexpected keyword argument 'id'
________ ERROR at setup of test_system2_planner_guidance_ma_preference ________
E   TypeError: Firm.__init__() got an unexpected keyword argument 'id'
================================== FAILURES ===================================
C:\coding\economics\tests\integration\scenarios\diagnosis\test_dashboard_contract.py:55: AssertionError: assert <MagicMock name='mock.world_state.tracker.get_smoothed_values().get()' id='2229332231568'> == 1000.0
C:\coding\economics\tests\integration\test_finance_bailout.py:66: TypeError: FinanceSystem.grant_bailout_loan() takes 3 positional arguments but 4 were given
C:\coding\economics\tests\integration\test_finance_bailout.py:102: TypeError: FinanceSystem.grant_bailout_loan() got an unexpected keyword argument 'current_tick'
C:\coding\economics\simulation\decisions\firm\financial_strategy.py:44: TypeError: '>=' not supported between instances of 'MagicMock' and 'int'
C:\coding\economics\simulation\systems\generational_wealth_audit.py:53: TypeError: unsupported format string passed to MagicMock.__format__
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:690: AttributeError: Mock object has no attribute 'progressive_tax_brackets'
C:\coding\economics\modules\government\engines\decision_engine.py:106: TypeError: '>' not supported between instances of 'MagicMock' and 'int'
C:\coding\economics\tests\integration\test_government_tax.py:39: TypeError: unsupported operand type(s) for +: 'dict' and 'float'
C:\coding\economics\tests\integration\test_government_tax.py:84: AssertionError: assert {'USD': 50.0} == 50.0
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:744: AssertionError: False is not true : Shareholder should receive 1000 USD
C:\coding\economics\simulation\core_agents.py:133: TypeError: Random.uniform() missing 2 required positional arguments: 'a' and 'b'
C:\coding\economics\simulation\ai\system2_planner.py:119: TypeError: '<' not supported between instances of 'MagicMock' and 'int'
C:\coding\economics\simulation\ai\system2_planner.py:119: TypeError: '<' not supported between instances of 'MagicMock' and 'int'
C:\coding\economics\simulation\firms.py:153: TypeError: an integer is required
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:900: AssertionError: 0.0 != 150.0
C:\coding\economics\tests\integration\test_public_manager_integration.py:112: AssertionError: assert {'USD': 0.0} == 1000.0
C:\coding\economics\simulation\systems\settlement_system.py:59: AttributeError: 'types.SimpleNamespace' object has no attribute 'get_balance'
C:\coding\economics\simulation\systems\settlement_system.py:59: AttributeError: 'types.SimpleNamespace' object has no attribute 'get_balance'
C:\coding\economics\simulation\systems\settlement_system.py:59: AttributeError: 'types.SimpleNamespace' object has no attribute 'get_balance'
C:\coding\economics\simulation\orchestration\tick_orchestrator.py:61: AttributeError: 'float' object has no attribute 'get'
C:\coding\economics\tests\modules\household\test_political_integration.py:36: TypeError: Household.__init__() missing 2 required positional arguments: 'core_config' and 'engine'
C:\coding\economics\tests\simulation\test_bank_decomposition.py:109: assert 0 > 10
C:\coding\economics\simulation\initialization\initializer.py:333: AttributeError: 'int' object has no attribute 'get'
C:\coding\economics\simulation\initialization\initializer.py:333: AttributeError: 'int' object has no attribute 'get'
C:\coding\economics\tests\test_wo_4_1_protocols.py:89: assert False is True
C:\coding\economics\tests\test_ws.py:51: assert 'timestamp' in {'finance': {'rates': {'base': 5.0, 'call': "<MagicMock name='create_simulation().world_state.markets.__getitem__().interest_rate.__mul__()' id='2229355169840'>", 'loan': 4.0, 'savings': 2.0}, 'supply': {'m0': "<MagicMock name='create_simulation().world_state.tracker.calculate_monetary_aggregates().__getitem__()' id='2229357570640'>", 'm1': "<MagicMock name='create_simulation().world_state.tracker.calculate_monetary_aggregates().__getitem__()' id='2229357570640'>", 'm2': "<MagicMock name='create_simulation().world_state.tracker.calculate_monetary_aggregates().__getitem__()' id='2229357570640'>", 'velocity': 0.0}}, 'integrity': {'fps': 99.04912836767036, 'm2_leak': 0.0}, 'macro': {'cpi': 1.0, 'gdp': 0.0, 'gini': 0.0, 'unemploy': 5.0}, 'politics': {'approval': {'high': 0.6, 'low': 0.6, 'mid': 0.6, 'total': 0.6}, 'fiscal': {'debt': 0.0, 'revenue': "<MagicMock name='mock.last_revenue' id='2229357572656'>", 'welfare': 0.0}, 'status': {'cohesion': 0.5, 'ruling_party': 'BLUE'}}, ...}
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\case.py:744: AssertionError: False is not true
C:\coding\economics\tests\unit\modules\system\execution\test_public_manager.py:52: AssertionError: assert 999999 == -1
C:\coding\economics\tests\unit\modules\system\execution\test_public_manager.py:75: AssertionError: assert {'USD': 100.0} == 100.0
C:\coding\economics\tests\unit\modules\system\execution\test_public_manager_compliance.py:20: assert 999999 == -1
C:\coding\economics\tests\unit\modules\system\execution\test_public_manager_compliance.py:84: AssertionError: assert 999999 == -1
C:\coding\economics\tests\unit\systems\test_demographic_manager_newborn.py:144: assert 0 == 1
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:690: AttributeError: Mock object has no attribute 'record_consumption'
C:\Users\Gram Pro\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:690: AttributeError: Mock object has no attribute 'needs'
C:\coding\economics\tests\unit\test_marketing_roi.py:17: TypeError: Firm.__init__() got an unexpected keyword argument 'id'
C:\coding\economics\tests\unit\test_socio_tech.py:33: TypeError: Household.__init__() missing 2 required positional arguments: 'core_config' and 'engine'
C:\coding\economics\tests\unit\test_socio_tech.py:33: TypeError: Household.__init__() missing 2 required positional arguments: 'core_config' and 'engine'
C:\coding\economics\tests\unit\test_socio_tech.py:33: TypeError: Household.__init__() missing 2 required positional arguments: 'core_config' and 'engine'
============================== warnings summary ===============================
tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts
  C:\coding\economics\tests\integration\test_government_fiscal_policy.py:14: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    government.collect_tax(100.0, "test_tax", 1, 1)

tests/unit/agents/test_government.py::test_collect_tax_delegation
  C:\coding\economics\tests\unit\agents\test_government.py:96: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    env["government"].collect_tax(amount, tax_type, source_id, current_tick)

tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_stock_order
  <string>:10: DeprecationWarning: StockOrder is deprecated. Use CanonicalOrderDTO instead.

tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_success
  C:\coding\economics\tests\unit\test_tax_collection.py:123: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    collected = gov.collect_tax(amount, "test_tax", payer, current_tick=1)

tests/unit/test_tax_collection.py::test_government_collect_tax_adapter_failure
  C:\coding\economics\tests\unit\test_tax_collection.py:141: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    collected = gov.collect_tax(amount, "test_tax", payer, current_tick=1)

tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario
  C:\coding\economics\simulation\systems\transaction_manager.py:258: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    government.collect_tax(tax_amount, "income_tax_firm", buyer, current_time)

tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario
  C:\coding\economics\simulation\systems\transaction_manager.py:265: DeprecationWarning: Government.collect_tax is deprecated. Use settlement.settle_atomic and government.record_revenue() instead.
    government.collect_tax(tax_amount, "income_tax_household", seller, current_time)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/integration/scenarios/diagnosis/test_dashboard_contract.py::test_dashboard_snapshot_structure
FAILED tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type
FAILED tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds
FAILED tests/integration/test_firm_decision_scenarios.py::test_growth_scenario_with_golden_firm
FAILED tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit
FAILED tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_calculate_income_tax_uses_fiscal_policy_manager
FAILED tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_make_policy_decision_updates_fiscal_policy
FAILED tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_success
FAILED tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_legacy
FAILED tests/integration/test_multicurrency_liquidation.py::TestMultiCurrencyLiquidation::test_foreign_currency_distribution_to_shareholders
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_trigger
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_renter
FAILED tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_owner
FAILED tests/integration/test_phase23_production.py::TestPhase23Production::test_production_boost_from_fertilizer_tech
FAILED tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance
FAILED tests/integration/test_public_manager_integration.py::TestPublicManagerIntegration::test_full_liquidation_cycle
FAILED tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_1_standard_inheritance
FAILED tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_2_escheatment
FAILED tests/integration/test_settlement_system_atomic.py::test_settlement_scenario_3_insolvency
FAILED tests/integration/test_tick_normalization.py::TestTickNormalization::test_run_tick_executes_phases
FAILED tests/modules/household/test_political_integration.py::test_household_update_political_opinion_integration
FAILED tests/simulation/test_bank_decomposition.py::test_run_tick_defaults - ...
FAILED tests/system/test_phase29_depression.py::TestPhase29Depression::test_crisis_monitor_logging
FAILED tests/system/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers
FAILED tests/test_wo_4_1_protocols.py::test_housing_handler_with_protocol_agent
FAILED tests/test_ws.py::test_websocket_endpoint - assert 'timestamp' in {'fi...
FAILED tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_above_threshold
FAILED tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders
FAILED tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_deposit_revenue
FAILED tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_financial_entity
FAILED tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_liquidation_order_generation_id
FAILED tests/unit/systems/test_demographic_manager_newborn.py::test_newborn_receives_initial_needs_from_config
FAILED tests/unit/test_handlers_fix.py::TestHandlerFix::test_goods_handler_uses_record_consumption
FAILED tests/unit/test_handlers_fix.py::TestHandlerFix::test_labor_handler_uses_add_labor_income
FAILED tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages
FAILED tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism
ERROR tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision
ERROR tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision
ERROR tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation
ERROR tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init
ERROR tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation
ERROR tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance
ERROR tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference
ERROR tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference
======= 38 failed, 568 passed, 4 skipped, 7 warnings, 8 errors in 6.54s =======
