# 로깅 시스템 리팩토링 및 DB 통합 계획

## 1. 목적

*   시뮬레이션 진행 상황 출력(예: `print` 또는 `logging.info`)과 에이전트의 의사결정, 상태 변화, 시장 활동 등 상세 시뮬레이션 데이터를 분리합니다.
*   상세 시뮬레이션 데이터를 구조화된 데이터베이스 형식으로 저장하여 분석 및 시각화를 용이하게 합니다.
*   각 시뮬레이션 실행 시 데이터베이스를 초기화하여 실험의 독립성을 보장합니다.
*   오류 및 경고 메시지를 표준 `logging` 모듈로 전환하여 더 나은 오류 처리 및 제어 기능을 제공합니다.

## 2. 진행 현황 및 구현 체크리스트

### 2.1. DBManager에 `reset_database()` 메서드 추가 및 통합

*   **목표:** 시뮬레이션 시작 시 데이터베이스를 초기화하여 매 실행이 독립적인 분석이 가능하도록 함.
*   **구체적인 방법:**
    *   `simulation/db/db_manager.py` 파일에 `reset_database()` 메서드 추가 (모든 테이블 삭제 후 재생성).
    *   `main.py` 파일에서 `DBManager` 초기화 후 `reset_database()` 호출.
*   **진행 현황:** ✅ 완료

### 2.2. `simulation/` 디렉토리 내 `print()` 문 리팩토링

*   **목표:** 에이전트의 의사결정, 상태 변화, 시장 활동 등 상세 시뮬레이션 데이터를 `print()` 대신 `DBManager`를 통해 데이터베이스에 저장하고, 오류/경고 메시지 및 모듈 테스트/디버그 메시지는 `logging` 모듈로 전환.
*   **구체적인 방법:**
    *   **오류/경고 메시지 `print()` -> `logging` 전환:**
        *   `simulation/ai/q_table_manager.py` 파일 내 `print()` 문을 `logging.error()` 또는 `logging.warning()`으로 전환.
        *   `simulation/db/db_manager.py` 파일 내 `print()` 문을 `logging.error()`로 전환.
        *   `simulation/db/repository.py` 파일 내 `print()` 문을 `logging.error()`로 전환.
    *   **모듈 테스트/디버그 `print()` -> `logging.info` 전환:**
        *   `simulation/db/database.py` 파일 내 `if __name__ == '__main__':` 블록 내 `print()` 문을 `logging.info()`로 전환.
        *   `simulation/db/db_manager.py` 파일 내 `if __name__ == '__main__':` 블록 내 `print()` 문을 `logging.info()`로 전환.
        *   `simulation/db/repository.py` 파일 내 `if __name__ == '__main__':` 블록 내 `print()` 문을 `logging.info()`로 전환.
        *   `simulation/db/schema.py` 파일 내 `if __name__ == '__main__':` 블록 내 `print()` 문을 `logging.info()`로 전환.
        *   `simulation/viewmodels/agent_state_viewmodel.py` 파일 내 `if __name__ == '__main__':` 블록 내 `print()` 문을 `logging.info()`로 전환.
        *   `simulation/viewmodels/economic_indicators_viewmodel.py` 파일 내 `if __name__ == '__main__':` 블록 내 `print()` 문을 `logging.info()`로 전환.
        *   `simulation/viewmodels/market_history_viewmodel.py` 파일 내 `if __name__ == '__main__'` 블록 내 `print()` 문을 `logging.info()`로 전환.
    *   **시뮬레이션 런타임 데이터 `print()` -> `DBManager` 저장 로직으로 전환:**
        *   `simulation/` 디렉토리 내에서 에이전트의 의사결정, 상태 변화, 시장 활동을 출력하는 `print()` 문 식별.
        *   해당 `print()` 문을 `DBManager`의 `save_ai_decision()`, `save_agent_state()`, `save_transaction()` 등의 적절한 메서드 호출로 대체.
        *   `decision_details` 필드(JSON)에 `tactic`, `reason` 등 상세 컨텍스트 포함.

*   **진행 현황:**
    *   `simulation/ai/q_table_manager.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/db/db_manager.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/db/repository.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/db/database.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/db/db_manager.py`의 `if __name__ == '__main__':` 블록 내 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/db/schema.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/viewmodels/agent_state_viewmodel.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/viewmodels/economic_indicators_viewmodel.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   `simulation/viewmodels/market_history_viewmodel.py`의 `print()` 문 `logging` 전환: ✅ 완료
    *   시뮬레이션 런타임 데이터 `print()` -> `DBManager` 저장 로직 전환: ✅ 완료