# π” Git Diff Review: `dto-schema-alignment`

## π” Summary
μ΄ PRμ€ μ‹λ®¬λ μ΄μ… λ¨λ“μ λ°μ΄ν„° μ „μ†΅ κ°μ²΄(DTO)λ“¤μ„ `simulation/dtos/api.py`μ—μ„ `simulation/api.py`λ΅ ν†µν•©ν•λ” λ¦¬ν©ν† λ§μ„ μν–‰ν–μµλ‹λ‹¤. μ΄ λ³€κ²½μ„ ν†µν•΄ `simulation` ν¨ν‚¤μ§€μ κ³µκ° API κ³„μ•½μ΄ λ‹¨μΌ νμΌλ΅ μ¤‘μ•™ν™”λμ–΄, λ¨λ“μ κ²½κ³„κ°€ λ…ν™•ν•΄μ§€κ³  μΈν„°νμ΄μ¤μ λ°κ²¬κ°€λ¥μ„±(discoverability)μ΄ ν–¥μƒλμ—μµλ‹λ‹¤.

## π¨ Critical Issues
- λ°κ²¬λμ§€ μ•μ•μµλ‹λ‹¤.

## β οΈ Logic & Spec Gaps
- λ°κ²¬λμ§€ μ•μ•μµλ‹λ‹¤. `tests/test_config_parity.py`μ μ„ν¬νΈ κ²½λ΅κ°€ μ¬λ°”λ¥΄κ² μμ •λμ–΄ λ¦¬ν©ν† λ§μ— λ”°λ¥Έ ν…μ¤νΈ μΌκ΄€μ„±μ„ μ μ§€ν•κ³  μμµλ‹λ‹¤.

## π’΅ Suggestions
- **μ•„ν‚¤ν…μ² κ°μ„ **: λ¨λ“  κ³µκ° μΈν„°νμ΄μ¤(DTO, ν•µμ‹¬ ν΄λμ¤)λ¥Ό `api.py`λ΅ ν†µν•©ν• κ²ƒμ€ "API-Driven Development" μ›μΉ™μ„ κ°•ν™”ν•λ” ν›λ¥­ν• κ²°μ •μ…λ‹λ‹¤. μ΄λ” μ™Έλ¶€ λ¨λ“κ³Όμ κ²°ν•©λ„λ¥Ό λ‚®μ¶”κ³  μ μ§€λ³΄μμ„±μ„ ν¬κ² ν–¥μƒμ‹ν‚¬ κ²ƒμ…λ‹λ‹¤.

## π§  Manual Update Proposal
μ΄λ² λ¦¬ν©ν† λ§μ—μ„ μ–»μ€ μ•„ν‚¤ν…μ² κ°μ„  κ΄€λ ¨ μΈμ‚¬μ΄νΈλ¥Ό ν”„λ΅μ νΈ μ§€μ‹ λ² μ΄μ¤μ— κΈ°λ΅ν•  κ²ƒμ„ μ μ•ν•©λ‹λ‹¤.

- **Target File**: `communications/insights/DTO-Schema-Alignment.md` (μ‹ κ· μƒμ„±)
- **Update Content**:
  ```markdown
  # Insight Report: DTO Schema Alignment & API Centralization

  ## ν„μƒ (Phenomenon)
  - μ΄μ „μ—λ” λ¨λ“μ κ³µκ° μΈν„°νμ΄μ¤(νΉν DTO)κ°€ `simulation/dtos/api.py`μ™€ κ°™μ΄ ν•μ„ λ””λ ‰ν† λ¦¬μ— λ¶„μ‚°λμ–΄ μμ—μµλ‹λ‹¤.
  - μ΄λ΅ μΈν•΄ μ™Έλ¶€ λ¨λ“μ΄ `simulation` ν¨ν‚¤μ§€μ μ–΄λ–¤ λ¶€λ¶„μ„ μ‚¬μ©ν•΄μ•Ό ν•λ”μ§€ νμ•…ν•κΈ° μ„ν•΄ μ—¬λ¬ νμΌμ„ ν™•μΈν•΄μ•Ό ν•λ” λ¶νΈν•¨μ΄ μμ—μµλ‹λ‹¤.

  ## μ›μΈ (Cause)
  - μ΄κΈ° κ°λ° κ³Όμ •μ—μ„ κΈ°λ¥λ³„λ΅ νμΌμ„ κµ¬μ„±ν–μΌλ‚, ν¨ν‚¤μ§€ μ „μ²΄μ ν†µν•©λ Public API κ΄€μ μ—μ„μ κ΄€λ¦¬κ°€ λ¶€μ΅±ν–μµλ‹λ‹¤.
  - λ¨λ“μ "κ³µμ‹μ μΈ κ³„μ•½"μ΄ μ—¬λ¬ κ³³μ— ν©μ–΄μ Έ μμ–΄ APIμ κ²½κ³„κ°€ λ¨νΈν•΄μ΅μµλ‹λ‹¤.

  ## ν•΄κ²° (Solution)
  - `HouseholdConfigDTO`, `FirmStateDTO`, `DecisionContext` λ“± μ™Έλ¶€μ—μ„ μ‚¬μ©λλ” λ¨λ“  DTOλ¥Ό `simulation/api.py` νμΌλ΅ μ΄μ „ν•κ³  ν†µν•©ν–μµλ‹λ‹¤.
  - `__all__` λ³€μλ¥Ό ν†µν•΄ ν¨ν‚¤μ§€μ—μ„ λ…μ‹μ μΌλ΅ λ…Έμ¶ν•λ” λ€μƒμ„ μ •ν™•ν•κ² κ΄€λ¦¬ν•μ—¬, `simulation/api.py`κ°€ μ΄ λ¨λ“μ μ μΌν• κ³µμ‹ μ§„μ…μ (Single Source of Truth)μ΄ λλ„λ΅ λ§λ“¤μ—μµλ‹λ‹¤.

  ## κµν› (Lesson Learned)
  - **API-Driven Development**: λ¨λ“μ Public APIλ” λ‹¨μΌ `api.py` νμΌμ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ΄ λ¨λ“μ κ²½κ³„λ¥Ό λ…ν™•ν ν•κ³ , μ μ§€λ³΄μμ„±κ³Ό λ°κ²¬κ°€λ¥μ„±μ„ ν¬κ² ν–¥μƒμ‹ν‚µλ‹λ‹¤.
  - **μ¤‘μ•™ν™”λ κ³„μ•½**: μ™Έλ¶€μ™€ μƒνΈμ‘μ©ν•λ” λ¨λ“  λ°μ΄ν„° κµ¬μ΅°(DTOs)μ™€ ν΄λμ¤λ¥Ό `api.py`μ— μ§‘μ¤‘μ‹ν‚¤λ” κ²ƒμ€, μμ΅΄μ„± κ΄€λ¦¬λ¥Ό λ‹¨μν™”ν•κ³  μλ„μΉ μ•μ€ λ‚΄λ¶€ κµ¬ν„ μ ‘κ·Όμ„ λ°©μ§€ν•λ” ν¨κ³Όμ μΈ μ•„ν‚¤ν…μ² ν¨ν„΄μ…λ‹λ‹¤.
  ```

## β… Verdict
**REQUEST CHANGES**

> **Reasoning:** μ½”λ“ μμ²΄λ” ν›λ¥­ν•κ² μ‘μ„±λμ—μµλ‹λ‹¤. λ‹¤λ§, μ΄ μ¤‘μ”ν• μ•„ν‚¤ν…μ² κ°μ„  μ‚¬ν•­μ„ ν”„λ΅μ νΈμ μ§€μ‹ μμ‚°μΌλ΅ λ‚¨κΈ°κΈ° μ„ν•΄ μ„ `Manual Update Proposal`μ— μ μ•λ λ‚΄μ©μΌλ΅ μΈμ‚¬μ΄νΈ λ¬Έμ„λ¥Ό μ‘μ„±ν•΄ μ£Όμ‹κΈ° λ°”λλ‹λ‹¤. λ¬Έμ„ν™”κ°€ μ™„λ£λλ©΄ `APPROVE` ν•κ² μµλ‹λ‹¤.
