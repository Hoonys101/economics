# Economic Simulation Insights (경제 시뮬레이션 통찰 보고서)

> **목적**: 시뮬레이션 구현 및 디버깅 과정에서 발견한 경제학적 통찰을 기록합니다.
> **최종 업데이트**: 2026-01-06

---

## Phase 8-B: Economic Reflux System (화폐 환류 시스템)

### 발견된 문제: Money Leakage (화폐 누수)

**현상**: 시뮬레이션이 장기간 실행되면 경제가 붕괴(디플레이션 스파이럴).

**원인 분석**:
1. **기업의 비임금 지출 (Non-Wage Expenditure)**:
   - 마케팅 비용, 재고 유지비, 설비 투자(CAPEX)가 "허공"으로 사라짐.
   - 실제 경제: 이 비용은 광고 대행사, 창고 회사, 기계 제조사의 **매출**이 됨.

2. **은행 이윤 유보 (Retained Earnings)**:
   - 은행이 예대마진(이자 수익 - 이자 비용)을 유보하면 통화량 감소.
   - 실제 경제: 은행 이익은 주주 배당 또는 직원 급여로 환원됨.

3. **정부 인프라 투자 (Government CAPEX)**:
   - 정부가 인프라에 투자한 비용이 사라짐.
   - 실제 경제: 건설 회사, 노동자에게 지급됨.

### 해결책: Implicit Service Sector (암묵적 서비스 섹터)

"보이지 않는 서비스 업종"을 가상의 단일 주체(Pass-through Entity)로 추상화:
- 모든 비임금 지출을 `RefluxPool`에 포획(capture)
- 매 틱 종료 시 활성 가계에 균등 분배(distribute)
- 이를 통해 **$Income \equiv Expenditure$** 항등식 강제 구현

### 경제학적 교훈

> **"돈은 창조되지도, 파괴되지도 않는다. 단지 이동할 뿐이다."**
> (화폐 보존 법칙 - Conservation of Money)

- 폐쇄 경제에서 **모든 지출은 누군가의 소득**이어야 함.
- 시뮬레이션에서 "비용"을 단순 차감하면 현실과 다른 결과 발생.
- **서비스 섹터의 역할**: 제조업의 비용이 서비스업의 수익이 되고, 다시 소비로 순환.

---

## 추가 인사이트 (향후 업데이트 예정)

### Mass Extinction Event (대량 멸종 현상)

**관찰**: 1000틱 Iron Test에서 20가구 중 0가구 생존 (0%), 4기업 중 2기업 생존 (50%).

**타임라인**:
- Tick 1~100: 정상 거래, 일부 노동 매칭 실패 시작
- Tick 100~400: 기업 매출 감소, 직원 해고 증가
- Tick 400~600: 연쇄 파산 시작, 실업률 급증
- Tick 600~1000: 전 가구 기아 사망 (생존 가구 0)

**원인 분석 (Labor Market Mismatch)**:
1. **임금 경직성**: `config.LABOR_MARKET_MIN_WAGE = 8.0` vs `config.HOUSEHOLD_MIN_WAGE_DEMAND = 10.0`
2. 기업 제안 임금 < 가계 요구 임금 → 노동 계약 실패
3. 노동 없음 → 생산 0 → 매출 0 → 기업 현금 고갈
4. 기업 파산 → 가계 임금 수입 완전 상실
5. 가계 자산 고갈 → 식량 구매 불가 → 기아 사망

**Reflux System 동작 확인**:
- Money Conservation Test: ✅ 통과 (화폐 총량 보존)
- 문제는 Reflux가 아닌 **노동 시장 파라미터 튜닝** 문제

**경제학적 교훈**:
> **"임금 경직성(Wage Rigidity)은 대공황의 원인 중 하나다."**

- 케인즈 경제학: 명목 임금의 하방 경직성이 실업을 유발
- 본 시뮬레이션: 가계의 reservation wage가 시장 청산 가격보다 높으면 거래 불가
- **해결책 후보**:
  1. `HOUSEHOLD_MIN_WAGE_DEMAND` 하향 조정
  2. Panic Mode에서 reservation wage 급락 로직 강화
  3. 실업 급여(Unemployment Benefit)로 최소 생존 보장

---

### Operation Fire Sale (유동성 위기와 가격 덤핑)


**현상**: 기업의 재고는 쌓이는데 가격은 내려가지 않아 거래가 단절됨 (Price Rigidity).

**원인 분석**:
1. AI가 "마진 감소"에 대한 부정적 피드백은 빠르게 학습하나, "현금 흐름(Cashflow)의 중요성"은 학습하지 못함.
2. 재고가 많아도 당장 현금이 있으면 기업은 가격을 내리지 않고 '배짱 영업'을 지속함.
3. 하지만 현금이 고갈(Liquidity Crisis)되어도 가격을 고수하면 결국 파산에 이름.

**해결책 (Solvency-Driven Pricing)**:
- **감가상각(Depreciation)**: 재고 보유 기간이 길어질수록 가치를 낮게 평가하여 가격 인하 유도.
- **유동성 공포(Liquidity Fear)**: 가동 수명(Runway = 현금 / 일일 지출)이 일정 수준 이하로 떨어지면 "패닉 세일" 모드 진입 (최대 80% 할인).

**경제학적 교훈**:
> **"생존은 이윤보다 우선한다 (Survival before Profit)."**

- 가격 결정은 단순히 '재고량'이 아니라 **'기업의 현금 상태(Solvency)'**에 의해 결정됨.
- 현금 여력이 있는 기업은 불황을 견디고, 현금이 없는 기업은 덤핑을 통해 시장 가격을 파괴하거나 퇴출됨.
- 이는 시장의 자연스러운 **구조조정(Restructuring)**과 **M&A**의 토대가 됨.

---


### Phase 19: Population Dynamics (인구 동역학)

**현상**: 교육 수준이 높고 경쟁이 치열한 환경에서 출산율이 급감하는 '인구 절벽' 발생.

**원인 분석**:
1. **기대치 불일치 (Expectation Mismatch)**:
   - 고학력 가계는 높은 기대 임금을 가지나, 실제 소득이 이에 못 미칠 경우 출산을 포기하는 K-전략 선택.
2. **시간 빈곤 (Time Poverty)**:
   - 전업 노동 시간이 증가할수록 `CHILDCARE_TIME_REQUIRED` 제약을 충족하지 못해 생물학적/사회적 출산 불능 상태 발생.
3. **사회적 모방과 경쟁 (r/K Selection)**:
   - 하위 계층은 불확실성 속에서 r-전략(다산)을, 상위/중위 계층은 지위 유지를 위해 K-전략(저출산/고투자)을 취하는 경향 확인.

**해결책 (Policy Actuators)**:
- **교육 비용 보조 및 시간 지원**: 보육 시간 부담을 완화하거나 기대 임금 격차를 줄이는 정책적 개입 필요.
- **상속세(Inheritance Tax)**: 부의 대물림을 제어하여 기회 불평등을 완화하고 정부 세수를 확보하는 장치로 작동.

**경제학적 교훈**:
> **"인구는 경제의 결과인 동시에 원인이다 (Population is both an outcome and a driver of the economy)."**

- 경제적 압박(Rat Race)은 인구 구조를 변화시키며, 이는 장기적으로 노동 공급과 내수 시장 규모에 결정적 영향을 미침.
- 진화심리학적 관점(r/K)의 도입은 단순한 소득-출산 상관관계를 넘어선 복합적인 인구 역학을 설명함.

---

---

## Phase 29: Money Conservation & Zero-Sum (화폐 보존 및 제로섬)

### [M2 Definition]
**현상**: 정부에 세금을 납부하거나 정부가 인프라 투자를 할 때마다 시스템 전체에서 거액의 누수(Leak) 또는 창조(Creation)가 보고됨.
**원인**: M2(총 통화량) 정의에서 '정부 자산'을 누락함. 가계 소득이 정부로 이전될 때 시스템은 이를 "통계 범위 밖으로의 소멸"로 오인함.
**해결**: `WorldState.calculate_total_money()`에 `government.assets`를 포함시켜 정부를 경제 내적 주체로 명시함.
**교훈**: 폐쇄 경제 시뮬레이션에서 '정부'는 단순한 규칙 관리자가 아닌, 유동성을 보유하고 이동시키는 핵심 경제 주체로 다뤄져야 함.

### [Tax Collection & Object Purity]
**현상**: 에이전트 사망이나 파산 시 세금 징수 통계가 누락되고 `TypeError`가 발생함.
**원인**: `TransactionProcessor`가 세금 징수 로직에 납세자의 ID만 전달함. `TaxAgency`는 안전한 거래를 위해 실제 Agent 객체를 요구했으나, 타입 불일치로 인해 징수 로직이 무시됨.
**해결**: 모든 세금 및 정산 로직에서 ID 대신 **Agent 객체 참조**를 직접 전달하도록 수정함.
**교훈**: 대규모 시뮬레이션에서 ID 기반 룩업은 정합성 오류를 일으키기 쉬움. 트랜잭션 수명 주기 동안 객체의 유효성을 보장하기 위해 직접 참조를 유지하는 것이 안전함.

### [Infrastructure Drift Fix]
**현상**: 인프라 투자(5,000) 시 매 틱마다 +299.7760의 미세한 자금 창조 현상 발생.
**원인**: 범용 `TransactionProcessor`를 통해 정산할 경우, 중간에 판매세(Sales Tax)나 기타 부수적 로직이 개입하여 투자 원금이 변동됨.
**해결**: 정부-환류 시스템 간의 직접 투자는 `SettlementSystem.transfer`를 직접 호출하여 중간 프로세서의 개입 없이 원금을 보존함.
**교훈**: 핵심 정책적 자산 이동(예: 국고 투자)은 표준 상거래 프로세서와 분리하여 원금 정합성을 100% 보장해야 함.

## 수집 방법

Jules(구현 에이전트)가 디버깅 과정에서 발견한 인사이트를 아래 형식으로 보고:

```
### [Phase/Feature 이름]
**현상**: [관찰된 문제]
**원인**: [근본 원인 분석]
**해결**: [적용한 해결책]
**교훈**: [경제학적 통찰]
```
