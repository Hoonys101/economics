{
  "gemini": {
    "worker": "audit",
    "instruction": "Analyze the readiness for WO-116 Phase B (Tick Sequence Normalization). 1. Review `simulation/tick_scheduler.py` to identify all asset transfers (Tax, Profit, Welfare, Debt) currently running outside the 'Transactions' phase. 2. Evaluate if moving these to the Transactions phase causes data dependencies or circular logic. 3. Verify if the merged Phase A changes are sufficient to support this sequence shift. 4. Propose a safe implementation path for Jules to ensure 100% zero-sum integrity.",
    "context": [
      "simulation/tick_scheduler.py",
      "simulation/systems/inheritance_manager.py",
      "simulation/systems/ma_manager.py",
      "simulation/components/finance_department.py",
      "simulation/agents/government.py",
      "modules/finance/system.py",
      "simulation/bank.py"
    ],
    "output": "design/audits/AUDIT_WO116_PHASE_B_READINESS.md",
    "model": "pro"
  },
  "gemini_spec": {
    "worker": "spec",
    "instruction": "Based on the findings in `design/audits/AUDIT_WO116_PHASE_B_READINESS.md`, create a detailed implementation specification for WO-116 Phase B (Tick Sequence Normalization). 1. Define the exact line-by-line changes in `TickScheduler.py`. 2. Specify how to register 'floating' transactions (Tax/Profit) into the Transaction Phase. 3. Ensure the `SettlementSystem` can handle these batch settlements atomically. 4. Define the verification criteria for zero-sum success.",
    "context": [
      "design/audits/AUDIT_WO116_PHASE_B_READINESS.md",
      "simulation/tick_scheduler.py",
      "modules/finance/system.py",
      "simulation/bank.py"
    ],
    "output": "design/specs/WO116_PHASE_B_SPEC.md",
    "model": "pro"
  },
  "verify": {
    "worker": "audit",
    "instruction": "Final Forensic Audit (V4). Read 'design/REPORTS/final_v4_check.log'. 1. Analyze the -185k leak at Tick 1. Why did it INCREASE after the fix? 2. Look for patterns: Is money vanishing (Negative Leak) or appearing (Positive Leak)? 3. Compare Transaction Volume with System Asset Delta. Identify the 'Invisible Hand' or component still calling _sub_assets directly. 4. Correlate with 'simulation/initialization/initializer.py' or 'Tick 1' startup sequence. 5. Produce 'design/REPORTS/FINAL_V4_VERDICT.md'.",
    "context": [
      "design/REPORTS/final_v4_check.log",
      "simulation/initialization/initializer.py",
      "simulation/tick_scheduler.py"
    ],
    "output": "design/REPORTS/FINAL_V4_VERDICT.md",
    "model": "pro"
  },
  "root_cause": {
    "worker": "audit",
    "instruction": "Root Cause Profiling. 1. Use 'design/REPORTS/FINAL_V4_VERDICT.md' as your case file. 2. Dive into the attached code to find the EXACT BUG for the 3 anomalies: (A) The -185k Tick 1 leak - check start-of-simulation logic. (B) The systemic +293.3120 creation - audit 'infrastructure' and 'deposit_interest' math. (C) The Tax Collection Error at Tick 256+ - fix the agent de-registration in LifecycleManager. 3. Produce 'design/audits/ROOT_CAUSE_PROFILE.md' with code snippets and fix strategies.",
    "context": [
      "design/REPORTS/FINAL_V4_VERDICT.md",
      "simulation/tick_scheduler.py",
      "simulation/systems/lifecycle_manager.py",
      "simulation/systems/tax_agency.py",
      "simulation/agents/government.py",
      "simulation/bank.py"
    ],
    "output": "design/audits/ROOT_CAUSE_PROFILE.md",
    "model": "pro"
  },
  "purity_audit": {
    "worker": "audit",
    "instruction": "Deep Asset Purity Scan. 1. Search for all direct asset mutations: regex patterns like `\\.(?:_)?assets\\s*[+\\-*/]?=` and calls to `_sub_assets`/`_add_assets`. 2. Identify why these markers are not yet replaced by `SettlementSystem.transfer`. 3. Focus on the Tick 1 startup sequence and agent initialization. 4. Produce 'design/audits/ASSET_PURITY_REPORT.md' listing every 'illegal' mutation with its line number and a fix recommendation.",
    "context": [
      "simulation/"
    ],
    "output": "design/audits/ASSET_PURITY_REPORT.md",
    "model": "pro"
  },
  "dep_audit": {
    "worker": "audit",
    "instruction": "Audit project dependencies. 1. Scan all .py files (especially under `tests/`) for `import` and `from ... import` statements. 2. Compare the identified packages with the contents of `requirements.txt`. 3. Identify: (a) Used but not in requirements.txt, (b) In requirements.txt but never used, (c) System/Internal modules vs External packages. 4. Produce a report 'design/audits/DEPENDENCY_AUDIT.md' with a recommended new requirements.txt content.",
    "context": [
      "requirements.txt",
      "simulation/",
      "tests/",
      "scripts/"
    ],
    "output": "design/audits/DEPENDENCY_AUDIT.md",
    "model": "pro"
  },
  "jules": {
    "command": "create",
    "title": "WO-116_Leak_Hunter",
    "instruction": "Loop 4: Erasing Shadow Mutations. READ 'design/specs/WO116_LOOP4_SHADOW_FIX.md'. The forensic tool proved that -63k leaks occur without transactions. Fix the 5 suspect files (Inheritance, Liquidation, Bank, Gov, BaseAgent) to ensure 100% ledger purity. Tick 1 must be 0.0000 leak.",
    "wait": false
  },
  "mission_profiler_engine": {
    "command": "create",
    "title": "WO-116_Root_Cause_Profiler",
    "instruction": "Deep Root Cause Profiling. 1. Read 'design/REPORTS/FINAL_V4_VERDICT.md'. 2. Audit the 5 core files (TickScheduler, Lifecycle, TaxAgency, Gov, Bank). 3. Identify the EXACT line causing the -185k Tick 1 deletion. 4. Find the math error for +293.3120 anomaly. 5. Fix the de-registration bug in LifecycleManager. Output findings to 'design/audits/ROOT_CAUSE_PROFILE.md'.",
    "wait": false
  },
  "git_review": {
    "branch": "main",
    "instruction": "DTO Purity Gate 초기 구현분 검토"
  },
  "storage_audit": {
    "worker": "audit",
    "instruction": "Analyze the directories `design/gemini_output`, `design/specs`, and `design/work_orders` to identify redundant or obsolete files that can be safely deleted to free up space.",
    "context": [
      "design/gemini_output",
      "design/specs",
      "design/work_orders"
    ],
    "output": "design/audits/STORAGE_CLEANUP_REPORT.md",
    "model": "pro"
  },
  "harvest": {}
}
