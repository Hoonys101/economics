## 로거 및 로그 셀렉터 사용 지침

*   **로거 (`utils/logger.py`)**: 시뮬레이션 내 모든 중요한 이벤트(의사결정, 거래, 상태 변화 등)는 `Logger` 인스턴스를 통해 기록되어야 합니다. `logger.log(tick, agent_type, agent_id, method_name, message)` 형식을 준수하여 일관된 로그를 남깁니다.
*   **로그 셀렉터 (`log_selector.py`)**: 시뮬레이션 실행 후 `simulation_results.csv` 파일에 저장된 로그를 분석할 때는 반드시 `log_selector.py`의 `select_logs` 함수를 활용합니다. 필요한 정보(특정 에이전트, 특정 메서드, 특정 틱 범위 등)만 필터링하여 효율적으로 분석합니다.
*   **디버깅 원칙**: 문제가 발생했을 경우, `print` 문 대신 `Logger`를 사용하여 상세한 디버그 로그를 남기고, `log_selector`를 통해 해당 로그를 추출하여 분석합니다. 불필요한 `print` 문은 커밋 전에 제거합니다.
*   **대용량 로그 처리**: 한 번에 출력되는 로그의 양이 3000개를 초과할 경우 (또는 콘솔/환경의 제한에 따라), 로그를 파일로 저장하거나 틱(tick) 범위 등으로 나누어 순차적으로 처리해야 합니다. `utils/temp` 디렉토리를 활용하여 분할된 로그 파일을 저장하고 분석하는 것을 권장합니다.

# 개발 지침

1.  **업무 파악**: 업무에 들어가기 전에 기존의 결과물을 철저히 파악합니다.
2.  **전략 협의 및 설계**: 개발 전략을 협의하고, 결정된 내용을 설계안에 명확히 포함한 후 구현을 시작합니다.
3.  **구현**: 설계안에 따라 코드를 구현합니다.
4.  **설계안 업데이트**: 구현 과정에서 설계안 또는 전략안과 다르게 적용된 부분이 있다면, 해당 내용을 실제 구현 내용에 맞춰 전략안과 설계안을 즉시 수정합니다.
5.  **코드 수정 원칙**: 코드를 수정할 때, 문제되는 부분만 수정하고, 나머지는 그대로 둡니다. (필요시 수정 전 백업 및 확인 권장)
6.  **로그 관리**: 유틸리티 객체의 로깅 기능을 이용하여 로그를 실시간으로 파일에 저장합니다.
7.  **설정 파일 동기화**: `config.py`와 같은 설정 파일의 주요 파라미터(예: 시뮬레이션 틱 수)는 항상 최신 설계 문서와 일치하도록 유지해야 합니다. 불일치는 시뮬레이션 결과의 신뢰성을 저해하고 혼란을 야기할 수 있습니다.
8.  **에이전트 생성 로직 중앙화**: `main.py`와 `app.py` 등 여러 곳에서 에이전트를 생성하는 로직이 중복될 경우, 이를 별도의 팩토리(Factory) 함수로 분리하여 중앙에서 관리해야 합니다. 이는 코드 중복을 제거하고 유지보수성을 크게 향상시킵니다.

**중요**: 구현 시 설계안에서 고려되지 않은 사항이 발생하고, 두 번의 시도에서 실패한다면, 해당 트랜잭션을 초기화하고 사용자에게 다시 협의를 요청합니다.

# AI 모델 개발 및 활용 지침

*   **전략 패턴 활용**: 에이전트의 의사결정 로직은 `DecisionEngine` 추상 클래스를 따르는 전략 패턴으로 구현됩니다. AI 기반 의사결정 엔진(`AIDecisionEngine`)은 기존의 절차적 엔진과 동일한 인터페이스를 유지하여 유연하게 교체 가능해야 합니다.
*   **경험 데이터 수집**: AI 모델 훈련을 위해 각 틱(tick)마다 에이전트의 행동 전후 상태 변화를 기록하고, 이를 바탕으로 보상(Reward)을 계산하여 경험 데이터를 수집합니다.
*   **보상 함수 설계**: 보상 함수는 에이전트의 '가치관(Value Orientation)'에 따라 다르게 정의됩니다. 욕구는 낮은 상태로 유지되는 것이 목표이므로, 욕구가 *증가한 경우에만* 보상에 음의 영향을 미치도록 설계합니다.
*   **모델 영속성**: 훈련된 AI 모델은 시뮬레이션 간에 지속적인 학습을 위해 파일로 저장되고 불러와져야 합니다. 각 가치관별 모델은 고유한 파일 경로를 사용합니다.
*   **다중 가치관**: 여러 가치관을 지향하는 AI 모델을 구현하여 에이전트의 행동 다양성을 확보합니다. 각 가치관별 모델은 독립적으로 훈련되고 관리됩니다.
*   **입력 파라미터 확장**: AI 모델의 입력(상태)은 에이전트의 자산, 욕구뿐만 아니라 고용 상태, 노동 스킬, 사회적 지위, 생산 목표, 고용 인원 등 의사결정에 영향을 미칠 수 있는 모든 관련 파라미터를 포함해야 합니다.