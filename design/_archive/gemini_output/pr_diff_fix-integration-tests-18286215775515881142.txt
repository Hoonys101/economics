diff --git a/communications/insights/FIX-TESTS-INTEGRATION.md b/communications/insights/FIX-TESTS-INTEGRATION.md
new file mode 100644
index 0000000..6dd3c22
--- /dev/null
+++ b/communications/insights/FIX-TESTS-INTEGRATION.md
@@ -0,0 +1,26 @@
+# Technical Debt Report: Integration Test Repair
+
+## Context
+Following the merge of `restore-integration-tests` and `jules-fix-corporate-tests`, the test suite exhibited widespread failures. This report documents the technical debt uncovered during the repair process.
+
+## Phenomenon
+1.  **Systemic Setup Failures**: `OSError` in `CrisisMonitor` due to `MagicMock` leakage into filenames.
+2.  **Refactoring Lag**: Integration tests failed to reflect the `_econ_state` / `_bio_state` decomposition of agents, accessing legacy flat attributes on Mocks.
+3.  **DTO Mismatches**: Tests instantiated DTOs with outdated signatures (`HousingMarketSnapshotDTO`) or called methods with legacy arguments (`make_decision`).
+4.  **Mock Fragility**: `Phase4_Lifecycle` renaming caused immediate test breakage where patch targets were hardcoded string paths.
+
+## Cause
+*   **Mock Abuse**: The `mock_repository` fixture mocked `repo.save_simulation_run` but the code called `repo.runs.save_simulation_run`, leading to a Mock object propagating into file system operations.
+*   **Partial Refactoring**: Core agents were refactored (Stage B), but the corresponding mock factories in integration tests were not updated synchronously.
+*   **Lack of Typed Test Helpers**: Tests constructed raw DTOs manually instead of using updated factories, making them brittle to signature changes.
+
+## Solution
+*   **Robust Mocking**: Updated `test_engine.py` to mock the correct method chain for `repo.runs.save_simulation_run`.
+*   **Mock Refactor**: Updated `Mock(spec=Household)` usage to explicitly initialize nested state DTOs (`_econ_state`, `_bio_state`).
+*   **DTO Standardization**: Updated all `make_decision` calls to use `DecisionInputDTO` and fixed DTO constructors in tests.
+*   **Patch Correction**: Renamed `Phase4_Lifecycle` to `Phase_Bankruptcy` in test patches.
+
+## Lessons Learned
+*   **Mock State, Not Just Interface**: When refactoring stateful objects (like Agents), mocks must replicate the new state structure (nested DTOs) if the system under test accesses it directly.
+*   **Use Factories**: Test data should be generated via factories that are updated centrally, rather than instantiated inline in every test.
+*   **Verify Mocks**: Mocks returning Mocks (recursive mocking) can lead to silent failures or weird errors (like the filename issue). Explicitly setting return values (e.g., `return_value=1`) prevents this.
diff --git a/simulation/dtos/api.py b/simulation/dtos/api.py
index e0fa097..20e0bc5 100644
--- a/simulation/dtos/api.py
+++ b/simulation/dtos/api.py
@@ -127,7 +127,13 @@ class OrderDTO:
     price: float
 
 # Phase 1: MarketSnapshotDTO moved to modules.system.api
-from modules.system.api import MarketSnapshotDTO
+from modules.system.api import (
+    MarketSnapshotDTO,
+    HousingMarketSnapshotDTO,
+    LoanMarketSnapshotDTO,
+    LaborMarketSnapshotDTO,
+    HousingMarketUnitDTO
+)
 # Phase 1: EconomicIndicatorsDTO from modules.simulation.api
 from modules.simulation.api import EconomicIndicatorsDTO
 
diff --git a/tests/integration/scenarios/diagnosis/test_agent_decision.py b/tests/integration/scenarios/diagnosis/test_agent_decision.py
index 2d24551..a11c444 100644
--- a/tests/integration/scenarios/diagnosis/test_agent_decision.py
+++ b/tests/integration/scenarios/diagnosis/test_agent_decision.py
@@ -4,6 +4,7 @@ from unittest.mock import MagicMock
 from simulation.models import Order
 from simulation.core_agents import Household
 from simulation.firms import Firm
+from simulation.dtos.api import DecisionInputDTO, MarketSnapshotDTO, HousingMarketSnapshotDTO, LaborMarketSnapshotDTO
 
 def test_household_makes_decision(simple_household):
     """Spec 0: 에이전트가 주문을 생성하는지 검증 (Household)"""
@@ -21,12 +22,19 @@ def test_household_makes_decision(simple_household):
     simple_household.decision_engine.make_decisions = MagicMock(return_value=([expected_order], None))
 
     # Act
-    orders, tactic = simple_household.make_decision(
-        markets={},
+    input_dto = DecisionInputDTO(
         goods_data=[],
         market_data={},
-        current_time=1
+        current_time=1,
+        market_snapshot=MarketSnapshotDTO(
+            tick=1,
+            market_signals={},
+            housing=HousingMarketSnapshotDTO(for_sale_units=[], units_for_rent=[], avg_rent_price=0.0, avg_sale_price=0.0),
+            loan=None,
+            labor=LaborMarketSnapshotDTO(avg_wage=10.0)
+        )
     )
+    orders, tactic = simple_household.make_decision(input_dto)
 
     # Assert
     assert len(orders) == 1
@@ -49,14 +57,13 @@ def test_firm_makes_decision(simple_firm):
     simple_firm.decision_engine.make_decisions = MagicMock(return_value=([expected_order], None))
 
     # Act
-    # Firm likely has make_decision too? Checking Firm class would be good,
-    # but assuming consistency with BaseAgent.
-    orders, tactic = simple_firm.make_decision(
-        markets={},
+    input_dto = DecisionInputDTO(
         goods_data=[],
         market_data={},
-        current_time=1
+        current_time=1,
+        market_snapshot=MarketSnapshotDTO(tick=1, market_signals={}, housing=None, loan=None, labor=None)
     )
+    orders, tactic = simple_firm.make_decision(input_dto)
 
     # Assert
     assert len(orders) == 1
diff --git a/tests/integration/scenarios/phase21/test_automation.py b/tests/integration/scenarios/phase21/test_automation.py
index 4b2c2c0..89a3685 100644
--- a/tests/integration/scenarios/phase21/test_automation.py
+++ b/tests/integration/scenarios/phase21/test_automation.py
@@ -33,11 +33,12 @@ def test_firm_automation_init(firm_mock):
 def test_production_function_with_automation(firm_mock):
     """Test modified Cobb-Douglas production function."""
     # Setup
-    firm_mock.employees = [Mock(labor_skill=1.0)] # 1 Employee
+    firm_mock.hr.employees = [Mock(labor_skill=1.0)] # 1 Employee
     firm_mock.capital_stock = 100.0
     firm_mock.productivity_factor = 10.0
     firm_mock.config.labor_alpha = 0.5
     firm_mock.config.automation_labor_reduction = 0.5
+    firm_mock.config.labor_elasticity_min = 0.0 # Allow alpha to drop below default 0.5
 
     # Disable depreciation for precise calc
     firm_mock.config.capital_depreciation_rate = 0.0
@@ -65,9 +66,14 @@ def test_production_function_with_automation(firm_mock):
 def test_system2_planner_guidance(firm_mock):
     """Test System 2 Planner logic."""
     # Override config for this test to make automation cheaper
+    # Set both lowercase (DTO standard) and uppercase (System2Planner access) just in case
     firm_mock.config.automation_cost_per_pct = 100.0 # Was 1000.0
+    firm_mock.config.AUTOMATION_COST_PER_PCT = 100.0
+    firm_mock.config.AUTOMATION_LABOR_REDUCTION = 0.5
+    firm_mock.config.FIRM_MAINTENANCE_FEE = 10.0 # Ensure maintenance is low enough
 
-    firm_mock.system2_planner = FirmSystem2Planner(firm_mock, config) # Pass config module for Planner if needed?
+    # Pass firm_mock.config instead of global config to ensure override is respected
+    firm_mock.system2_planner = FirmSystem2Planner(firm_mock, firm_mock.config)
 
     # Mock Data
     market_data = {}
@@ -79,7 +85,15 @@ def test_system2_planner_guidance(firm_mock):
 
     # Test CASH_COW personality
     firm_mock.personality = Personality.CASH_COW
-    guidance = firm_mock.system2_planner.project_future(1, market_data)
+
+    firm_state = MagicMock()
+    firm_state.finance.revenue_this_turn = 5000.0
+    firm_state.finance.balance = 300000.0
+    firm_state.production.automation_level = 0.0
+    firm_state.hr.employees_data = {1: {'wage': 1000.0}, 2: {'wage': 1000.0}}
+    firm_state.agent_data = {"personality": Personality.CASH_COW}
+
+    guidance = firm_mock.system2_planner.project_future(1, market_data, firm_state=firm_state)
 
     # Should favor automation if profitable
     # With lower cost (100.0 * 80 gap = 8000 cost) vs 80k benefit, highly profitable.
@@ -87,7 +101,9 @@ def test_system2_planner_guidance(firm_mock):
 
     # Test GROWTH_HACKER
     firm_mock.personality = Personality.GROWTH_HACKER
-    guidance = firm_mock.system2_planner.project_future(11, market_data)
+    firm_state.agent_data = {"personality": Personality.GROWTH_HACKER}
+
+    guidance = firm_mock.system2_planner.project_future(11, market_data, firm_state=firm_state)
 
     # Expansion mode should be MA if rich
     assert guidance["expansion_mode"] == "MA"
diff --git a/tests/integration/scenarios/phase21/test_firm_system2.py b/tests/integration/scenarios/phase21/test_firm_system2.py
index 4a690fa..c6babbf 100644
--- a/tests/integration/scenarios/phase21/test_firm_system2.py
+++ b/tests/integration/scenarios/phase21/test_firm_system2.py
@@ -29,14 +29,26 @@ def test_system2_planner_guidance_automation_preference(firm_mock):
     """Test that CASH_COW prefers automation when profitable."""
     # Setup cheap automation scenario
     firm_mock.config.automation_cost_per_pct = 100.0
+    firm_mock.config.AUTOMATION_COST_PER_PCT = 100.0
+    firm_mock.config.AUTOMATION_LABOR_REDUCTION = 0.5
+    firm_mock.config.FIRM_MAINTENANCE_FEE = 10.0
+
     firm_mock.employee_wages = {1: 1000.0}
     firm_mock.revenue_this_turn = 5000.0
     firm_mock._assets = 50000.0
 
     firm_mock.personality = Personality.CASH_COW
-    firm_mock.system2_planner = FirmSystem2Planner(firm_mock, config)
+    firm_mock.system2_planner = FirmSystem2Planner(firm_mock, firm_mock.config)
+
+    # Create Mock FirmStateDTO
+    firm_state = MagicMock()
+    firm_state.finance.revenue_this_turn = 5000.0
+    firm_state.finance.balance = 50000.0
+    firm_state.production.automation_level = 0.0
+    firm_state.hr.employees_data = {1: {'wage': 1000.0}}
+    firm_state.agent_data = {"personality": Personality.CASH_COW}
 
-    guidance = firm_mock.system2_planner.project_future(1, {})
+    guidance = firm_mock.system2_planner.project_future(1, {}, firm_state=firm_state)
     assert guidance["target_automation"] > 0.0
 
 def test_system2_planner_guidance_ma_preference(firm_mock):
@@ -44,8 +56,16 @@ def test_system2_planner_guidance_ma_preference(firm_mock):
     firm_mock._assets = 1000000.0
     firm_mock.revenue_this_turn = 10000.0
     firm_mock.personality = Personality.GROWTH_HACKER
-    firm_mock.system2_planner = FirmSystem2Planner(firm_mock, config)
+    firm_mock.system2_planner = FirmSystem2Planner(firm_mock, firm_mock.config)
+
+    # Create Mock FirmStateDTO
+    firm_state = MagicMock()
+    firm_state.finance.revenue_this_turn = 10000.0
+    firm_state.finance.balance = 1000000.0
+    firm_state.production.automation_level = 0.0
+    firm_state.hr.employees_data = {}
+    firm_state.agent_data = {"personality": Personality.GROWTH_HACKER}
 
-    guidance = firm_mock.system2_planner.project_future(1, {})
+    guidance = firm_mock.system2_planner.project_future(1, {}, firm_state=firm_state)
     assert guidance["expansion_mode"] == "MA"
     assert guidance["rd_intensity"] == 0.2
diff --git a/tests/integration/scenarios/test_stress_scenarios.py b/tests/integration/scenarios/test_stress_scenarios.py
index 5c1786e..d752384 100644
--- a/tests/integration/scenarios/test_stress_scenarios.py
+++ b/tests/integration/scenarios/test_stress_scenarios.py
@@ -16,6 +16,22 @@ class TestPhase28StressScenarios:
     def mock_households(self):
         h1 = MagicMock(spec=Household)
         h1.id = 1
+
+        # Setup nested states
+        h1._econ_state = MagicMock()
+        h1._econ_state.assets = 1000.0
+        h1._econ_state.inventory = {}
+        h1._econ_state.is_employed = False
+        h1._econ_state.perceived_avg_prices = {"item1": 10.0}
+        h1._econ_state.expected_inflation = {"item1": 0.0}
+
+        h1._bio_state = MagicMock()
+        h1._bio_state.is_active = True
+        h1._bio_state.needs = {}
+
+        h1._social_state = MagicMock()
+
+        # Sync top-level properties (Legacy/Convenience)
         h1.assets = 1000.0
         h1.inventory = {}
         h1.is_active = True
@@ -25,11 +41,25 @@ class TestPhase28StressScenarios:
         h1.adaptation_rate = 0.1
         h1.price_history = {"item1": []}
         h1.expected_inflation = {"item1": 0.0}
+        # Wire consume to use consumption manager or simple mock
+        h1.consume = MagicMock()
 
         h2 = MagicMock(spec=Household)
         h2.id = 2
+
+        h2._econ_state = MagicMock()
+        h2._econ_state.assets = 5000.0
+        h2._econ_state.inventory = {}
+
+        h2._bio_state = MagicMock()
+        h2._bio_state.is_active = True
+        h2._bio_state.needs = {}
+
+        h2._social_state = MagicMock()
+
         h2.assets = 5000.0 # Wealthy
         h2.is_active = True
+        h2.consume = MagicMock()
 
         return [h1, h2]
 
diff --git a/tests/integration/test_decision_engine_integration.py b/tests/integration/test_decision_engine_integration.py
index 8d7ea20..8b458cb 100644
--- a/tests/integration/test_decision_engine_integration.py
+++ b/tests/integration/test_decision_engine_integration.py
@@ -13,8 +13,9 @@ from simulation.decisions.ai_driven_household_engine import (
 )
 from simulation.decisions.ai_driven_firm_engine import AIDrivenFirmDecisionEngine
 import config
-from simulation.ai.api import Tactic, Aggressiveness # Import Tactic and Aggressiveness
-from simulation.core_markets import Market # Import Market
+from simulation.ai.api import Tactic, Aggressiveness
+from simulation.core_markets import Market
+from simulation.dtos.api import DecisionInputDTO, MarketSnapshotDTO, HousingMarketSnapshotDTO, LoanMarketSnapshotDTO, LaborMarketSnapshotDTO
 
 # Add project root to sys.path
 current_dir = os.path.dirname(os.path.abspath(__file__))
@@ -60,11 +61,19 @@ def mock_logger():
 def household():
     hh = Mock(spec=Household)
     hh.id = 1
-    hh._assets = 1000.0
-    hh.inventory = {"food": 10.0}
-    hh.needs = {"survival_need": 50.0, "labor_need": 0.0}
-    hh.perceived_avg_prices = {"food": 10.0}
-    hh.is_employed = False
+
+    # Initialize nested states
+    hh._econ_state = Mock()
+    hh._econ_state.assets = 1000.0
+    hh._econ_state.inventory = {"food": 10.0}
+    hh._econ_state.is_employed = False
+    hh._econ_state.perceived_avg_prices = {"food": 10.0}
+
+    hh._bio_state = Mock()
+    hh._bio_state.needs = {"survival_need": 50.0, "labor_need": 0.0}
+
+    hh._social_state = Mock()
+
     hh.goods_info_map = {g["id"]: g for g in GOODS_DATA}
     hh.decision_engine = Mock(spec=AIDrivenHouseholdDecisionEngine)
     hh.decision_engine.ai_engine = (
@@ -165,12 +174,14 @@ class TestDecisionEngineIntegration:
             (Tactic.ADJUST_PRICE, Aggressiveness.NORMAL)
         )
         markets = {"goods_market": goods_market}
-        orders, _ = firm.make_decision(
-            markets=markets,
+
+        input_dto = DecisionInputDTO(
             goods_data=GOODS_DATA,
             market_data={"all_households": [], "goods_data": GOODS_DATA},
-            current_time=1
+            current_time=1,
+            market_snapshot=MarketSnapshotDTO(tick=1, market_signals={}, housing=None, loan=None, labor=None)
         )
+        orders, _ = firm.make_decision(input_dto)
 
         for order in orders:
             goods_market.place_order(order, current_time=1)
@@ -201,12 +212,14 @@ class TestDecisionEngineIntegration:
         )
 
         markets = {"goods_market": goods_market}
-        orders, _ = household.make_decision(
-            markets=cast(Dict[str, Market], markets),
+
+        input_dto = DecisionInputDTO(
             goods_data=GOODS_DATA,
             market_data={"all_households": [], "goods_data": GOODS_DATA},
-            current_time=1
+            current_time=1,
+            market_snapshot=MarketSnapshotDTO(tick=1, market_signals={}, housing=None, loan=None, labor=None)
         )
+        orders, _ = household.make_decision(input_dto)
 
         for order in orders:
             goods_market.place_order(order, current_time=1)
@@ -238,12 +251,14 @@ class TestDecisionEngineIntegration:
             (Tactic.PARTICIPATE_LABOR_MARKET, Aggressiveness.NORMAL)
         )
         markets = {"labor_market": labor_market}
-        orders, _ = household.make_decision(
-            markets=cast(Dict[str, Market], markets),
+
+        input_dto = DecisionInputDTO(
             goods_data=GOODS_DATA,
             market_data={"all_households": [household], "goods_data": GOODS_DATA},
             current_time=1,
+            market_snapshot=MarketSnapshotDTO(tick=1, market_signals={}, housing=None, loan=None, labor=None)
         )
+        orders, _ = household.make_decision(input_dto)
 
         for order in orders:
             labor_market.place_order(order, current_time=1)
@@ -272,12 +287,14 @@ class TestDecisionEngineIntegration:
             (Tactic.ADJUST_WAGES, Aggressiveness.NORMAL)
         )
         markets = {"labor_market": labor_market}
-        orders, _ = firm.make_decision(
-            markets=markets,
+
+        input_dto = DecisionInputDTO(
             goods_data=GOODS_DATA,
             market_data={"all_households": [], "goods_data": GOODS_DATA},
-            current_time=1
+            current_time=1,
+            market_snapshot=MarketSnapshotDTO(tick=1, market_signals={}, housing=None, loan=None, labor=None)
         )
+        orders, _ = firm.make_decision(input_dto)
 
         for order in orders:
             labor_market.place_order(order, current_time=1)
diff --git a/tests/integration/test_government_fiscal_integration.py b/tests/integration/test_government_fiscal_integration.py
index 56ea4d5..99aa66d 100644
--- a/tests/integration/test_government_fiscal_integration.py
+++ b/tests/integration/test_government_fiscal_integration.py
@@ -66,4 +66,5 @@ class TestGovernmentFiscalIntegration:
         args, _ = gov.fiscal_policy_manager.determine_fiscal_stance.call_args
         snapshot = args[0]
         assert isinstance(snapshot, MarketSnapshotDTO)
-        assert snapshot.prices["basic_food"] == 20.0
+        # Check market_data field (legacy support) since MarketSnapshotDTO doesn't have prices attribute
+        assert snapshot.market_data["goods_market"]["basic_food_current_sell_price"] == 20.0
diff --git a/tests/integration/test_td194_integration.py b/tests/integration/test_td194_integration.py
index a667831..c858a44 100644
--- a/tests/integration/test_td194_integration.py
+++ b/tests/integration/test_td194_integration.py
@@ -39,6 +39,7 @@ class TestTD194Integration:
             market_data={},
             housing=HousingMarketSnapshotDTO(
                 for_sale_units=[],
+                units_for_rent=[],
                 avg_rent_price=100.0,
                 avg_sale_price=20000.0
             ),
diff --git a/tests/integration/test_tick_normalization.py b/tests/integration/test_tick_normalization.py
index a2b3ffc..4848241 100644
--- a/tests/integration/test_tick_normalization.py
+++ b/tests/integration/test_tick_normalization.py
@@ -82,7 +82,7 @@ class TestTickNormalization:
              patch('simulation.orchestration.tick_orchestrator.Phase1_Decision') as MockPhase1, \
              patch('simulation.orchestration.tick_orchestrator.Phase2_Matching') as MockPhase2, \
              patch('simulation.orchestration.tick_orchestrator.Phase3_Transaction') as MockPhase3, \
-             patch('simulation.orchestration.tick_orchestrator.Phase4_Lifecycle') as MockPhase4, \
+             patch('simulation.orchestration.tick_orchestrator.Phase_Bankruptcy') as MockPhase4, \
              patch('simulation.orchestration.tick_orchestrator.Phase5_PostSequence') as MockPhase5:
 
              # Configure mocks to return the state passed to execute
diff --git a/tests/integration/test_wo167_grace_protocol.py b/tests/integration/test_wo167_grace_protocol.py
index 247bc3c..51ad1e5 100644
--- a/tests/integration/test_wo167_grace_protocol.py
+++ b/tests/integration/test_wo167_grace_protocol.py
@@ -18,16 +18,19 @@ class TestGraceProtocol:
         config.FIRM_CLOSURE_TURNS_THRESHOLD = 5
         config.LIQUIDITY_NEED_INCREASE_RATE = 1.0
 
-        firm = MagicMock(spec=Firm)
+        # Use MagicMock without spec to avoid property/attribute conflicts with real FinanceDepartment attachment
+        firm = MagicMock()
         firm.id = 1
         firm.is_active = True
         firm.age = 10
         firm.needs = {"liquidity_need": 0.0}
-        firm.finance.balance = 0.0 # No cash
+        # firm.finance will be overwritten below, but we initialize common attrs
         firm.inventory = {"wood": 10.0}
         firm.last_prices = {"wood": 10.0}
+        firm.get_financial_snapshot.return_value = {} # Mock helper if needed
 
         # Real FinanceDepartment to test logic
+        # FinanceDepartment expects a firm object, our mock is sufficient if it behaves like one
         firm.finance = FinanceDepartment(firm, config, initial_capital=0.0)
         # Mock logger
         firm.logger = MagicMock()
diff --git a/tests/system/test_engine.py b/tests/system/test_engine.py
index 24ef4b1..35685f9 100644
--- a/tests/system/test_engine.py
+++ b/tests/system/test_engine.py
@@ -308,7 +308,13 @@ def mock_ai_trainer():
 @pytest.fixture
 def mock_repository():
     repo = MagicMock()
-    repo.save_simulation_run = MagicMock(return_value=1)  # Return a dummy run_id
+    # Mock the nested structure: repo.runs.save_simulation_run
+    repo.runs = MagicMock()
+    repo.runs.save_simulation_run = MagicMock(return_value=1)
+
+    # Also mock the top-level method if it's called directly elsewhere (backward compatibility)
+    repo.save_simulation_run = MagicMock(return_value=1)
+
     repo.save_economic_indicator = MagicMock()
     repo.save_agent_states = MagicMock()
     repo.save_transactions = MagicMock()
