# 에이전트 리팩토링 설계 (Agent Refactoring Design)

## 1. 에이전트 공통 로직 추상화 (BaseAgent 도입)

### 1.1. 문제점
- 현재 `Household`와 `Firm` 에이전트 클래스 간에 자산 관리, 욕구(needs) 처리 등 공통적인 속성과 메서드가 중복되어 있습니다. 이는 코드의 재사용성을 저해하고 유지보수를 어렵게 만듭니다.

### 1.2. 개선 방안
- `BaseAgent`라는 추상(Abstract) 클래스를 도입하여 모든 에이전트가 공통적으로 가져야 할 속성(예: `id`, `assets`, `needs`, `inventory`, `logger` 등)과 메서드(예: `update_needs`, `consume` 등)를 정의합니다.
- `Household`와 `Firm` 클래스는 `BaseAgent`를 상속받아 공통 로직을 재사용하고, 각 에이전트의 고유한 로직만 구현하도록 합니다.
- `BaseAgent`는 `abc` 모듈의 `ABC`를 상속받아 추상 클래스로 정의하고, 필요에 따라 추상 메서드를 포함할 수 있습니다.

### 1.3. 예상 효과
- 코드 중복 제거 및 재사용성 증대
- 코드 구조의 명확성 및 유지보수 용이성 향상
- 새로운 에이전트 타입 추가 시 확장성 확보

## 2. 의사결정 로직 분리 (DecisionEngine 패턴 적용)

### 2.1. 문제점
- 현재 에이전트 클래스 내부에 의사결정 로직이 직접 구현되어 있어, 에이전트의 상태(State)와 행동(Behavior) 결정 로직이 강하게 결합되어 있습니다. 이는 의사결정 로직의 재사용, 테스트, 그리고 AI 모델과의 통합을 어렵게 만듭니다.

### 2.2. 개선 방안
- 에이전트의 의사결정 로직을 별도의 `DecisionEngine` 클래스(예: `HouseholdDecisionEngine`, `FirmDecisionEngine`)로 분리합니다.
- 에이전트 클래스는 자신의 상태(데이터)만 관리하고, 실제 의사결정은 주입(Injection)된 `DecisionEngine` 객체에 위임합니다.
- `AIDecisionEngine`은 `DecisionEngine`의 한 종류로, AI 모델을 활용한 의사결정을 담당합니다.
- `DecisionEngine`은 `make_decisions`와 같은 공통 인터페이스를 정의하여, 다양한 의사결정 전략(예: 규칙 기반, AI 기반)을 유연하게 교체할 수 있도록 합니다.

### 2.3. 예상 효과
- **책임 분리:** 에이전트는 '무엇을 가지고 있는가'에 집중하고, 의사결정 엔진은 '무엇을 할 것인가'에 집중하여 코드의 응집도를 높입니다.
- **테스트 용이성:** 의사결정 로직을 에이전트와 독립적으로 테스트할 수 있게 되어, 단위 테스트 작성이 훨씬 용이해집니다.
- **유연성 및 확장성:** 다양한 의사결정 전략을 쉽게 추가하고 교체할 수 있으며, AI 모델 통합이 용이해집니다.
- **코드 가독성 향상:** 에이전트 클래스의 코드가 간결해지고, 의사결정 로직이 명확하게 분리됩니다.
