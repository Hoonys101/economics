{
  "_meta": {
    "version": "1.0"
  },
  "missions": {
    "mod-finance-audit": {
      "key": "mod-finance-audit",
      "title": "Module A Audit: Finance & Accounting Deep-Dive",
      "type": "gemini",
      "instruction_raw": "\nPerform a deep audit of Finance/Accounting modules (settlement_system.py, engine.py, accounting.py).\nFocus on: TD-CRIT-FLOAT-CORE, TD-ECON-M2-INV, TD-SYS-ACCOUNTING-GAP.\n\nREPORT STRUCTURE:\n1. Root Cause: Identify exactly why floats or incorrect logic persist.\n2. Solution: Define the integer conversion and reciprocal accounting rules.\n3. Pseudo Code & Structural Proposal: Provide the specific DTO/API changes needed.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "audit",
      "context_files": [
        "simulation/systems/settlement_system.py",
        "modules/finance/engine.py",
        "simulation/systems/accounting.py",
        "simulation/dtos/api.py",
        "modules/finance/api.py"
      ],
      "output_path": "design/3_work_artifacts/audits/MOD_FINANCE_AUDIT.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-arch-audit": {
      "key": "mod-arch-audit",
      "title": "Module B Audit: Architecture & Orchestration Resilience",
      "type": "gemini",
      "instruction_raw": "\nAudit Architecture/Orchestration modules (world_state.py, tick_orchestrator.py, firm.py).\nFocus on: TD-ARCH-GOV-MISMATCH, TD-ARCH-ORCH-HARD, TD-ARCH-FIRM-COUP.\n\nREPORT STRUCTURE:\n1. Root Cause: Explain the singleton mismatch and fragile attribute access triggers.\n2. Solution: Define the singleton enforcement and defensive access layer.\n3. Pseudo Code & Structural Proposal: Provide the IWorldState/IOrchestrator interface updates.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "audit",
      "context_files": [
        "simulation/world_state.py",
        "simulation/orchestration/tick_orchestrator.py",
        "simulation/models/firm.py",
        "simulation/dtos/api.py"
      ],
      "output_path": "design/3_work_artifacts/audits/MOD_ARCH_AUDIT.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-lifecycle-audit": {
      "key": "mod-lifecycle-audit",
      "title": "Module C Audit: Lifecycle & Saga Reliability",
      "type": "gemini",
      "instruction_raw": "\nAudit Lifecycle/Saga logic (firm_management.py, sagas/orchestrator.py, bank.py).\nFocus on: TD-ARCH-STARTUP-RACE, TD-FIN-SAGA-ORPHAN, TD-INT-BANK-ROLLBACK.\n\nREPORT STRUCTURE:\n1. Root Cause: Trace the race condition and Saga ID desync.\n2. Solution: Define the atomic onboarding protocol and DTO normalization.\n3. Pseudo Code & Structural Proposal: Provide the step-by-step lifecycle code reordering.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "audit",
      "context_files": [
        "simulation/systems/firm_management.py",
        "modules/finance/sagas/orchestrator.py",
        "simulation/systems/bank.py",
        "simulation/dtos/api.py"
      ],
      "output_path": "design/3_work_artifacts/audits/MOD_LIFECYCLE_AUDIT.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-test-audit": {
      "key": "mod-test-audit",
      "title": "Module D Audit: Test Suite Modernization",
      "type": "gemini",
      "instruction_raw": "\nAudit Test Infrastructure (tests/unit, simulation/dtos/api.py).\nFocus on: TD-TEST-TX-MOCK-LAG, TD-TEST-TAX-DEPR, TD-TEST-COCKPIT-MOCK, TD-TEST-LIFE-STALE.\n\nREPORT STRUCTURE:\n1. Root Cause: Identify why mocks drifted from production protocols.\n2. Solution: Define the Mock Factory and Assertion modernization strategy.\n3. Pseudo Code & Structural Proposal: Provide examples of the new contract-based assertions.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "audit",
      "context_files": [
        "tests/unit/test_transaction_engine.py",
        "tests/unit/test_engine.py",
        "simulation/dtos/api.py"
      ],
      "output_path": "design/3_work_artifacts/audits/MOD_TEST_AUDIT.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-arch-spec": {
      "key": "mod-arch-spec",
      "title": "Module B Spec: Architecture & Orchestration Resilience",
      "type": "gemini",
      "instruction_raw": "\nBased on MOD_ARCH_AUDIT.md, draft a MISSION_SPEC for Jules:\n1. [DTO/API] Define IWorldState protocol and decorate SimulationState as a strict dataclass.\n2. [CORE] Implement IGovernmentRegistry logic for singleton/list synchronization.\n3. [STRUCT] Specify the transition to DepartmentContextDTO for Firm decoupling.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "spec",
      "context_files": [
        "design/3_work_artifacts/audits/MOD_ARCH_AUDIT.md",
        "simulation/dtos/api.py",
        "simulation/world_state.py"
      ],
      "output_path": "design/3_work_artifacts/specs/MOD_ARCH_SPEC.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-lifecycle-spec": {
      "key": "mod-lifecycle-spec",
      "title": "Module C Spec: Lifecycle & Saga Reliability",
      "type": "gemini",
      "instruction_raw": "\nBased on MOD_LIFECYCLE_AUDIT.md, draft a MISSION_SPEC for Jules:\n1. [DTO/API] Define IAgentRegistration protocol and unified SagaParticipantDTO schema.\n2. [CORE] Define the atomic onboarding protocol (Instantiate -> Register -> Fund).\n3. [STRUCT] Remove hasattr dependencies in bank rollback via strict interfaces.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "spec",
      "context_files": [
        "design/3_work_artifacts/audits/MOD_LIFECYCLE_AUDIT.md",
        "simulation/dtos/api.py",
        "simulation/systems/firm_management.py"
      ],
      "output_path": "design/3_work_artifacts/specs/MOD_LIFECYCLE_SPEC.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-test-spec": {
      "key": "mod-test-spec",
      "title": "Module D Spec: Test Suite Modernization",
      "type": "gemini",
      "instruction_raw": "\nBased on MOD_TEST_AUDIT.md, draft a MISSION_SPEC for Jules:\n1. [CORE] Define a unified MockFactory protocol to sync mocks with production DTOs.\n2. [TESTS] Specify the migration of legacy tax and liquidation tests to current APIs.\n3. [VERIFY] Sync all test verification logic with the new Module A/B/C contracts.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "spec",
      "context_files": [
        "design/3_work_artifacts/audits/MOD_TEST_AUDIT.md",
        "simulation/dtos/api.py",
        "tests/unit/test_transaction_engine.py"
      ],
      "output_path": "design/3_work_artifacts/specs/MOD_TEST_SPEC.md",
      "model": null,
      "audit_requirements": null
    },
    "mod-finance-spec": {
      "key": "mod-finance-spec",
      "title": "Module A Spec: Finance & DTO Hardening",
      "type": "gemini",
      "instruction_raw": "\nBased on MOD_FINANCE_AUDIT.md, draft a MISSION_SPEC for Jules:\n1. [DTO/API] Define exact integer-only signatures for IFinancialAgent and Loan/Debt DTOs.\n2. [CORE] Define the M2 calculation logic (floored liquidity + liability tracking).\n3. [LOGIC] Specify reciprocal expense logging for accounting.py.\n",
      "command": null,
      "file_path": null,
      "wait": false,
      "session_id": null,
      "worker": "spec",
      "context_files": [
        "design/3_work_artifacts/audits/MOD_FINANCE_AUDIT.md",
        "simulation/dtos/api.py",
        "modules/finance/api.py"
      ],
      "output_path": "design/3_work_artifacts/specs/MOD_FINANCE_SPEC.md",
      "model": null,
      "audit_requirements": null
    }
  }
}