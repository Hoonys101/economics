{
  "_meta": {
    "version": "1.0"
  },
  "missions": {
    "exec-cockpit-be-2": {
      "key": "exec-cockpit-be-2",
      "title": "Cockpit 2.0 BE-2: Genealogy System + API Endpoints",
      "type": "jules",
      "instruction_raw": "Implement Phase 2 of the Cockpit 2.0 Backend. PREREQUISITE: BE-1 must be merged first.\n\n1. **AgentGenealogy**: Create modules/watchtower/models/genealogy.py with AgentSurvivalData model and IGenealogyRepository Protocol as defined in the backend spec. Implement InMemoryGenealogyRepository.\n\n2. **DeathSystem Hook**: Inject IGenealogyRepository into DeathSystem.__init__() in simulation/systems/lifecycle/death_system.py. Archive agent traits on liquidation.\n\n3. **API Endpoints in server.py**:\n   - WebSocket /ws/live: broadcast WatchtowerSnapshotResponse at 1Hz\n   - WebSocket /ws/command: validate CockpitCommand via TypeAdapter, route to GlobalRegistry\n   - REST GET /api/v1/inspector/{agent_id}: return AgentInspectorResponse\n   - REST GET /api/v1/genealogy: return GenealogyResponse\n\n4. **Tests**: Add tests for DeathSystem genealogy hook and API endpoint validation.\n\nReference: design/3_work_artifacts/specs/MISSION_COCKPIT_API_CONTRACT.md (canonical schemas).",
      "status": "pending",
      "created_at": "",
      "command": "create",
      "file_path": "design/3_work_artifacts/specs/MISSION_COCKPIT_BACKEND_SPEC.md",
      "wait": false,
      "session_id": null,
      "worker": null,
      "context_files": [],
      "output_path": null,
      "model": null,
      "audit_requirements": null
    },
    "exec-cockpit-fe-1": {
      "key": "exec-cockpit-fe-1",
      "title": "Cockpit 2.0 FE-1: Foundation (Types + WebSocket + HUD + God Bar)",
      "type": "jules",
      "instruction_raw": "Implement Phase 1 of the Cockpit 2.0 Frontend. Tech: React 19 + Vite + TailwindCSS v4 + Recharts.\n\n=== ARCHITECTURAL MANDATE: Separation of Concerns ===\nHTML = Structure (semantic markup, container-component hierarchy)\nCSS  = Design (all visual styling, layout, animations \u2014 NO inline styles in JSX)\nJS   = Rendering logic (data binding, state management, event handlers \u2014 NO styling logic)\n\n=== CONTAINER-COMPONENT PATTERN ===\nEvery UI section follows Container (data/logic) + Component (pure render):\n- Container: fetches data, manages state, passes props\n- Component: receives props, returns JSX, ZERO side effects\n- CSS: Each component gets a dedicated CSS module or BEM-scoped class block\n\n=== SCOPE ===\n1. **TypeScript Types** (frontend/src/types/watchtower.ts): Define ALL interfaces matching MISSION_COCKPIT_API_CONTRACT.md exactly. WatchtowerSnapshot, CockpitCommand, AgentInspectorResponse, GenealogyResponse.\n\n2. **WebSocket Hook** (frontend/src/hooks/useWatchtower.ts): Replace REST polling. Connect to /ws/live (data) and /ws/command (commands). Reconnection with exponential backoff. Connection status state. sendCommand() function for God Mode.\n\n3. **Layer 1 \u2014 HUD Container** (frontend/src/containers/HudContainer.tsx + frontend/src/components/hud/):\n   - VitalStrip.tsx: Tick, FPS, M2 Leak (green/red), Active Population\n   - SpeedControl.tsx: Play/Pause/Step buttons \u2192 sendCommand()\n   - CSS: frontend/src/components/hud/hud.css\n\n4. **Layer 4 \u2014 God Bar Container** (frontend/src/containers/GodBarContainer.tsx + frontend/src/components/godbar/):\n   - ParamSlider.tsx: Base Rate, Tax Rate sliders \u2192 SET_PARAM commands\n   - ShockButton.tsx: Red trigger buttons \u2192 TRIGGER_SHOCK commands\n   - CSS: frontend/src/components/godbar/godbar.css\n\n5. **App.tsx Restructure**: Replace current tab layout with:\n   <HudContainer /> (top fixed)\n   <main> (flex-1, macro canvas \u2014 placeholder for FE-2)\n   <GodBarContainer /> (bottom fixed)\n\nDO NOT implement: Macro Charts, Scatter Plot, Inspector Panel (those are FE-2).",
      "status": "pending",
      "created_at": "",
      "command": "create",
      "file_path": "design/3_work_artifacts/specs/MISSION_COCKPIT_API_CONTRACT.md",
      "wait": false,
      "session_id": null,
      "worker": null,
      "context_files": [],
      "output_path": null,
      "model": null,
      "audit_requirements": null
    },
    "exec-cockpit-fe-2": {
      "key": "exec-cockpit-fe-2",
      "title": "Cockpit 2.0 FE-2: Macro Canvas + Scatter Plot + Inspector Panel",
      "type": "jules",
      "instruction_raw": "Implement Phase 2 of the Cockpit 2.0 Frontend. PREREQUISITE: FE-1 must be merged first.\n\n=== SAME ARCHITECTURAL MANDATE AS FE-1 ===\nHTML = Structure, CSS = Design, JS = Rendering. Container-Component pattern mandatory.\n\n=== SCOPE ===\n1. **Layer 2 \u2014 Macro Canvas** (frontend/src/containers/MacroCanvasContainer.tsx):\n   - LEFT: TimeSeriesPanel.tsx \u2014 GDP, CPI, Unemployment, Gini (Recharts LineChart)\n     * Maintain rolling buffer of last 200 ticks from WebSocket stream\n     * CSS: frontend/src/components/macro/timeseries.css\n   - CENTER: SurvivalScatter.tsx \u2014 Scatter plot (X: risk_tolerance, Y: wealth)\n     * Fetch from GET /api/v1/genealogy on tab activation\n     * Living agents = dot, Dead agents = X mark (color-coded)\n     * CSS: frontend/src/components/macro/scatter.css\n   - RIGHT: SectorFlow.tsx \u2014 Money flow summary (Household/Firm/Gov balances)\n     * CSS: frontend/src/components/macro/sectorflow.css\n\n2. **Layer 3 \u2014 Inspector Panel** (frontend/src/containers/InspectorContainer.tsx):\n   - Slide-over panel from right side on agent click\n   - Fetch GET /api/v1/inspector/{agent_id}\n   - Subcomponents:\n     * AgentIdentity.tsx: ID, type, alive status\n     * AgentWallet.tsx: currency balances\n     * AgentDecisionLog.tsx: timeline of decisions (chat-like UI)\n     * AgentInventory.tsx: item list\n   - CSS: frontend/src/components/inspector/inspector.css\n\n3. **Glassmorphism Design**: Apply dark mode + glass-card aesthetic from existing App.css. All new CSS files must use the existing design tokens (--background, --foreground, --primary, etc.).\n\nReference: design/3_work_artifacts/specs/MISSION_COCKPIT_API_CONTRACT.md",
      "status": "pending",
      "created_at": "",
      "command": "create",
      "file_path": "design/3_work_artifacts/specs/MISSION_COCKPIT_API_CONTRACT.md",
      "wait": false,
      "session_id": null,
      "worker": null,
      "context_files": [],
      "output_path": null,
      "model": null,
      "audit_requirements": null
    }
  }
}