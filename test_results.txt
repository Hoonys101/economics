
tests/unit/agents/test_government.py::test_calculate_income_tax_delegation PASSED [  0%]
tests/unit/agents/test_government.py::test_calculate_corporate_tax_delegation PASSED [  0%]
tests/unit/agents/test_government.py::test_collect_tax_removed PASSED    [  0%]
tests/unit/agents/test_government.py::test_run_public_education_delegation PASSED [  0%]
tests/unit/agents/test_government.py::test_deficit_spending_allowed_within_limit PASSED [  0%]
tests/unit/agents/test_government.py::test_deficit_spending_blocked_if_bond_fails PASSED [  0%]
tests/unit/ai/test_debt_constraints.py::test_consumption_manager_debt_constraint PASSED [  0%]
tests/unit/ai/test_debt_constraints.py::test_household_ai_debt_penalty_reward PASSED [  1%]
tests/unit/analysis/test_scenario_verifier.py::TestScenarioVerifier::test_initialize_subscribes_to_telemetry PASSED [  1%]
tests/unit/analysis/test_scenario_verifier.py::TestScenarioVerifier::test_verify_tick_aggregates_reports PASSED [  1%]
tests/unit/analysis/test_scenario_verifier.py::TestScenarioVerifier::test_verify_tick_handles_missing_data PASSED [  1%]
tests/unit/analysis/test_scenario_verifier.py::TestScenarioVerifier::test_verify_tick_handles_running_state PASSED [  1%]
tests/unit/analysis/test_scenario_verifier.py::TestScenarioVerifier::test_verify_tick_handles_exception_in_judge PASSED [  1%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_execution_order PASSED [  1%]
tests/unit/components/test_agent_lifecycle.py::test_run_tick_unemployed PASSED [  1%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_add_child PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_age_one_tick PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_create_offspring_demographics PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_get_generational_similarity PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_above_threshold PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_handle_death_under_threshold PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_initialization PASSED [  2%]
tests/unit/components/test_demographics_component.py::TestDemographicsComponent::test_set_spouse PASSED [  2%]
tests/unit/components/test_engines.py::TestHREngine::test_create_fire_transaction PASSED [  3%]
tests/unit/components/test_engines.py::TestHREngine::test_process_payroll PASSED [  3%]
tests/unit/components/test_engines.py::TestSalesEngine::test_post_ask PASSED [  3%]
tests/unit/components/test_engines.py::TestSalesEngine::test_generate_marketing_transaction PASSED [  3%]
tests/unit/components/test_engines.py::TestFinanceEngine::test_generate_financial_transactions PASSED [  3%]
tests/unit/components/test_engines.py::TestProductionEngine::test_produce_depreciation PASSED [  3%]
tests/unit/components/test_market_component.py::test_choose_best_seller_utility PASSED [  3%]
tests/unit/components/test_market_component.py::test_choose_best_seller_no_market PASSED [  3%]
tests/unit/corporate/test_corporate_orchestrator.py::test_orchestration PASSED [  4%]
tests/unit/corporate/test_financial_strategy.py::test_dividend_logic PASSED [  4%]
tests/unit/corporate/test_financial_strategy.py::test_debt_logic_borrow PASSED [  4%]
tests/unit/corporate/test_hr_strategy.py::test_hiring_logic PASSED       [  4%]
tests/unit/corporate/test_production_strategy.py::test_rd_logic PASSED   [  4%]
tests/unit/corporate/test_production_strategy.py::test_automation_investment PASSED [  4%]
tests/unit/corporate/test_sales_manager.py::test_pricing_logic PASSED    [  4%]
tests/unit/dashboard/components/test_controls.py::TestControls::test_missing_registry_value_disables_widget PASSED [  4%]
tests/unit/dashboard/components/test_controls.py::TestControls::test_on_change_generates_command PASSED [  5%]
tests/unit/dashboard/components/test_controls.py::TestControls::test_render_dynamic_controls_tabs PASSED [  5%]
tests/unit/dashboard/test_registry_service.py::TestRegistryService::test_get_all_metadata PASSED [  5%]
tests/unit/dashboard/test_registry_service.py::TestRegistryService::test_get_metadata_by_key PASSED [  5%]
tests/unit/dashboard/test_registry_service.py::TestRegistryService::test_get_metadata_unknown_key PASSED [  5%]
tests/unit/dashboard/test_socket_manager.py::TestSocketManager::test_audit_logs PASSED [  5%]
tests/unit/dashboard/test_socket_manager.py::TestSocketManager::test_initialization PASSED [  5%]
tests/unit/dashboard/test_socket_manager.py::TestSocketManager::test_send_command PASSED [  5%]
tests/unit/dashboard/test_socket_manager.py::TestSocketManager::test_telemetry_handling PASSED [  6%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_triggered PASSED [  6%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestHouseholdSurvivalOverride::test_survival_override_insufficient_funds PASSED [  6%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_cost_plus_fallback PASSED [  6%]
tests/unit/decisions/test_animal_spirits_phase2.py::TestFirmPricingLogic::test_fire_sale_trigger PASSED [  6%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_rd_investment PASSED [  6%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_capex_investment PASSED [  6%]
tests/unit/decisions/test_finance_rules.py::TestFinanceRules::test_dividend_setting PASSED [  6%]
tests/unit/decisions/test_household_engine_refactor.py::test_engine_execution_parity_smoke PASSED [  7%]
tests/unit/decisions/test_household_integration_new.py::TestHouseholdIntegrationNew::test_make_decision_integration PASSED [  7%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_hires_labor PASSED [  7%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_does_not_hire_when_full PASSED [  7%]
tests/unit/decisions/test_hr_rules.py::TestHRRules::test_make_decisions_fires_excess_labor PASSED [  7%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_initialization PASSED [  7%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_overstock_reduces_target PASSED [  7%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_understock_increases_target PASSED [  7%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_target_within_bounds_no_change PASSED [  8%]
tests/unit/decisions/test_production_rules.py::TestProductionRules::test_make_decisions_target_min_max_bounds PASSED [  8%]
tests/unit/decisions/test_sales_rules.py::TestSalesRules::test_sales_aggressiveness_impact_on_price PASSED [  8%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_clear_market_matching PASSED [  8%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_settle_matured_loans PASSED [  8%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_offer_insufficient_reserves PASSED [  8%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_offer_success PASSED [  8%]
tests/unit/finance/call_market/test_service.py::TestCallMarketService::test_submit_loan_request PASSED [  8%]
tests/unit/finance/engines/test_finance_engines.py::test_loan_risk_engine_assess_approved PASSED [  9%]
tests/unit/finance/engines/test_finance_engines.py::test_loan_risk_engine_assess_denied PASSED [  9%]
tests/unit/finance/engines/test_finance_engines.py::test_loan_booking_engine_grant_loan PASSED [  9%]
tests/unit/finance/engines/test_finance_engines.py::test_liquidation_engine_liquidate PASSED [  9%]
tests/unit/finance/engines/test_finance_engines.py::test_debt_servicing_engine PASSED [  9%]
tests/unit/finance/engines/test_finance_engines.py::test_zero_sum_verifier PASSED [  9%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_bank_methods_presence PASSED [  9%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_grant_loan PASSED [  9%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_repay_loan PASSED [ 10%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_balance PASSED [ 10%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_get_debt_status PASSED [ 10%]
tests/unit/finance/test_bank_service_interface.py::TestBankServiceInterface::test_interface_compliance_mypy PASSED [ 10%]
tests/unit/finance/test_credit_scoring.py::test_assess_approved PASSED   [ 10%]
tests/unit/finance/test_credit_scoring.py::test_assess_dti_fail PASSED   [ 10%]
tests/unit/finance/test_credit_scoring.py::test_assess_ltv_fail PASSED   [ 10%]
tests/unit/finance/test_credit_scoring.py::test_assess_unsecured_cap_fail PASSED [ 10%]
tests/unit/finance/test_credit_scoring.py::test_zero_income_fail PASSED  [ 11%]
tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_success PASSED [ 11%]
tests/unit/finance/test_finance_system_refactor.py::test_request_bailout_loan_insufficient_funds PASSED [ 11%]
tests/unit/finance/test_finance_system_refactor.py::test_grant_bailout_loan_deprecated PASSED [ 11%]
tests/unit/finance/test_settlement_system_overdraft.py::TestSettlementSystemOverdraft::test_normal_agent_cannot_overdraft PASSED [ 11%]
tests/unit/finance/test_settlement_system_overdraft.py::TestSettlementSystemOverdraft::test_system_agent_can_overdraft PASSED [ 11%]
tests/unit/finance/test_utils.py::test_round_to_pennies_basic PASSED     [ 11%]
tests/unit/finance/test_utils.py::test_round_to_pennies_decimal PASSED   [ 11%]
tests/unit/finance/test_utils.py::test_round_to_pennies_int PASSED       [ 12%]
tests/unit/finance/test_utils.py::test_round_to_pennies_large PASSED     [ 12%]
tests/unit/finance/test_utils.py::test_round_to_pennies_negative PASSED  [ 12%]
tests/unit/firm/test_firm_actions.py::TestFirmActionExecutor::test_invest_automation_success PASSED [ 12%]
tests/unit/firm/test_firm_actions.py::TestFirmActionExecutor::test_invest_rd_success PASSED [ 12%]
tests/unit/firm/test_firm_actions.py::TestFirmActionExecutor::test_fire_employee PASSED [ 12%]
tests/unit/firm/test_production_int_math.py::test_production_integer_depreciation PASSED [ 12%]
tests/unit/firm/test_production_int_math.py::test_production_deterministic_output PASSED [ 12%]
tests/unit/firm/test_production_int_math.py::test_production_deterministic_floor PASSED [ 13%]
tests/unit/governance/test_judicial_ssot.py::test_waterfall_cash_only_ssot PASSED [ 13%]
tests/unit/governance/test_judicial_ssot.py::test_waterfall_partial_cash PASSED [ 13%]
tests/unit/governance/test_judicial_system.py::test_judicial_system_waterfall_full_recovery PASSED [ 13%]
tests/unit/governance/test_judicial_system.py::test_judicial_system_waterfall_partial_recovery_and_restructuring PASSED [ 13%]
tests/unit/handlers/test_bailout_handler.py::test_bailout_handler_validate_success PASSED [ 13%]
tests/unit/handlers/test_bailout_handler.py::test_bailout_handler_validate_fail_type PASSED [ 13%]
tests/unit/handlers/test_bailout_handler.py::test_bailout_handler_execute_success PASSED [ 13%]
tests/unit/handlers/test_bond_issuance_handler.py::test_bond_issuance_handler_success PASSED [ 14%]
tests/unit/handlers/test_bond_issuance_handler.py::test_bond_issuance_handler_payment_fail PASSED [ 14%]
tests/unit/handlers/test_bond_issuance_handler.py::test_bond_issuance_handler_asset_fail_rollback PASSED [ 14%]
tests/unit/household/test_housing_connector.py::TestHousingConnector::test_initiate_purchase PASSED [ 14%]
tests/unit/household/test_housing_connector.py::TestHousingConnector::test_unknown_action PASSED [ 14%]
tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_snapshot_copies_state PASSED [ 14%]
tests/unit/household/test_snapshot_assembler.py::TestHouseholdSnapshotAssembler::test_assemble_nested_structures PASSED [ 14%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sparse_history_returns_infinite_bounds PASSED [ 14%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_sufficient_history_returns_finite_bounds PASSED [ 15%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_no_history_returns_infinite_bounds PASSED [ 15%]
tests/unit/markets/test_circuit_breaker_relaxation.py::TestCircuitBreakerRelaxation::test_default_config_fallback PASSED [ 15%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_success PASSED [ 15%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_insufficient_down_payment PASSED [ 15%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_loan_rejected PASSED [ 15%]
tests/unit/markets/test_housing_transaction_handler.py::test_housing_transaction_disbursement_failed PASSED [ 15%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_initialization PASSED [ 15%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_grants_loan PASSED [ 16%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_with_profile PASSED [ 16%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_loan_request_denies_loan PASSED [ 16%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_repayment_processes_repayment PASSED [ 16%]
tests/unit/markets/test_loan_market.py::TestLoanMarket::test_place_order_unknown_type_logs_warning PASSED [ 16%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_success PASSED [ 16%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_ltv PASSED [ 16%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_dti PASSED [ 16%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_evaluate_mortgage_fail_dti_with_existing_debt PASSED [ 17%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_stage_mortgage_success PASSED [ 17%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_stage_mortgage_fail_eval PASSED [ 17%]
tests/unit/markets/test_loan_market_mortgage.py::TestLoanMarketMortgage::test_end_to_end_dto_purity PASSED [ 17%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_initialization PASSED [ 17%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_buy_order_adds_and_sorts PASSED [ 17%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_sell_order_adds_and_sorts PASSED [ 17%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_place_order_unknown_type_logs_warning PASSED [ 17%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_full_fill PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_buy_order PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_partial_fill_sell_order PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_no_match_price PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_multiple_matches PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_different_items PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_empty_books PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_goods PASSED [ 18%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_match_orders_transaction_type_labor PASSED [ 19%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_empty PASSED [ 19%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_ask_non_empty PASSED [ 19%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_empty PASSED [ 19%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_best_bid_non_empty PASSED [ 19%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_empty PASSED [ 19%]
tests/unit/markets/test_order_book_market.py::TestOrderBookMarket::test_get_order_book_status_non_empty PASSED [ 19%]
tests/unit/markets/test_order_book_market_cancellation.py::TestOrderBookMarketCancellation::test_cancel_orders_removes_agent_orders PASSED [ 19%]
tests/unit/markets/test_order_book_market_cancellation.py::TestOrderBookMarketCancellation::test_cancel_orders_no_effect_if_no_orders PASSED [ 20%]
tests/unit/markets/test_stock_market_cancellation.py::TestStockMarketCancellation::test_cancel_orders_removes_agent_orders PASSED [ 20%]
tests/unit/markets/test_stock_market_cancellation.py::TestStockMarketCancellation::test_cancel_orders_mixed_int_str_id PASSED [ 20%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_calculation_normal PASSED [ 20%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_calculation_zero_income PASSED [ 20%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_pir_alarm PASSED [ 20%]
tests/unit/modules/analysis/test_bubble_observatory.py::TestBubbleObservatory::test_csv_logging_structure PASSED [ 20%]
tests/unit/modules/common/config/test_impl.py::test_config_manager_load_and_get PASSED [ 20%]
tests/unit/modules/common/config/test_impl.py::test_config_manager_override PASSED [ 21%]
tests/unit/modules/common/config/test_impl.py::test_legacy_support PASSED [ 21%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_load_yaml PASSED [ 21%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_get_with_default PASSED [ 21%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_hybrid_fallback PASSED [ 21%]
tests/unit/modules/common/config_manager/test_config_manager.py::test_set_value_for_test PASSED [ 21%]
tests/unit/modules/demographics/test_event_consistency.py::test_demographic_event_consistency PASSED [ 21%]
tests/unit/modules/demographics/test_event_consistency.py::test_sync_stats PASSED [ 21%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_set_policy_rate_valid PASSED [ 22%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_set_policy_rate_invalid PASSED [ 22%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_purchase_success PASSED [ 22%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_sale_success PASSED [ 22%]
tests/unit/modules/finance/central_bank/test_cb_service.py::test_conduct_omo_failure PASSED [ 22%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_safe_zone PASSED [ 22%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_distress_zone PASSED [ 22%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_zero_assets PASSED [ 22%]
tests/unit/modules/finance/test_corporate_finance.py::TestAltmanZScoreCalculator::test_calculate_negative_values PASSED [ 23%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_bailout_loan_generates_command PASSED [ 23%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_market_bond_issuance_generates_transaction PASSED [ 23%]
tests/unit/modules/finance/test_double_entry.py::TestDoubleEntry::test_qe_bond_issuance_generates_transaction PASSED [ 23%]
tests/unit/modules/finance/test_monetary_engine.py::test_monetary_engine_calculate_rate_structure PASSED [ 23%]
tests/unit/modules/finance/test_qe.py::TestQE::test_issue_treasury_bonds_qe_trigger PASSED [ 23%]
tests/unit/modules/finance/test_qe.py::TestQE::test_issue_treasury_bonds_normal PASSED [ 23%]
tests/unit/modules/finance/test_settlement_purity.py::TestSettlementPurity::test_settlement_system_implements_monetary_authority PASSED [ 23%]
tests/unit/modules/finance/test_settlement_purity.py::TestSettlementPurity::test_finance_system_uses_monetary_authority PASSED [ 24%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_issue_treasury_bonds_calls_settlement_system PASSED [ 24%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_collect_corporate_tax_calls_settlement_system PASSED [ 24%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_risk_premium_calculation PASSED [ 24%]
tests/unit/modules/finance/test_sovereign_debt.py::TestSovereignDebt::test_insufficient_funds_fails_issuance PASSED [ 24%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_pass PASSED [ 24%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_startup_fail PASSED [ 24%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_pass PASSED [ 24%]
tests/unit/modules/finance/test_system.py::test_evaluate_solvency_established_fail PASSED [ 25%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_market PASSED [ 25%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_qe PASSED [ 25%]
tests/unit/modules/finance/test_system.py::test_issue_treasury_bonds_fail PASSED [ 25%]
tests/unit/modules/finance/test_system.py::test_bailout_fails_with_insufficient_government_funds PASSED [ 25%]
tests/unit/modules/finance/test_system.py::test_grant_bailout_loan PASSED [ 25%]
tests/unit/modules/finance/test_system.py::test_service_debt_central_bank_repayment PASSED [ 25%]
tests/unit/modules/firm/test_engines.py::TestFinanceEngine::test_plan_budget_basics PASSED [ 25%]
tests/unit/modules/firm/test_engines.py::TestFinanceEngine::test_plan_budget_with_debt_healthy PASSED [ 26%]
tests/unit/modules/firm/test_engines.py::TestFinanceEngine::test_plan_budget_with_debt_distressed PASSED [ 26%]
tests/unit/modules/firm/test_engines.py::TestFinanceEngine::test_plan_budget_returns_integers PASSED [ 26%]
tests/unit/modules/firm/test_engines.py::TestHREngine::test_manage_workforce_hiring PASSED [ 26%]
tests/unit/modules/firm/test_engines.py::TestHREngine::test_manage_workforce_firing PASSED [ 26%]
tests/unit/modules/firm/test_engines.py::TestHREngine::test_manage_workforce_wage_scaling PASSED [ 26%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_calculates_survival_cost_correctly PASSED [ 26%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_determine_fiscal_stance_defaults_if_no_config PASSED [ 26%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_progressive PASSED [ 27%]
tests/unit/modules/government/components/test_fiscal_policy_manager.py::TestFiscalPolicyManager::test_calculate_tax_liability_zero_or_negative PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_ledger_expansion.py::TestMonetaryLedgerExpansion::test_asset_liquidation_expansion PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_ledger_expansion.py::TestMonetaryLedgerExpansion::test_lender_of_last_resort_expansion PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_ledger_expansion.py::TestMonetaryLedgerExpansion::test_other_types_no_expansion PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_equilibrium PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_gdp_zero_or_negative PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_high_inflation PASSED [ 27%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_missing_data_defaults PASSED [ 28%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_overheating_economy PASSED [ 28%]
tests/unit/modules/government/components/test_monetary_policy_manager.py::TestMonetaryPolicyManager::test_recession PASSED [ 28%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_propose_actions_red_party PASSED [ 28%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_propose_actions_blue_party PASSED [ 28%]
tests/unit/modules/government/test_adaptive_gov_brain.py::test_candidates_generation PASSED [ 28%]
tests/unit/modules/government/test_fiscal_bond_service.py::TestFiscalBondService::test_calculate_yield_low_debt PASSED [ 28%]
tests/unit/modules/government/test_fiscal_bond_service.py::TestFiscalBondService::test_calculate_yield_high_debt PASSED [ 28%]
tests/unit/modules/government/test_fiscal_bond_service.py::TestFiscalBondService::test_issue_bonds_normal_buyer PASSED [ 29%]
tests/unit/modules/government/test_fiscal_bond_service.py::TestFiscalBondService::test_issue_bonds_qe_buyer PASSED [ 29%]
tests/unit/modules/government/test_fiscal_bond_service.py::TestFiscalBondService::test_issue_bonds_no_buyer PASSED [ 29%]
tests/unit/modules/government/test_fiscal_engine.py::test_fiscal_engine_decide_structure PASSED [ 29%]
tests/unit/modules/government/test_politics_system.py::test_enact_new_tax_policy PASSED [ 29%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_basic PASSED [ 29%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_consume_service PASSED [ 29%]
tests/unit/modules/household/test_consumption_manager.py::TestConsumptionManager::test_decide_and_consume PASSED [ 29%]
tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_orchestrate_housing_buy PASSED [ 30%]
tests/unit/modules/household/test_decision_unit.py::TestDecisionUnit::test_shadow_wage_update PASSED [ 30%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_basic PASSED [ 30%]
tests/unit/modules/household/test_econ_component.py::TestEconComponent::test_update_perceived_prices_hyperinflation PASSED [ 30%]
tests/unit/modules/household/test_new_engines.py::TestBeliefEngine::test_update_beliefs_basic PASSED [ 30%]
tests/unit/modules/household/test_new_engines.py::TestCrisisEngine::test_evaluate_distress_portfolio PASSED [ 30%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_add_and_query_record PASSED [ 30%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_query_filtering PASSED [ 30%]
tests/unit/modules/memory/test_memory_v2.py::TestMemoryManager::test_persistence PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_process_bankruptcy_event PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_confirm_sale PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_deposit_revenue PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_no_signal PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_generate_liquidation_orders_resets_metrics PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager.py::TestPublicManager::test_execute_asset_buyout PASSED [ 31%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_financial_agent PASSED [ 32%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_system_financial_agent PASSED [ 32%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_implements_asset_recovery_system PASSED [ 32%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_bankruptcy_processing_id_handling PASSED [ 32%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_liquidation_order_generation_id PASSED [ 32%]
tests/unit/modules/system/execution/test_public_manager_compliance.py::TestPublicManagerCompliance::test_asset_buyout_compliance PASSED [ 32%]
tests/unit/modules/system/services/test_schema_loader.py::TestSchemaLoader::test_load_schema_file_not_found PASSED [ 32%]
tests/unit/modules/system/services/test_schema_loader.py::TestSchemaLoader::test_load_schema_invalid_structure PASSED [ 32%]
tests/unit/modules/system/services/test_schema_loader.py::TestSchemaLoader::test_load_schema_success PASSED [ 33%]
tests/unit/modules/system/services/test_schema_loader.py::TestSchemaLoader::test_load_schema_yaml_error PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_dispatch_set_param PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_rollback_set_param_restorable PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_rollback_set_param_fallback PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_rollback_creation_restorable PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_dispatch_inject_money PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_rollback_inject_money PASSED [ 33%]
tests/unit/modules/system/test_command_service_unit.py::test_commit_last_tick_clears_stack PASSED [ 34%]
tests/unit/modules/system/test_config_bridge.py::TestConfigBridge::test_direct_access PASSED [ 34%]
tests/unit/modules/system/test_config_bridge.py::TestConfigBridge::test_registry_integration PASSED [ 34%]
tests/unit/modules/system/test_config_bridge.py::TestConfigBridge::test_missing_attribute PASSED [ 34%]
tests/unit/modules/system/test_config_bridge.py::TestConfigBridge::test_dir_listing PASSED [ 34%]
tests/unit/modules/system/test_config_bridge.py::TestConfigBridge::test_enum_access PASSED [ 34%]
tests/unit/modules/system/test_registry.py::TestGlobalRegistry::test_set_and_get_basic PASSED [ 34%]
tests/unit/modules/system/test_registry.py::TestGlobalRegistry::test_origin_priority PASSED [ 34%]
tests/unit/modules/system/test_registry.py::TestGlobalRegistry::test_locking_mechanism PASSED [ 35%]
tests/unit/modules/system/test_registry.py::TestGlobalRegistry::test_observer_notification PASSED [ 35%]
tests/unit/modules/system/test_registry.py::TestGlobalRegistry::test_key_specific_observer PASSED [ 35%]
tests/unit/modules/system/test_server_bridge.py::TestTelemetryExchange::test_thread_safety PASSED [ 35%]
tests/unit/modules/system/test_server_bridge.py::TestTelemetryExchange::test_unsubscribe_stops_notification PASSED [ 35%]
tests/unit/modules/system/test_server_bridge.py::TestTelemetryExchange::test_update_notifies_listener PASSED [ 35%]
tests/unit/modules/system/test_telemetry.py::test_subscribe_and_harvest_valid_path PASSED [ 35%]
tests/unit/modules/system/test_telemetry.py::test_subscribe_invalid_path PASSED [ 35%]
tests/unit/modules/system/test_telemetry.py::test_multi_frequency PASSED [ 36%]
tests/unit/modules/system/test_telemetry.py::test_unsubscribe PASSED     [ 36%]
tests/unit/modules/system/test_telemetry.py::test_runtime_error_handling PASSED [ 36%]
tests/unit/modules/system/test_telemetry.py::test_deep_nested_path PASSED [ 36%]
tests/unit/modules/system/test_telemetry.py::test_root_object_path PASSED [ 36%]
tests/unit/modules/system/test_telemetry.py::test_subscribe_pre_validation PASSED [ 36%]
tests/unit/modules/system/test_telemetry_robustness.py::TestTelemetryRobustness::test_flat_key_resolution PASSED [ 36%]
tests/unit/modules/system/test_telemetry_robustness.py::TestTelemetryRobustness::test_mixed_resolution PASSED [ 36%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agents_basic_empty PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agents_basic_household PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agents_basic_firm PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agents_basic_inactive PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agents_basic_limit PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agent_detail_household PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agent_detail_firm PASSED [ 37%]
tests/unit/modules/watchtower/test_agent_service.py::test_get_agent_detail_not_found PASSED [ 37%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_execution PASSED [ 38%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_execution_fallback PASSED [ 38%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_no_settlement_system PASSED [ 38%]
tests/unit/orchestration/test_phase_housing_saga.py::test_phase_housing_saga_system_no_method PASSED [ 38%]
tests/unit/registry/test_service.py::test_load_missions_empty PASSED     [ 38%]
tests/unit/registry/test_service.py::test_register_and_get_mission PASSED [ 38%]
tests/unit/registry/test_service.py::test_delete_mission PASSED          [ 38%]
tests/unit/registry/test_service.py::test_get_mission_prompt PASSED      [ 38%]
tests/unit/registry/test_service.py::test_migration PASSED               [ 39%]
tests/unit/registry/test_service.py::test_lock_timeout PASSED            [ 39%]
tests/unit/registry/test_service.py::test_lock_success PASSED            [ 39%]
tests/unit/sagas/test_orchestrator.py::test_submit_saga PASSED           [ 39%]
tests/unit/sagas/test_orchestrator.py::test_process_sagas_liveness_check PASSED [ 39%]
tests/unit/sagas/test_orchestrator.py::test_process_sagas_active_participants PASSED [ 39%]
tests/unit/sagas/test_orchestrator.py::test_find_and_compensate_by_agent_success PASSED [ 39%]
tests/unit/sagas/test_orchestrator.py::test_find_and_compensate_by_agent_no_handler PASSED [ 39%]
tests/unit/simulation/orchestration/phases/test_intercept.py::test_execute_no_commands PASSED [ 40%]
tests/unit/simulation/orchestration/phases/test_intercept.py::test_execute_commands_audit_pass PASSED [ 40%]
tests/unit/simulation/systems/test_audit_total_m2.py::test_audit_total_m2_logic PASSED [ 40%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_disbursement_failure PASSED [ 40%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_government_seller PASSED [ 40%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_payment_failure PASSED [ 40%]
tests/unit/systems/handlers/test_housing_handler.py::TestHousingTransactionHandler::test_handle_purchase_success PASSED [ 40%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_fallback_price PASSED [ 40%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_no_inventory PASSED [ 41%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_no_public_manager PASSED [ 41%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_payment_fail PASSED [ 41%]
tests/unit/systems/handlers/test_liquidation_handlers.py::TestInventoryLiquidationHandler::test_liquidate_with_inventory PASSED [ 41%]
tests/unit/systems/lifecycle/test_aging_system.py::TestAgingSystem::test_execute_delegation PASSED [ 41%]
tests/unit/systems/lifecycle/test_aging_system.py::TestAgingSystem::test_firm_distress PASSED [ 41%]
tests/unit/systems/lifecycle/test_aging_system.py::TestAgingSystem::test_firm_grace_period_config PASSED [ 41%]
tests/unit/systems/lifecycle/test_birth_system.py::TestBirthSystem::test_process_births_with_factory_zero_sum PASSED [ 41%]
tests/unit/systems/lifecycle/test_death_system.py::TestDeathSystem::test_firm_liquidation PASSED [ 42%]
tests/unit/systems/lifecycle/test_death_system.py::TestDeathSystem::test_firm_liquidation_cancels_orders PASSED [ 42%]
tests/unit/systems/lifecycle/test_death_system_performance.py::TestDeathSystemPerformance::test_localized_agent_removal PASSED [ 42%]
tests/unit/systems/test_commerce_system.py::test_execute_consumption_and_leisure PASSED [ 42%]
tests/unit/systems/test_commerce_system.py::test_fast_track_consumption_if_needed PASSED [ 42%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_and_insolvent PASSED [ 42%]
tests/unit/systems/test_commerce_system_logging.py::test_log_reject_when_stock_out_but_solvent PASSED [ 42%]
tests/unit/systems/test_demographic_manager_newborn.py::test_newborn_receives_initial_needs_from_config PASSED [ 42%]
tests/unit/systems/test_event_system.py::test_inflation_shock PASSED     [ 43%]
tests/unit/systems/test_event_system.py::test_recession_shock PASSED     [ 43%]
tests/unit/systems/test_event_system.py::test_no_event PASSED            [ 43%]
tests/unit/systems/test_firm_management_leak.py::TestFirmManagementLeak::test_spawn_firm_leak_detection PASSED [ 43%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_missing_settlement_system PASSED [ 43%]
tests/unit/systems/test_firm_management_refactor.py::TestFirmManagementRefactor::test_spawn_firm_transfer_failure PASSED [ 43%]
tests/unit/systems/test_housing_service.py::test_housing_service_handle_housing_updates_mortgage PASSED [ 43%]
tests/unit/systems/test_housing_service.py::test_housing_service_handle_housing_clears_mortgage_if_missing PASSED [ 43%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_maintenance_uses_transfer PASSED [ 44%]
tests/unit/systems/test_housing_system.py::TestHousingSystemRefactor::test_process_housing_rent_collection_uses_transfer PASSED [ 44%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_distribution_transaction_generation PASSED [ 44%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_multiple_heirs_metadata PASSED [ 44%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_escheatment_when_no_heirs PASSED [ 44%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_zero_assets_distribution PASSED [ 44%]
tests/unit/systems/test_inheritance_manager.py::TestInheritanceManager::test_tax_transaction_generation PASSED [ 44%]
tests/unit/systems/test_labor_market_analyzer.py::test_update_market_history PASSED [ 44%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_increase PASSED [ 45%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_decay PASSED [ 45%]
tests/unit/systems/test_labor_market_analyzer.py::test_calculate_shadow_reservation_wage_floor PASSED [ 45%]
tests/unit/systems/test_lifecycle_manager_integration.py::TestAgentLifecycleManager::test_execute_delegation PASSED [ 45%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_asset_liquidation_integration PASSED [ 45%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_bank_claim_handling PASSED [ 45%]
tests/unit/systems/test_liquidation_manager.py::TestLiquidationManager::test_initiate_liquidation_orchestration PASSED [ 45%]
tests/unit/systems/test_ma_manager.py::TestMAManager::test_execute_bankruptcy_records_loss_in_ledger PASSED [ 45%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_budget_constraints PASSED [ 46%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_legacy PASSED [ 46%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_basic_grant_settlement PASSED [ 46%]
tests/unit/systems/test_ministry_of_education.py::TestMinistryOfEducation::test_run_public_education_scholarship_settlement PASSED [ 46%]
tests/unit/systems/test_perception_system.py::test_perception_system_update PASSED [ 46%]
tests/unit/systems/test_perception_system.py::test_smart_money_filter PASSED [ 46%]
tests/unit/systems/test_perception_system.py::test_laggard_filter PASSED [ 46%]
tests/unit/systems/test_perception_system.py::test_lemon_filter PASSED   [ 46%]
tests/unit/systems/test_perception_system.py::test_policy_filter PASSED  [ 47%]
tests/unit/systems/test_sensory_system.py::test_sensory_dto_generation PASSED [ 47%]
tests/unit/systems/test_sensory_system.py::test_sensory_dto_missing_tracker PASSED [ 47%]
tests/unit/systems/test_settlement_saga_integration.py::TestSettlementSagaIntegration::test_process_sagas_integration_initiated_to_credit_check PASSED [ 47%]
tests/unit/systems/test_settlement_saga_integration.py::TestSettlementSagaIntegration::test_process_sagas_integration_cancellation PASSED [ 47%]
tests/unit/systems/test_settlement_security.py::test_audit_total_m2_strict_protocol PASSED [ 47%]
tests/unit/systems/test_settlement_security.py::test_transfer_memo_validation PASSED [ 47%]
tests/unit/systems/test_settlement_security.py::test_transfer_invalid_agent PASSED [ 47%]
tests/unit/systems/test_settlement_security.py::test_mint_and_distribute_security PASSED [ 48%]
tests/unit/systems/test_settlement_security.py::test_settle_atomic_logging PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_transfer_success PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_transfer_insufficient_funds PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_minting PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_create_and_transfer_government_grant PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_burning PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_transfer_and_destroy_tax PASSED [ 48%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_record_liquidation_escheatment PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_transfer_rollback PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_transfer_insufficient_cash_despite_bank_balance PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_transfer_insufficient_total_funds PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_success PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_execute_multiparty_settlement_rollback PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_success PASSED [ 49%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_rollback PASSED [ 50%]
tests/unit/systems/test_settlement_system.py::test_settle_atomic_credit_fail_rollback PASSED [ 50%]
tests/unit/systems/test_social_system.py::test_update_social_ranks PASSED [ 50%]
tests/unit/systems/test_social_system.py::test_calculate_reference_standard PASSED [ 50%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_corporate_tax PASSED [ 50%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_flat PASSED [ 50%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_scaling PASSED [ 50%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_calculate_income_tax_progressive_with_brackets PASSED [ 50%]
tests/unit/systems/test_tax_agency.py::TestTaxAgency::test_collect_tax PASSED [ 51%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_effective_diffusion_rate PASSED [ 51%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_unlock_mechanism PASSED [ 51%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_diffusion_over_time PASSED [ 51%]
tests/unit/systems/test_technology_manager.py::TestTechnologyManager::test_productivity_multiplier PASSED [ 51%]
tests/unit/test_ai_driven_firm_engine.py::test_adjust_price_tactic PASSED [ 51%]
tests/unit/test_ai_training_manager.py::test_get_top_performing_agents PASSED [ 51%]
tests/unit/test_ai_training_manager.py::test_get_under_performing_agents PASSED [ 51%]
tests/unit/test_ai_training_manager.py::test_clone_and_mutate_q_table PASSED [ 52%]
tests/unit/test_ai_training_manager.py::test_clone_from_fittest_agent PASSED [ 52%]
tests/unit/test_ai_training_manager.py::test_run_imitation_learning_cycle PASSED [ 52%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_wealth_distribution PASSED [ 52%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_needs_distribution PASSED [ 52%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_sales_by_good PASSED [ 52%]
tests/unit/test_api_extensions.py::TestEconomicIndicatorsViewModel::test_get_market_order_book PASSED [ 52%]
tests/unit/test_api_history.py::TestHistoryAPI::test_gdp_history_on_refresh PASSED [ 52%]
tests/unit/test_bank.py::test_bank_assets_delegation PASSED              [ 53%]
tests/unit/test_bank.py::test_bank_deposit_delegation PASSED             [ 53%]
tests/unit/test_bank.py::test_bank_withdraw_delegation PASSED            [ 53%]
tests/unit/test_bank.py::test_grant_loan_delegation PASSED               [ 53%]
tests/unit/test_bank.py::test_withdraw_for_customer PASSED               [ 53%]
tests/unit/test_bank.py::test_run_tick_delegates_to_service_debt PASSED  [ 53%]
tests/unit/test_bank.py::test_grant_loan_with_object_calls_transfer PASSED [ 53%]
tests/unit/test_bank.py::test_grant_loan_with_id_skips_transfer PASSED   [ 53%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_default_processing PASSED [ 54%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_grant_loan_delegation PASSED [ 54%]
tests/unit/test_bank_decomposition.py::TestBankDecomposition::test_run_tick_interest_collection PASSED [ 54%]
tests/unit/test_config_parity.py::test_household_config_parity PASSED    [ 54%]
tests/unit/test_config_parity.py::test_firm_config_parity PASSED         [ 54%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_emergency PASSED [ 54%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered PASSED [ 54%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_emergency_triggered_insufficient_funds PASSED [ 54%]
tests/unit/test_consumption_manager_survival.py::TestConsumptionManagerSurvival::test_check_survival_override_no_signal PASSED [ 55%]
tests/unit/test_diagnostics.py::test_get_total_system_money_diagnostics PASSED [ 55%]
tests/unit/test_factories.py::TestMarketSignalFactory::test_create_market_signals PASSED [ 55%]
tests/unit/test_factories.py::TestMarketSnapshotFactory::test_create_snapshot PASSED [ 55%]
tests/unit/test_factories.py::TestMarketSnapshotFactory::test_create_snapshot_with_housing_quality PASSED [ 55%]
tests/unit/test_factories.py::TestDecisionInputFactory::test_create_decision_input PASSED [ 55%]
tests/unit/test_firm_profit.py::test_firm_profit_history_update PASSED   [ 55%]
tests/unit/test_firm_profit.py::test_firm_revenue_expenses_reset PASSED  [ 55%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_no_liabilities PASSED [ 56%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_liabilities PASSED [ 56%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_with_treasury_shares PASSED [ 56%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_negative_net_assets PASSED [ 56%]
tests/unit/test_firms.py::TestFirmBookValue::test_book_value_zero_shares PASSED [ 56%]
tests/unit/test_firms.py::TestFirmProduction::test_produce PASSED        [ 56%]
tests/unit/test_firms.py::TestFirmSales::test_post_ask PASSED            [ 56%]
tests/unit/test_firms.py::TestFirmSales::test_adjust_marketing_budget_increase PASSED [ 56%]
tests/unit/test_god_command_protocol.py::test_set_param_success PASSED   [ 57%]
tests/unit/test_god_command_protocol.py::test_inject_asset_success PASSED [ 57%]
tests/unit/test_god_command_protocol.py::test_audit_failure_rollback_money PASSED [ 57%]
tests/unit/test_god_command_protocol.py::test_mixed_batch_atomic_rollback PASSED [ 57%]
tests/unit/test_god_command_protocol.py::test_validation_failure_aborts_batch PASSED [ 57%]
tests/unit/test_goods_handler_precision.py::TestGoodsHandlerPrecision::test_legacy_price_handling PASSED [ 57%]
tests/unit/test_government_structure.py::TestGovernmentStructure::test_government_singleton PASSED [ 57%]
tests/unit/test_government_structure.py::TestGovernmentStructure::test_simulation_delegation PASSED [ 57%]
tests/unit/test_handlers_fix.py::TestHandlerFix::test_goods_handler_uses_record_consumption PASSED [ 58%]
tests/unit/test_handlers_fix.py::TestHandlerFix::test_labor_handler_uses_add_labor_income PASSED [ 58%]
tests/unit/test_household_ai.py::test_ai_creates_purchase_order PASSED   [ 58%]
tests/unit/test_household_ai.py::test_ai_evaluates_consumption_options PASSED [ 58%]
tests/unit/test_household_ai.py::TestHouseholdAIInsight::test_active_learning_td_error PASSED [ 58%]
tests/unit/test_household_ai.py::TestHouseholdAIInsight::test_perceptual_filters_lag PASSED [ 58%]
tests/unit/test_household_ai.py::TestHouseholdAIInsight::test_perceptual_filters_sma PASSED [ 58%]
tests/unit/test_household_ai.py::TestHouseholdAIInsight::test_panic_reaction PASSED [ 58%]
tests/unit/test_household_ai_insight.py::TestHouseholdAIInsight::test_active_learning_td_error PASSED [ 59%]
tests/unit/test_household_ai_insight.py::TestHouseholdAIInsight::test_perceptual_filters_lag PASSED [ 59%]
tests/unit/test_household_ai_insight.py::TestHouseholdAIInsight::test_perceptual_filters_sma PASSED [ 59%]
tests/unit/test_household_ai_insight.py::TestHouseholdAIInsight::test_panic_reaction PASSED [ 59%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_make_decisions_calls_ai PASSED [ 59%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_do_nothing PASSED [ 59%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_basic_food_sufficient_assets PASSED [ 59%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_buy_luxury_food_insufficient_assets PASSED [ 59%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_consumption_evaluate_options_chooses_best_utility PASSED [ 60%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_aggressive PASSED [ 60%]
tests/unit/test_household_decision_engine_new.py::TestAIDrivenHouseholdDecisionEngine::test_labor_market_participation_passive_no_offer PASSED [ 60%]
tests/unit/test_household_refactor.py::TestHouseholdRefactor::test_property_management PASSED [ 60%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_dti_guardrail PASSED [ 60%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_npv_buy_calculation PASSED [ 60%]
tests/unit/test_household_system2.py::TestHouseholdSystem2::test_rational_choice_buy PASSED [ 60%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_solvent PASSED [ 60%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_insolvent_severance PASSED [ 61%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_zombie PASSED [ 61%]
tests/unit/test_hr_engine_refactor.py::test_process_payroll_context_immutability PASSED [ 61%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_post_job_offer PASSED [ 61%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_post_job_seeker PASSED [ 61%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_match_market_perfect_match PASSED [ 61%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_match_market_mismatch_major PASSED [ 61%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_match_market_wage_too_low PASSED [ 61%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_place_order_adapter PASSED [ 62%]
tests/unit/test_labor_market_system.py::TestLaborMarketSystem::test_place_order_backward_compatibility PASSED [ 62%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_multiple_agents PASSED [ 62%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_no_data PASSED [ 62%]
tests/unit/test_learning_tracker.py::TestLearningTracker::test_get_summary_single_agent PASSED [ 62%]
tests/unit/test_ledger_manager.py::test_archive_resolved_items PASSED    [ 62%]
tests/unit/test_ledger_manager.py::test_register_new_item PASSED         [ 62%]
tests/unit/test_ledger_manager.py::test_sync_with_codebase PASSED        [ 62%]
tests/unit/test_ledger_manager.py::test_pipe_escaping_in_ledger PASSED   [ 63%]
tests/unit/test_lifecycle_reset.py::TestLifecycleReset::test_reset_tick_state PASSED [ 63%]
tests/unit/test_lifecycle_reset.py::TestLifecycleReset::test_household_reset_logic PASSED [ 63%]
tests/unit/test_logger.py::TestLogger::test_clear_logs PASSED            [ 63%]
tests/unit/test_logger.py::TestLogger::test_log_writing PASSED           [ 63%]
tests/unit/test_logger.py::TestLogger::test_singleton_instance PASSED    [ 63%]
tests/unit/test_ma_pennies.py::TestMAManagerPennies::test_friendly_merger_price_is_int PASSED [ 63%]
tests/unit/test_ma_pennies.py::TestMAManagerPennies::test_hostile_takeover_price_is_int PASSED [ 63%]
tests/unit/test_ma_pennies.py::TestMAManagerPennies::test_bankruptcy_liquidation_values_are_int PASSED [ 64%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_pass_through PASSED [ 64%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_dict_legacy_format PASSED [ 64%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_convert_dict_canonical_format PASSED [ 64%]
tests/unit/test_market_adapter.py::TestMarketAdapter::test_invalid_input PASSED [ 64%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_decrease_on_low_efficiency PASSED [ 64%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_increase_on_high_efficiency PASSED [ 64%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_budget_stable_on_saturation PASSED [ 64%]
tests/unit/test_marketing_roi.py::TestMarketingROI::test_first_tick_skip PASSED [ 65%]
tests/unit/test_markets_v2.py::TestOrderBookMarketInitialization::test_market_initialization PASSED [ 65%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_single_buy_order PASSED [ 65%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_buy_orders_sorted PASSED [ 65%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_sell_orders_sorted PASSED [ 65%]
tests/unit/test_markets_v2.py::TestPlaceOrderToBook::test_add_orders_with_same_price PASSED [ 65%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_unfilled_order_no_match PASSED [ 65%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_full_match_one_to_one PASSED [ 65%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_partial_match_then_book PASSED [ 66%]
tests/unit/test_markets_v2.py::TestOrderMatching::test_match_with_multiple_orders PASSED [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_empty PASSED [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_bid_non_empty PASSED [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_empty PASSED [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_best_ask_non_empty PASSED [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_last_traded_price PASSED [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread PASSED     [ 66%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_spread_no_bid_or_ask PASSED [ 67%]
tests/unit/test_markets_v2.py::TestMarketAPI::test_get_market_depth PASSED [ 67%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_bond_repayment_split PASSED [ 67%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_bond_repayment_legacy_fallback PASSED [ 67%]
tests/unit/test_monetary_ledger_repayment.py::TestMonetaryLedgerRepayment::test_interest_is_not_destroyed PASSED [ 67%]
tests/unit/test_phase1_refactor.py::TestPhase1DecisionRefactor::test_execute_flow PASSED [ 67%]
tests/unit/test_phase1_refactor.py::TestPhase1DecisionRefactor::test_dispatch_logic PASSED [ 67%]
tests/unit/test_portfolio_macro.py::test_portfolio_optimization_under_stagflation PASSED [ 67%]
tests/unit/test_protocol_lockdown.py::test_financial_entity_protocol_compliance PASSED [ 68%]
tests/unit/test_protocol_lockdown.py::test_settlement_system_protocol_compliance PASSED [ 68%]
tests/unit/test_protocol_lockdown.py::test_transaction_executor_protocol_compliance PASSED [ 68%]
tests/unit/test_protocol_lockdown.py::test_bank_service_protocol_compliance PASSED [ 68%]
tests/unit/test_real_estate_lien.py::test_real_estate_unit_initialization PASSED [ 68%]
tests/unit/test_real_estate_lien.py::test_liens_management PASSED        [ 68%]
tests/unit/test_real_estate_lien.py::test_mortgage_id_backward_compatibility PASSED [ 68%]
tests/unit/test_repository.py::test_save_and_get_simulation_run PASSED   [ 68%]
tests/unit/test_repository.py::test_save_and_get_agent_state PASSED      [ 69%]
tests/unit/test_repository.py::test_save_and_get_transaction PASSED      [ 69%]
tests/unit/test_repository.py::test_save_and_get_economic_indicators PASSED [ 69%]
tests/unit/test_repository.py::test_indexes_created PASSED               [ 69%]
tests/unit/test_sales_engine_refactor.py::test_adjust_marketing_budget PASSED [ 69%]
tests/unit/test_sales_engine_refactor.py::test_adjust_marketing_budget_zero_revenue PASSED [ 69%]
tests/unit/test_sensory_purity.py::TestSensoryPurity::test_generate_government_sensory_dto_purity PASSED [ 69%]
tests/unit/test_sensory_purity.py::TestSensoryPurity::test_logic_with_more_agents PASSED [ 69%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_appliance_effect PASSED [ 70%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_a_dark_ages PASSED [ 70%]
tests/unit/test_socio_tech.py::TestSocioTechDynamics::test_scenario_b_techno_optimism PASSED [ 70%]
tests/unit/test_ssot_compliance.py::TestSSoTCompliance::test_inheritance_transaction_pennies PASSED [ 70%]
tests/unit/test_ssot_compliance.py::TestSSoTCompliance::test_settlement_protocol_compliance_get_balance PASSED [ 70%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_initialization PASSED [ 70%]
tests/unit/test_stock_market.py::TestStockMarketInitialization::test_update_reference_prices PASSED [ 70%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_buy_order PASSED [ 70%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_place_sell_order PASSED [ 71%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_price_clamping PASSED [ 71%]
tests/unit/test_stock_market.py::TestStockOrderPlacement::test_order_sorting PASSED [ 71%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_full_match PASSED [ 71%]
tests/unit/test_stock_market.py::TestStockOrderMatching::test_partial_match PASSED [ 71%]
tests/unit/test_stock_market.py::TestOrderExpiry::test_clear_expired_orders PASSED [ 71%]
tests/unit/test_strict_mocking.py::test_strict_mock_isettlement_system PASSED [ 71%]
tests/unit/test_strict_mocking.py::test_strict_mock_imonetary_authority PASSED [ 71%]
tests/unit/test_strict_mocking.py::test_protocol_enforcer_utility PASSED [ 72%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_success PASSED [ 72%]
tests/unit/test_tax_collection.py::test_atomic_wealth_tax_collection_insufficient_funds PASSED [ 72%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_firm_payer_scenario PASSED [ 72%]
tests/unit/test_tax_incidence.py::TestTaxIncidence::test_household_payer_scenario PASSED [ 72%]
tests/unit/test_taxation_system.py::test_generate_corporate_tax_intents PASSED [ 72%]
tests/unit/test_taxation_system.py::test_generate_corporate_tax_intents_missing_config PASSED [ 72%]
tests/unit/test_taxation_system.py::test_record_revenue_success PASSED   [ 72%]
tests/unit/test_taxation_system.py::test_record_revenue_failure PASSED   [ 73%]
tests/unit/test_telemetry_purity.py::test_telemetry_exchange_accepts_valid_dtos PASSED [ 73%]
tests/unit/test_telemetry_purity.py::test_telemetry_exchange_rejects_invalid_types PASSED [ 73%]
tests/unit/test_transaction_engine.py::test_validator_success PASSED     [ 73%]
tests/unit/test_transaction_engine.py::test_validator_negative_amount PASSED [ 73%]
tests/unit/test_transaction_engine.py::test_validator_insufficient_funds PASSED [ 73%]
tests/unit/test_transaction_engine.py::test_validator_invalid_account PASSED [ 73%]
tests/unit/test_transaction_engine.py::test_executor_success PASSED      [ 73%]
tests/unit/test_transaction_engine.py::test_executor_failure_rollback PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_ledger_engine_process_transaction_success PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_ledger_engine_process_transaction_validation_fail PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_ledger_engine_process_transaction_execution_fail PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_ledger_engine_process_batch_success PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_ledger_engine_process_batch_rollback PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_transaction_engine_registry PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_transaction_engine_dispatch_success PASSED [ 74%]
tests/unit/test_transaction_engine.py::test_transaction_engine_dispatch_fail_validation PASSED [ 75%]
tests/unit/test_transaction_engine.py::test_transaction_engine_no_handler PASSED [ 75%]
tests/unit/test_transaction_engine.py::test_transaction_engine_with_context PASSED [ 75%]
tests/unit/test_transaction_engine.py::test_adapter_registry_accessor PASSED [ 75%]
tests/unit/test_transaction_handlers.py::TestGoodsTransactionHandler::test_goods_settle_fail PASSED [ 75%]
tests/unit/test_transaction_handlers.py::TestGoodsTransactionHandler::test_goods_success_atomic PASSED [ 75%]
tests/unit/test_transaction_handlers.py::TestLaborTransactionHandler::test_labor_atomic_settlement PASSED [ 75%]
tests/unit/test_transaction_integrity.py::TestTransactionIntegrity::test_commerce_system_transaction_total_pennies PASSED [ 75%]
tests/unit/test_transaction_integrity.py::TestTransactionIntegrity::test_settlement_system_record_total_pennies PASSED [ 76%]
tests/unit/test_transaction_processor.py::test_transaction_processor_dispatch_to_handler PASSED [ 76%]
tests/unit/test_transaction_processor.py::test_transaction_processor_ignores_credit_creation PASSED [ 76%]
tests/unit/test_transaction_processor.py::test_goods_handler_uses_atomic_settlement PASSED [ 76%]
tests/unit/test_transaction_processor.py::test_public_manager_routing PASSED [ 76%]
tests/unit/test_transaction_processor.py::test_transaction_processor_dispatches_housing PASSED [ 76%]
tests/unit/test_transaction_rollback.py::test_process_batch_rollback_integrity PASSED [ 76%]
tests/unit/test_watchtower_hardening.py::TestWatchtowerHardening::test_repo_birth_counts PASSED [ 76%]
tests/unit/test_watchtower_hardening.py::TestWatchtowerHardening::test_tracker_sma_logic PASSED [ 77%]
tests/unit/test_wave6_fiscal_masking.py::TestFiscalMasking::test_progressive_taxation_logic PASSED [ 77%]
tests/unit/test_wave6_fiscal_masking.py::TestFiscalMasking::test_wage_scaling_logic PASSED [ 77%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_record_sale_updates_tick PASSED [ 77%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_reduction PASSED [ 77%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_floor PASSED [ 77%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_dynamic_pricing_not_stale PASSED [ 77%]
tests/unit/test_wo157_dynamic_pricing.py::TestWO157DynamicPricing::test_transaction_processor_calls_record_sale PASSED [ 77%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_success PASSED [ 78%]
tests/unit/utils/test_config_factory.py::test_create_config_dto_missing_field PASSED [ 78%]
tests/integration/mission_int_02_stress_test.py::test_hyperinflation_scenario PASSED [ 78%]
tests/integration/mission_int_02_stress_test.py::test_bank_run_scenario PASSED [ 78%]
tests/integration/mission_int_02_stress_test.py::test_inventory_destruction_scenario PASSED [ 78%]
tests/integration/mission_int_02_stress_test.py::test_parameter_rollback PASSED [ 78%]
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_household_makes_decision PASSED [ 78%]
tests/integration/scenarios/diagnosis/test_agent_decision.py::test_firm_makes_decision PASSED [ 78%]
tests/integration/scenarios/diagnosis/test_api_contract.py::test_api_contract_placeholder PASSED [ 79%]
tests/integration/scenarios/diagnosis/test_dashboard_contract.py::test_dashboard_snapshot_structure PASSED [ 79%]
tests/integration/scenarios/diagnosis/test_indicator_pipeline.py::test_indicator_aggregation PASSED [ 79%]
tests/integration/scenarios/diagnosis/test_market_mechanics.py::test_order_book_matching PASSED [ 79%]
tests/integration/scenarios/phase21/test_automation.py::test_firm_automation_init PASSED [ 79%]
tests/integration/scenarios/phase21/test_automation.py::test_production_function_with_automation PASSED [ 79%]
tests/integration/scenarios/phase21/test_automation.py::test_system2_planner_guidance PASSED [ 79%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_automation_preference PASSED [ 79%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_guidance_ma_preference PASSED [ 80%]
tests/integration/scenarios/phase21/test_firm_system2.py::test_system2_planner_with_debt PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_hyperinflation_trigger PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_deflation_asset_shock PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_consumption_pessimism PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_supply_shock PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_panic_selling_order_generation PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_hoarding_amplification PASSED [ 80%]
tests/integration/scenarios/test_stress_scenarios.py::TestPhase28StressScenarios::test_debt_repayment_priority PASSED [ 81%]
tests/integration/test_app.py::test_app_placeholder PASSED               [ 81%]
tests/integration/test_atomic_settlement.py::test_settle_atomic_success PASSED [ 81%]
tests/integration/test_atomic_settlement.py::test_settle_atomic_rollback PASSED [ 81%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_pause_resume PASSED [ 81%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_set_base_rate PASSED [ 81%]
tests/integration/test_cockpit_integration.py::test_simulation_processes_set_tax_rate PASSED [ 81%]
tests/integration/test_config_hot_swap.py::test_config_hot_swap PASSED   [ 81%]
tests/integration/test_config_hot_swap.py::test_config_engine_type_access PASSED [ 82%]
tests/integration/test_config_hot_swap.py::test_defaults_loaded FAILED   [ 82%]
tests/integration/test_config_hot_swap.py::test_none_handling PASSED     [ 82%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_places_sell_order_for_food PASSED [ 82%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_places_buy_order_for_food PASSED [ 82%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_household_sells_labor PASSED [ 82%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_firm_buys_labor PASSED [ 82%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_goods_market_matching_integration PASSED [ 82%]
tests/integration/test_decision_engine_integration.py::TestDecisionEngineIntegration::test_labor_market_matching_integration PASSED [ 83%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_success_and_covenant_type PASSED [ 83%]
tests/integration/test_finance_bailout.py::test_grant_bailout_loan_insufficient_government_funds PASSED [ 83%]
tests/integration/test_firm_decision_scenarios.py::test_growth_scenario_with_golden_firm PASSED [ 83%]
tests/integration/test_fiscal_integrity.py::test_infrastructure_investment_generates_transactions_and_issues_bonds PASSED [ 83%]
tests/integration/test_fiscal_integrity.py::test_education_spending_generates_transactions_only PASSED [ 83%]
tests/integration/test_fiscal_policy.py::test_potential_gdp_ema_convergence PASSED [ 83%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_recession PASSED [ 83%]
tests/integration/test_fiscal_policy.py::test_counter_cyclical_tax_adjustment_boom PASSED [ 84%]
tests/integration/test_fiscal_policy.py::test_debt_ceiling_enforcement PASSED [ 84%]
tests/integration/test_fiscal_policy.py::test_calculate_income_tax_uses_current_rate PASSED [ 84%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit PASSED [ 84%]
tests/integration/test_generational_wealth_audit.py::TestGenerationalWealthAudit::test_run_audit_no_agents PASSED [ 84%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_calculate_reward PASSED [ 84%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_debt_crisis PASSED [ 84%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_high_inflation_low_unemp PASSED [ 84%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_get_state_ideal PASSED [ 85%]
tests/integration/test_government_ai_logic.py::TestGovernmentAILogic::test_learning_flow PASSED [ 85%]
tests/integration/test_government_finance.py::test_invest_infrastructure_generates_transaction PASSED [ 85%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_calculate_income_tax_uses_fiscal_policy_manager PASSED [ 85%]
tests/integration/test_government_fiscal_integration.py::TestGovernmentFiscalIntegration::test_make_policy_decision_updates_fiscal_policy PASSED [ 85%]
tests/integration/test_government_fiscal_policy.py::test_tax_collection_and_bailouts PASSED [ 85%]
tests/integration/test_government_fiscal_policy.py::test_infrastructure_investment PASSED [ 85%]
tests/integration/test_government_integration.py::test_government_execute_social_policy_tax_and_welfare PASSED [ 85%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_fiscal_engine_taylor_rule PASSED [ 86%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_execution_engine_state_update PASSED [ 86%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_orchestrator_integration PASSED [ 86%]
tests/integration/test_government_refactor_behavior.py::TestGovernmentRefactor::test_social_policy_execution PASSED [ 86%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_record_revenue_delegation PASSED [ 86%]
tests/integration/test_government_tax.py::TestGovernmentTax::test_collect_tax_removed PASSED [ 86%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_ant_high_rate PASSED [ 86%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_grasshopper_high_rate PASSED [ 86%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_at_neutral_rate PASSED [ 87%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_savings_incentive_with_inflation_expectation PASSED [ 87%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_consumption_aggressiveness_reduction PASSED [ 87%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_dsr_penalty_applied PASSED [ 87%]
tests/integration/test_interest_sensitivity.py::TestInterestSensitivityLogic::test_subsistence_constraint_bypasses_reduction PASSED [ 87%]
tests/integration/test_lifecycle_cycle.py::TestLifecycleCycle::test_lifecycle_transactions_processed_in_next_tick_strong_verify PASSED [ 87%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_hr_service_severance PASSED [ 87%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_hr_service_unpaid_wages PASSED [ 87%]
tests/integration/test_liquidation_services.py::TestLiquidationServices::test_tax_service PASSED [ 88%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_asset_rich_cash_poor_liquidation PASSED [ 88%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_severance_priority_over_shareholders PASSED [ 88%]
tests/integration/test_liquidation_waterfall.py::TestLiquidationWaterfallIntegration::test_waterfall_tiers PASSED [ 88%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_credit_creation_expansion PASSED [ 88%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_credit_destruction_contraction PASSED [ 88%]
tests/integration/test_m2_integrity.py::TestM2Integrity::test_internal_transfers_are_neutral PASSED [ 88%]
tests/integration/test_multicurrency_liquidation.py::TestMultiCurrencyLiquidation::test_foreign_currency_distribution_to_shareholders PASSED [ 88%]
tests/integration/test_omo_system.py::test_execute_omo_purchase_order_creation PASSED [ 89%]
tests/integration/test_omo_system.py::test_execute_omo_sale_order_creation PASSED [ 89%]
tests/integration/test_omo_system.py::test_process_omo_purchase_transaction PASSED [ 89%]
tests/integration/test_omo_system.py::test_process_omo_sale_transaction PASSED [ 89%]
tests/integration/test_persistence_purity.py::test_analytics_system_purity PASSED [ 89%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_trigger PASSED [ 89%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_immigration_conditions_not_met PASSED [ 89%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_renter PASSED [ 89%]
tests/integration/test_phase20_integration.py::TestPhase20Integration::test_system2_housing_cost_owner PASSED [ 90%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_gender_distribution PASSED [ 90%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_household_attributes_initialization PASSED [ 90%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_bankruptcy PASSED [ 90%]
tests/integration/test_phase20_scaffolding.py::TestPhase20Scaffolding::test_system2_planner_projection_positive PASSED [ 90%]
tests/integration/test_phase23_production.py::TestPhase23Production::test_production_boost_from_fertilizer_tech PASSED [ 90%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_bank_deposit_balance PASSED [ 90%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_logic PASSED [ 90%]
tests/integration/test_portfolio_integration.py::TestPortfolioIntegration::test_portfolio_manager_risk_averse PASSED [ 91%]
tests/integration/test_public_manager_integration.py::TestPublicManagerIntegration::test_full_liquidation_cycle PASSED [ 91%]
tests/integration/test_purity_gate.py::test_decision_context_purity PASSED [ 91%]
tests/integration/test_purity_gate.py::test_standalone_firm_engine_uses_dto PASSED [ 91%]
tests/integration/test_purity_gate.py::test_household_engine_uses_dto PASSED [ 91%]
tests/integration/test_registry_metadata.py::TestRegistryMetadata::test_schema_loader_loads_data PASSED [ 91%]
tests/integration/test_registry_metadata.py::TestRegistryMetadata::test_global_registry_loads_metadata_on_init PASSED [ 91%]
tests/integration/test_registry_metadata.py::TestRegistryMetadata::test_global_registry_get_metadata_returns_none_for_unknown_key PASSED [ 91%]
tests/integration/test_registry_metadata.py::TestRegistryMetadata::test_global_registry_get_entry_returns_none_for_unset_key PASSED [ 92%]
tests/integration/test_registry_metadata.py::TestRegistryMetadata::test_global_registry_get_entry_returns_entry PASSED [ 92%]
tests/integration/test_reporting_pennies.py::TestReportingPennies::test_household_expenditure_tracking PASSED [ 92%]
tests/integration/test_reporting_pennies.py::TestReportingPennies::test_household_income_tracking PASSED [ 92%]
tests/integration/test_reporting_pennies.py::TestReportingPennies::test_goods_handler_calls_tracker PASSED [ 92%]
tests/integration/test_reporting_pennies.py::TestReportingPennies::test_labor_handler_calls_tracker PASSED [ 92%]
tests/integration/test_reporting_pennies.py::TestReportingPennies::test_economic_tracker_aggregation PASSED [ 92%]
tests/integration/test_server_integration.py::test_command_injection PASSED [ 92%]
tests/integration/test_server_integration.py::test_telemetry_broadcast PASSED [ 93%]
tests/integration/test_shareholder_registry.py::test_registry_basic_operations PASSED [ 93%]
tests/integration/test_shareholder_registry.py::test_stock_market_integration PASSED [ 93%]
tests/integration/test_td194_integration.py::TestTD194Integration::test_household_make_decision_integrity PASSED [ 93%]
tests/integration/test_td194_integration.py::TestTD194Integration::test_firm_make_decision_integrity PASSED [ 93%]
tests/integration/test_telemetry_pipeline.py::TestTelemetryPipeline::test_update_telemetry_command_updates_subscriptions PASSED [ 93%]
tests/integration/test_telemetry_pipeline.py::TestTelemetryPipeline::test_update_telemetry_command_replaces_subscriptions PASSED [ 93%]
tests/integration/test_telemetry_pipeline.py::TestTelemetryPipeline::test_update_telemetry_invalid_value_type PASSED [ 93%]
tests/integration/test_thoughtstream_logger.py::test_logger_functionality PASSED [ 94%]
tests/integration/test_tick_normalization.py::TestTickNormalization::test_run_tick_executes_phases PASSED [ 94%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_a_pre_modern PASSED [ 94%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_b_high_income PASSED [ 94%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_c_low_income PASSED [ 94%]
tests/integration/test_wo048_breeding.py::TestWO048Breeding::test_scenario_d_middle_income PASSED [ 94%]
tests/integration/test_wo058_production.py::test_bootstrapper_injection PASSED [ 94%]
tests/integration/test_wo058_production.py::test_production_kickstart PASSED [ 94%]
tests/integration/test_wo167_grace_protocol.py::TestGraceProtocol::test_firm_grace_protocol PASSED [ 95%]
tests/integration/test_wo167_grace_protocol.py::TestGraceProtocol::test_household_grace_protocol PASSED [ 95%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_birth_gift_rounding PASSED [ 95%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_inheritance_distribution PASSED [ 95%]
tests/system/test_audit_integrity.py::TestEconomicIntegrityAudit::test_public_manager_tax_atomicity PASSED [ 95%]
tests/system/test_command_service_rollback.py::test_rollback_set_param_preserves_origin PASSED [ 95%]
tests/system/test_command_service_rollback.py::test_rollback_set_param_deletes_new_key PASSED [ 95%]
tests/system/test_command_service_rollback.py::test_rollback_inject_asset PASSED [ 95%]
tests/system/test_config_proxy.py::test_bootstrap PASSED                 [ 96%]
tests/system/test_config_proxy.py::test_override PASSED                  [ 96%]
tests/system/test_config_proxy.py::test_reset_to_defaults PASSED         [ 96%]
tests/system/test_config_proxy.py::test_observer PASSED                  [ 96%]
tests/system/test_config_proxy.py::test_snapshot PASSED                  [ 96%]
tests/system/test_config_proxy.py::test_get_method PASSED                [ 96%]
tests/system/test_config_proxy.py::test_lock_mechanism PASSED            [ 96%]
tests/system/test_engine.py::TestSimulation::test_simulation_initialization PASSED [ 96%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_basic PASSED [ 97%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_no_goods_market PASSED [ 97%]
tests/system/test_engine.py::TestSimulation::test_prepare_market_data_with_best_ask PASSED [ 97%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_goods_trade PASSED [ 97%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_labor_trade PASSED [ 97%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_research_labor_trade PASSED [ 97%]
tests/system/test_engine.py::TestSimulation::test_process_transactions_invalid_agents PASSED [ 97%]
tests/system/test_engine.py::test_handle_agent_lifecycle_removes_inactive_agents PASSED [ 97%]
tests/system/test_engine.py::test_death_system_executes_asset_buyout PASSED [ 98%]
tests/system/test_labor_config_migration.py::TestLaborConfigMigration::test_household_majors_assigned PASSED [ 98%]
tests/system/test_labor_config_migration.py::TestLaborConfigMigration::test_firm_majors_mapped PASSED [ 98%]
tests/system/test_labor_config_migration.py::TestLaborConfigMigration::test_labor_market_config_loaded PASSED [ 98%]
tests/system/test_labor_config_migration.py::TestLaborConfigMigration::test_firm_config_dto_has_labor_market PASSED [ 98%]
tests/system/test_phase29_depression.py::TestPhase29Depression::test_crisis_monitor_logging PASSED [ 98%]
tests/system/test_phase29_depression.py::TestPhase29Depression::test_depression_scenario_triggers PASSED [ 98%]
tests/system/test_serialization.py::TestSerialization::test_firm_multi_inventory_save_load PASSED [ 98%]
tests/system/test_serialization.py::TestSerialization::test_household_multi_inventory_save_load PASSED [ 99%]
tests/system/test_server_auth.py::test_auth_success PASSED               [ 99%]
tests/system/test_server_auth.py::test_auth_failure_invalid_token PASSED [ 99%]
tests/system/test_server_auth.py::test_auth_failure_missing_token PASSED [ 99%]
tests/system/test_server_security.py::test_server_config_dto_defaults PASSED [ 99%]
tests/system/test_server_security.py::test_server_binding_check_secure PASSED [ 99%]
tests/system/test_server_security.py::test_server_binding_check_insecure PASSED [ 99%]
tests/system/test_server_security.py::test_server_properties_proxied PASSED [100%]

================================== FAILURES ===================================
____________________________ test_defaults_loaded _____________________________

    def test_defaults_loaded():
        """
        Verifies that a value present in config/defaults.py but not in simulation.yaml
        is correctly loaded.
        """
        # FORMULA_TECH_LEVEL is 0.0 in defaults.py and not in simulation.yaml
        assert hasattr(config, "FORMULA_TECH_LEVEL")
>       assert config.FORMULA_TECH_LEVEL == 0.0
E       assert 1.0 == 0.0
E        +  where 1.0 = config.FORMULA_TECH_LEVEL

tests\integration\test_config_hot_swap.py:42: AssertionError
=========================== short test summary info ===========================
FAILED tests/integration/test_config_hot_swap.py::test_defaults_loaded - asse...
======================= 1 failed, 798 passed in 11.49s ========================
